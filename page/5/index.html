<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="keywords" content="javascript 前端">
<meta property="og:type" content="website">
<meta property="og:title" content="killsos">
<meta property="og:url" content="http://jsonload.com/page/5/index.html">
<meta property="og:site_name" content="killsos">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="killsos">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jsonload.com/page/5/">





  <title>killsos</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">killsos</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人情似水分高下 世事如云任卷舒</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/13/How-memory-management-works-in-JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/How-memory-management-works-in-JavaScript/" itemprop="url">How memory management works in JavaScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-13T15:28:33+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-JavaScript内存管理说明"><a href="#1-JavaScript内存管理说明" class="headerlink" title="1. JavaScript内存管理说明"></a>1. JavaScript内存管理说明</h2><p>理解JS内存 记住两个规则</p>
<ol>
<li>Primitive types (string, number, boolean) are passed as a copy to function arguments.  </li>
</ol>
<p>基本数据类型是值拷贝 对于函数调用</p>
<ol start="2">
<li>Objects are passed as a reference to function arguments</li>
</ol>
<p>对象是引用拷贝 对于函数调用</p>
<ol start="3">
<li>Functions and arrays (and null, but it’s a bug kept for historical reasons and it’s not really mutable as the two others) are considered as Objects by JavaScript</li>
</ol>
<p>函数 和 数组 null 也是引用拷贝  对于函数调用</p>
<p>区分办法 typeof</p>
<h2 id="2-引用如何在JavaScript中工作以及如何解释它"><a href="#2-引用如何在JavaScript中工作以及如何解释它" class="headerlink" title="2. 引用如何在JavaScript中工作以及如何解释它"></a>2. 引用如何在JavaScript中工作以及如何解释它</h2><p>const someObject = { a: 5 };</p>
<p>变量someObject的引用指向了{ a: 5 }对象引用</p>
<h2 id="3-Javascript闭包和引用"><a href="#3-Javascript闭包和引用" class="headerlink" title="3. Javascript闭包和引用"></a>3. Javascript闭包和引用</h2><p>A closure is a function that remembers its outer variables and can access them.<br>In JavaScript, almost all functions are naturally closures.</p>
<p>In programming languages, a closure, also lexical closure or function closure,<br>is a technique for implementing lexically scoped name binding in a language with first-class functions.<br>Operationally, a closure is a record storing a function[a] together with an environment.   </p>
<p>The environment is a mapping associating each free variable of the function<br>(variables that are used locally, but defined in an enclosing scope) with<br>the value or reference to which the name was bound when the closure was created.  </p>
<p>Unlike a plain function, a closure allows the function to access those captured variables through<br>the closure’s copies of their values or references, even when the function is invoked outside their scope.</p>
<p>作用域分为 词法作用域(静态作用域) 和 动态作用域  </p>
<p>词法作用域（静态作用域）lexical scope static scope 是在 书写代码 或者说定义时确定的  </p>
<p>动态作用域 dynamic scope 是在运行时确定的  </p>
<p>词法作用域关注函数在何处声明  </p>
<p>动态作用域关注函数从何处调用，其作用域链是基于运行时的调用栈的  </p>
<p>大多数现在程序设计语言都是采用静态作用域规则</p>
<p>只有为数不多的几种语言采用动态作用域规则，包括APL、Snobol和Lisp的早期方言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">  print a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bar() &#123;</span><br><span class="line">  var a = 2;</span><br><span class="line">  foo()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = 1;</span><br><span class="line">bar()</span><br><span class="line"></span><br><span class="line">静态 输出 1</span><br><span class="line">动态 输出 2</span><br></pre></td></tr></table></figure>
<h2 id="JavaScript中的闭包分配与变异"><a href="#JavaScript中的闭包分配与变异" class="headerlink" title="JavaScript中的闭包分配与变异"></a>JavaScript中的闭包分配与变异</h2><p>由于闭包和回调是JavaScript编程和事件驱动的编程的核心，因此您将需要大量时间依赖于此类事物。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/13/5-Uses-of-the-ES6-Spread-Operator-…/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/5-Uses-of-the-ES6-Spread-Operator-…/" itemprop="url">5 Uses of the ES6 Spread Operator (…)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-13T15:09:21+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="主要对象"><a href="#主要对象" class="headerlink" title="主要对象"></a>主要对象</h2><p>可以iterator的对象 例如 数组 对象</p>
<h2 id="1-拷贝数组"><a href="#1-拷贝数组" class="headerlink" title="1. 拷贝数组"></a>1. 拷贝数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">'John'</span>,<span class="string">'James'</span>,<span class="string">'Ben'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newNamesArray = [...names];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newNamesArray); <span class="comment">// ['John','James','Ben']</span></span><br></pre></td></tr></table></figure>
<h2 id="2-拼接数组"><a href="#2-拼接数组" class="headerlink" title="2. 拼接数组"></a>2. 拼接数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">'H'</span>, <span class="string">'I'</span>, <span class="string">'J'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = [...arr1, ...arr2];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// ['A', 'B', 'C', 'H', 'I', 'J']</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Spreading-elements-together-with-an-individual-element"><a href="#3-Spreading-elements-together-with-an-individual-element" class="headerlink" title="3. Spreading elements together with an individual element"></a>3. Spreading elements together with an individual element</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruits = [<span class="string">'Apple'</span>,<span class="string">'Pineapple'</span>,<span class="string">'Banana'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newFruits = [<span class="string">'Mango'</span>, ...fruits];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newFruits); <span class="comment">// ['Mango', 'Apple','Pineapple','Banana']</span></span><br></pre></td></tr></table></figure>
<h2 id="4-函数调用"><a href="#4-函数调用" class="headerlink" title="4. 函数调用"></a>4. 函数调用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">'John'</span>,<span class="string">'James'</span>,<span class="string">'Ben'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getNames = <span class="function">(<span class="params">f1, f2, f3</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`Names: <span class="subst">$&#123;f1&#125;</span>, <span class="subst">$&#123;f2&#125;</span> and <span class="subst">$&#123;f3&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">getNames(...names); <span class="comment">// Names: John, James and Ben</span></span><br></pre></td></tr></table></figure>
<h2 id="5-Spread-syntax-for-object-literals"><a href="#5-Spread-syntax-for-object-literals" class="headerlink" title="5. Spread syntax for object literals"></a>5. Spread syntax for object literals</h2><p>不能深度拷贝</p>
<p>类似于 Object.assign()  </p>
<p>右侧覆盖左侧   </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;</span><br><span class="line">  name: <span class="number">1</span>,</span><br><span class="line">  age: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o2 = &#123;</span><br><span class="line">  name: <span class="number">3</span>,</span><br><span class="line">  age: <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o3 = &#123;...o1, ...o2&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">//  age: 4,</span></span><br><span class="line"><span class="comment">//  name: 3</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/13/对else说no/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/对else说no/" itemprop="url">对else说no</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-13T14:52:16+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="why"><a href="#why" class="headerlink" title="why"></a>why</h2><p>为了避免使用if / else if，请仅使用if语句，以花一些时间来确保if组的输入条件互斥，以使答案不依赖于执行顺序  </p>
<h2 id="1-Don’t-use-if-else-keyword"><a href="#1-Don’t-use-if-else-keyword" class="headerlink" title="1. Don’t use if-else keyword"></a>1. Don’t use if-else keyword</h2><p>通过全部使用if语句来代替</p>
<h2 id="2-We-will-use-the-State-Pattern-to-remove-all-if-else-keyword-in-these-codes"><a href="#2-We-will-use-the-State-Pattern-to-remove-all-if-else-keyword-in-these-codes" class="headerlink" title="2. We will use the State Pattern to remove all if-else keyword in these codes"></a>2. We will use the State Pattern to remove all if-else keyword in these codes</h2><p>Traffic Light: Green (1 minute) → Yellow (10 seconds)→ Red (1 minute)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> TrafficLight = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// default state = red</span></span><br><span class="line">    <span class="keyword">var</span> currentState = <span class="keyword">new</span> Green(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.change = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// limits number of changes</span></span><br><span class="line">        <span class="keyword">if</span> (count++ &gt;= <span class="number">10</span>) <span class="keyword">return</span>;</span><br><span class="line">        currentState = state;</span><br><span class="line">        currentState.go();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.start = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        currentState.go();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Red = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.light = light</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.go = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log((<span class="string">"Red --&gt; for 1 minute"</span>))</span><br><span class="line">        light.change(<span class="keyword">new</span> Green(light));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Yellow = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.light = light;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.go = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Yellow --&gt; for 10 seconds"</span>)</span><br><span class="line">        light.change(<span class="keyword">new</span> Red(light));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Green = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.light = light;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.go = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Green --&gt; for 1 minute"</span>);</span><br><span class="line">        light.change(<span class="keyword">new</span> Yellow(light));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/13/JS小特点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/JS小特点/" itemprop="url">JS小特点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-13T10:28:14+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-this指向"><a href="#1-this指向" class="headerlink" title="1. this指向"></a>1. this指向</h2><p>记住一点 看调用 不看定义 注意bind</p>
<h2 id="2-函数调用"><a href="#2-函数调用" class="headerlink" title="2. 函数调用"></a>2. 函数调用</h2><p>  函数调用  方法调用  类调用  call/apply</p>
<h2 id="3-块级作用域"><a href="#3-块级作用域" class="headerlink" title="3. 块级作用域"></a>3. 块级作用域</h2><p>  ES6之后新增的  let  const</p>
<h2 id="4-奇怪的类型强制行为"><a href="#4-奇怪的类型强制行为" class="headerlink" title="4. 奇怪的类型强制行为"></a>4. 奇怪的类型强制行为</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="literal">true</span> + <span class="function"><span class="params">false</span> =&gt;</span> <span class="number">1</span> <span class="comment">// coerced to number</span></span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>] + [<span class="string">'3'</span>, <span class="string">'4'</span>] =&gt; <span class="string">'1,23,4'</span> <span class="comment">// coerced to string</span></span><br><span class="line"><span class="string">'1'</span> + <span class="number">1</span> = <span class="string">'11'</span> <span class="comment">// coerced to string</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> + <span class="number">1</span> =&gt; <span class="number">2</span></span><br><span class="line"><span class="number">1</span> + <span class="string">'1'</span> =&gt; <span class="number">11</span></span><br><span class="line"><span class="string">'1'</span> + <span class="number">1</span> =&gt; <span class="number">11</span></span><br><span class="line"><span class="string">'1'</span> + <span class="string">'1'</span> =&gt; <span class="number">11</span></span><br><span class="line"></span><br><span class="line">+<span class="string">'1'</span> + +<span class="string">'1'</span> = <span class="number">2</span> <span class="comment">// using + as prefix will convert to number</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'1'</span>) <span class="comment">// equals 1</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'1px'</span>) <span class="comment">// equals 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'1'</span>) <span class="comment">// equals 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'1px'</span>) <span class="comment">// equals NaN</span></span><br></pre></td></tr></table></figure>
<h2 id="5-防止强制类型转换"><a href="#5-防止强制类型转换" class="headerlink" title="5. 防止强制类型转换"></a>5. 防止强制类型转换</h2><p>Falsy Values: 6种<br>false<br>0<br>empty strings (‘’ or “”)<br>null<br>undefined<br>NaN</p>
<p>Everything else is truthy</p>
<h2 id="6-Not-handling-errors-properly-or-null-and-undefined"><a href="#6-Not-handling-errors-properly-or-null-and-undefined" class="headerlink" title="6. Not handling errors properly (or null and undefined)"></a>6. Not handling errors properly (or null and undefined)</h2><p>Error Handling: via Promises</p>
<p>Error Handling: via RXJS   </p>
<p>someHTTPStream.pipe(<br>                map(val =&gt; val || null),<br>                catchError(err =&gt; console.log(err))<br>               );</p>
<p>Error Handling: via try..catch</p>
<p>Null Handling: not handling null or undefined can produce an error</p>
<p>Better Null Handling: Check for null or undefined   </p>
<p>someHTTPStream.pipe( // expecting an array<br>                    map(val =&gt; {<br>                        if (val) {<br>                          return val.length;<br>                        }<br>                        return 0;<br>                    }));</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[] == ![]; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">[] == ![]</span><br><span class="line"></span><br><span class="line">!运算符的优先级大于 ==，所以实际上这里还涉及到!的运算。</span><br><span class="line">这个比较简单！会将后面的值转化为布尔值。即![]变成!<span class="built_in">Boolean</span>([]), 也就是!<span class="literal">true</span>,也就是<span class="literal">false</span>。</span><br><span class="line"></span><br><span class="line">实际上是对比 [] == <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">运用上面的顺序，<span class="literal">false</span>是布尔值，所以转化为数值<span class="built_in">Number</span>(flase), 为<span class="number">0</span>。</span><br><span class="line"></span><br><span class="line">对比[] == <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">满足第三条规则[] 是对象（数组也属于对象），<span class="number">0</span>不是对象。所以ToPrimitive([])是<span class="string">""</span></span><br><span class="line"></span><br><span class="line">对比<span class="string">""</span> == <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">满足第二条规则，<span class="string">""</span> 是字符串，<span class="number">0</span>是数值，对比<span class="built_in">Number</span>(<span class="string">""</span>) == <span class="number">0</span>, 也就是 <span class="number">0</span> == <span class="number">0</span>。</span><br><span class="line"></span><br><span class="line">所以得出 [] == ![]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">!![]       <span class="comment">// true</span></span><br><span class="line">[] == <span class="literal">true</span> <span class="comment">// false</span></span><br><span class="line">!!<span class="literal">null</span>; <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">false</span>; <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>(); <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// 'object'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// but...</span></span><br><span class="line"><span class="literal">null</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">由Javascript规范规定的，Null和<span class="built_in">Object</span>都是javascript中的数据类型。  </span><br><span class="line"></span><br><span class="line">Null数据类型只有一个值：<span class="literal">null</span>   </span><br><span class="line"></span><br><span class="line">就像<span class="literal">undefined</span>数据类型只有一个值：<span class="literal">undefined</span>   </span><br><span class="line"></span><br><span class="line">对于Null类型的值（只有<span class="literal">null</span>），规范就是定义返回<span class="string">"object"</span>这个字符串。</span><br><span class="line"></span><br><span class="line">但是本质上Null和<span class="built_in">Object</span>不是一个数据类型，<span class="literal">null</span>值并不是以<span class="built_in">Object</span>为原型创建出来的。</span><br><span class="line"></span><br><span class="line">所以<span class="literal">null</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>是<span class="literal">false</span>。</span><br><span class="line"></span><br><span class="line">但从这里也可以看到，<span class="literal">null</span>确实是javascript中用来表示空引用的一个特殊值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使得它不是<span class="keyword">instanceof</span> Ojbect，而<span class="keyword">typeof</span> <span class="literal">null</span>是“object”。在语义上也是可以理解的。</span><br><span class="line"></span><br><span class="line"><span class="literal">NaN</span> === <span class="function"><span class="params">NaN</span> =&gt;</span> <span class="literal">false</span> <span class="comment">// erm...</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span> =&gt; number <span class="comment">// so NotANumber is a number..</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/13/DOM变化的监听检测/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/DOM变化的监听检测/" itemprop="url">DOM变化的监听检测</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-13T08:48:09+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-自定义元素声明周期与DOM变化检测"><a href="#1-自定义元素声明周期与DOM变化检测" class="headerlink" title="1. 自定义元素声明周期与DOM变化检测"></a>1. 自定义元素声明周期与DOM变化检测</h2><p>使用ES6的基础创建自定义元素（Custom Elements）的时候，是可以使用其内置的生命周期，对DOM变化进行实时更新的  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLEllElement</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 指定观察的属性，这样attributeChangedCallback才会起作用</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> observedAttributes() &#123; <span class="keyword">return</span> [<span class="string">'rows'</span>]; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 下面4个方法为常用生命周期</span></span><br><span class="line">  connectedCallback() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素加入页面'</span>);</span><br><span class="line">    <span class="comment">// 执行渲染更新</span></span><br><span class="line">    <span class="keyword">this</span>._updateRendering();</span><br><span class="line">  &#125;</span><br><span class="line">  disconnectedCallback() &#123;</span><br><span class="line">    <span class="comment">// 本例子该生命周期未使用，占位示意</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素从页面移除'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  adoptedCallback() &#123;</span><br><span class="line">    <span class="comment">// 本例子该生命周期未使用，占位示意</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素转移到新页面'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  attributeChangedCallback(name, oldValue, newValue) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素属性发生变化'</span>);</span><br><span class="line">    <span class="keyword">this</span>._rows = newValue;</span><br><span class="line">    <span class="comment">// 执行渲染更新</span></span><br><span class="line">    <span class="keyword">this</span>._updateRendering();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 设置直接get/set rows属性的方法</span></span><br><span class="line">  <span class="keyword">get</span> rows() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._rows;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> rows(v) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setAttribute(<span class="string">'rows'</span>, v);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _updateRendering() &#123;</span><br><span class="line">    <span class="comment">// 根据变化的属性，改变组件的UI</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义x-ell标签元素为多行打点元素</span></span><br><span class="line">customElements.define(<span class="string">'x-ell'</span>, HTMLEllElement);</span><br><span class="line"></span><br><span class="line">&lt;x-ell rows=<span class="string">"2"</span>&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>connectedCallback<br>每次自定义元素连接到文档中的时候会触发。每次移动节点时也会发生，并且可能在元素的内容完全解析之前发生。<br>注意，元素如果和文档失去连接也可能触发connectedCallback，所以最好先使用Node.isConnected（IE不支持）确认下。  </p>
</li>
<li><p>disconnectedCallback<br>每次自定义元素和文档连接中断的时候触发。  </p>
</li>
</ul>
<ul>
<li><p>adoptedCallback<br>每次自定义元素移动到新的文档时候触发。  </p>
</li>
<li><p>attributeChangedCallback  </p>
</li>
</ul>
<p>每次自定义元素的属性增删改的时候会触发，不过需要先在在静态get observedAttributes方法中指定要注意更改的属性。<br>例如上面的案例就是在observedAttributes静态方法中返回了[‘rows’]，</p>
<p>于是当rows属性发生变化时候会触发attributeChangedCallback这个生命周期</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">x-ell &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  width: <span class="number">200</span>px;</span><br><span class="line">&#125;</span><br><span class="line">HTML代码：</span><br><span class="line">&lt;x-ell rows=<span class="string">"2"</span>&gt;对于现代浏览器，例如webkit内核的浏...组合如下。&lt;<span class="regexp">/x-ell&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;&lt;button onClick="document.querySelector('x-ell').rows = '3';"&gt;点击设置rows为3&lt;/</span>button&gt;&lt;/p&gt;</span><br><span class="line">JS代码：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLEllElement</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 指定观察的属性，这样attributeChangedCallback才会起作用</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> observedAttributes() &#123; <span class="keyword">return</span> [<span class="string">'rows'</span>]; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// constructor中首先第一件事情就是调用 super</span></span><br><span class="line">    <span class="comment">// super指代了整个prototype或者__proto__指向的对象</span></span><br><span class="line">    <span class="comment">// 这一步免不了的</span></span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建shadow元素，实际上，从本例要实现的效果讲，</span></span><br><span class="line">    <span class="comment">// 直接元素上设置也可以，就是HTML丑了点，CSS要放在外部</span></span><br><span class="line">    <span class="comment">// 且目前火狐并不支持shadow dom可以不用</span></span><br><span class="line">    <span class="keyword">var</span> shadow = <span class="keyword">this</span>.attachShadow(&#123;</span><br><span class="line">        <span class="comment">// open外部可访问（通过element.shadowRoot），closed则不能</span></span><br><span class="line">        mode: <span class="string">'open'</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 文本内容移动到shadow dom元素中</span></span><br><span class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    div.innerHTML = <span class="keyword">this</span>.innerHTML;</span><br><span class="line">    <span class="keyword">this</span>.innerHTML = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line">    shadow.appendChild(style);</span><br><span class="line">    shadow.appendChild(div);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 下面4个方法为常用生命周期</span></span><br><span class="line">  connectedCallback() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素加入页面'</span>);</span><br><span class="line">    <span class="comment">// 执行渲染更新</span></span><br><span class="line">    <span class="keyword">this</span>._updateRendering();</span><br><span class="line">  &#125;</span><br><span class="line">  disconnectedCallback() &#123;</span><br><span class="line">    <span class="comment">// 本例子该生命周期未使用，占位示意</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素从页面移除'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  adoptedCallback() &#123;</span><br><span class="line">    <span class="comment">// 本例子该生命周期未使用，占位示意</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素转移到新页面'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  attributeChangedCallback(name, oldValue, newValue) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'自定义元素属性发生变化'</span>);</span><br><span class="line">    <span class="keyword">this</span>._rows = newValue;</span><br><span class="line">    <span class="comment">// 执行渲染更新</span></span><br><span class="line">    <span class="keyword">this</span>._updateRendering();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> rows() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._rows;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> rows(v) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setAttribute(<span class="string">'rows'</span>, v);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _updateRendering() &#123;</span><br><span class="line">    <span class="comment">// 根据变化的属性，改变组件的UI</span></span><br><span class="line">    <span class="keyword">var</span> shadow = <span class="keyword">this</span>.shadowRoot;</span><br><span class="line">    <span class="keyword">var</span> childNodes = shadow.childNodes;</span><br><span class="line">    <span class="keyword">var</span> rows = <span class="keyword">this</span>._rows;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; childNodes.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (childNodes[i].nodeName === <span class="string">'STYLE'</span>) &#123;</span><br><span class="line">        childNodes[i].textContent = <span class="string">`div &#123;</span></span><br><span class="line"><span class="string">          display: -webkit-box;</span></span><br><span class="line"><span class="string">          -webkit-line-clamp: <span class="subst">$&#123;rows&#125;</span>;</span></span><br><span class="line"><span class="string">          -webkit-box-orient: vertical;</span></span><br><span class="line"><span class="string">          overflow: hidden;</span></span><br><span class="line"><span class="string">        &#125;`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义x-ell标签元素为多行打点元素</span></span><br><span class="line">customElements.define(<span class="string">'x-ell'</span>, HTMLEllElement);</span><br></pre></td></tr></table></figure>
<h2 id="2-MutationObserver与DOM变化检测"><a href="#2-MutationObserver与DOM变化检测" class="headerlink" title="2. MutationObserver与DOM变化检测"></a>2. MutationObserver与DOM变化检测</h2><p>Custom Elements自定义元素IE并不支持，如果我们想要兼容到IE11浏览器的话，<br>需要求助其他方法，则使用MutationObserver   </p>
<p>Mutation Observer是在DOM level 4中定义的新API  </p>
<p>该API执行逻辑是先观察，再执行，是一个异步的过程</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[].slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'x-ell'</span>)).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">ell</span>) </span>&#123;</span><br><span class="line">    ell.render = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rows = <span class="keyword">this</span>.rows;</span><br><span class="line">        <span class="comment">// 基于rows打点实现……</span></span><br><span class="line">        <span class="comment">// 这里代码不是本文重点，略！有兴趣可以参阅demo页面</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重新定义rows属性</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(ell, <span class="string">'rows'</span>, &#123;</span><br><span class="line">        writeable: <span class="literal">true</span>,</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.getAttribute(<span class="string">'rows'</span>);    </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">set</span>: function (rows) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setAttribute(<span class="string">'rows'</span>, rows);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打点显示</span></span><br><span class="line">    ell.render();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造观察ell元素的实例</span></span><br><span class="line">    <span class="keyword">var</span> observer = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="keyword">function</span> (<span class="params">mutationsList</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// mutationsList参数是个MutationRecord对象数组，描述了每个发生的变化</span></span><br><span class="line">        mutationsList.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">mutation</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> target = mutation.target;</span><br><span class="line">            <span class="keyword">if</span> (!target || !target.render) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 变化的类型</span></span><br><span class="line">            <span class="keyword">switch</span>(mutation.type) &#123;</span><br><span class="line">              <span class="keyword">case</span> <span class="string">'characterData'</span>:</span><br><span class="line">                <span class="comment">// 文本内容变化</span></span><br><span class="line">                target.render();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">              <span class="keyword">case</span> <span class="string">'attributes'</span>:</span><br><span class="line">                <span class="comment">// rows属性值发生了变化</span></span><br><span class="line">                target.render();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始观察ell元素并制定观察内容</span></span><br><span class="line">    observer.observe(ell, &#123;</span><br><span class="line">        attributes: <span class="literal">true</span>,</span><br><span class="line">        subtree: <span class="literal">true</span>,</span><br><span class="line">        characterData: <span class="literal">true</span>,</span><br><span class="line">        attributeFilter: [<span class="string">'rows'</span>]    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>observer.observe(node, options)  </p>
<p>node指观察的节点</p>
<p>options是一个MutationObserverInit对象，属性值、类型以及描述</p>
<p>属性    类型    描述<br>childList    Boolean    观察子节点的变动<br>attributes    Boolean    观察属性的变动<br>characterData    Boolean    观察节点内容或节点文本的变动<br>subtree    Boolean    观察所有后代节点的变动<br>attributeOldValue    Boolean    当观察到attributes变动时，是否记录变动前的属性值<br>characterDataOldValue    Boolean    当观察到characterData变动时，是否记录变动前的属性值  文本内容变化<br>attributeFilter    Array    指定需要观察的特定属性（比如[‘src’, ‘rows’]），不在此数组中的属性变化时将被忽略  </p>
<p>new MutationObserver(callback)</p>
<p>new MutationObserver(function (mutationsList, mutationObserver) {})<br>其中，mutationsList是一个MutationRecord对象数组，mutationObserver就是返回的MutationObserver实例本身，</p>
<p>可以用来清空MutationRecord或者中断观察，不过实际开发用到的不多</p>
<p>MutationRecord对象<br>mutationsList是一个MutationRecord对象数组，包含所有观察的数据  </p>
<p>我们可以使用forEach遍历mutationsList，例如：   </p>
<p>mutationsList.forEach(function(mutation) {<br>    // 此时mutation就是一个MutationRecord对象<br>});</p>
<p>属性    类型    描述<br>type    String    根据变动类型的不同，值可能为attributes，characterData或者childList<br>target    Node    发生变动的DOM节点，可能是删除节点的父元素<br>addedNodes    NodeList    被添加的节点，如果没有则是null<br>removedNodes    NodeList    被删除的节点，如果没有则是null<br>previousSibling    Node    被添加或被删除的节点的前一个兄弟节点，如果没有则是null<br>nextSibling    Node    被添加或被删除的节点的后一个兄弟节点，如果没有则是null<br>attributeName    String    发生变更的属性的名称，如果没有则是null<br>attributeNamespace    String    发生变更的属性的命名空间，在SVG元素操作时比较有用，如果没有则是null<br>oldValue    String    如果type为attributes，则返回该属性变化之前的属性值；<br>如果type为characterData，则返回该节点变化之前的文本数据；如果type为childList，则返回null  </p>
<p>MutationObserver实例的其他方法<br>var observer = new MutationObserver(callback)</p>
<p>observer.observe(node, options)</p>
<p>observer.takeRecords()</p>
<p>返回观察者回调函数检测到但尚未处理的所有匹配的DOM更改的列表，使变化队列为空<br>最常见的使用情况是在断开观察者连接之前立即获取所有挂起的变化记录，以便在停止观察者时处理任何挂起的变化</p>
<p>observer.disconnect()</p>
<p>MutationObserver性能要更高。Mutation Events是同步执行的，它的每次调用，  </p>
<p>都需要从事件队列中取出事件，执行，然后事件队列中移除，期间需要移动队列元素。  </p>
<p>如果事件触发的较为频繁的话，每一次都需要执行上面的这些步骤，那么浏览器会被拖慢。   </p>
<p>而MutationObserver所有监听操作以及相应处理都是在其他脚本执行完成之后异步执行的，  </p>
<p>并且是所以变动触发之后，将变得记录在数组中，统一进行回调的，也就是说，  </p>
<p>当你使用observer监听多个DOM变化时，并且这若干个DOM发生了变化，  </p>
<p>那么observer会将变化记录到变化数组中，等待一起都结束了，  </p>
<p>然后一次性的从变化数组中执行其对应的回调函数。</p>
<p>因此，如果你的浏览器不需要兼容IE9，IE10浏览器，推荐使用MutationObserver实现DOM变化的检测  </p>
<h2 id="3-Mutation-events与DOM变化检测"><a href="#3-Mutation-events与DOM变化检测" class="headerlink" title="3. Mutation events与DOM变化检测"></a>3. Mutation events与DOM变化检测</h2><p>如果你的项目需要兼容IE9，IE10浏览器，同时想要实现对DOM变化的检测，则可以试试Mutation events   </p>
<p>DOMAttrModified   Chrome/Safari不支持<br>DOMAttributeNameChanged<br>DOMCharacterDataModified<br>DOMElementNameChanged<br>DOMNodeInserted<br>DOMNodeInsertedIntoDocument   IE不支持<br>DOMNodeRemoved<br>DOMNodeRemovedFromDocument   IE不支持<br>DOMSubtreeModified  </p>
<p>DOMAttrModified    DOM属性发生修改<br>DOMAttributeNameChanged    DOM属性名发生变化<br>DOMCharacterDataModified    DOM文本数据发生修改<br>DOMElementNameChanged    DOM元素名发生变化<br>DOMNodeInserted    DOM节点插入<br>DOMNodeRemoved    DOM节点删除<br>DOMSubtreeModified    DOM子元素修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">element.addEventListener(<span class="string">"DOMNodeInserted"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// event.target就是依次插入的DOM节点</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">[].slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'x-ell'</span>)).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">ell</span>) </span>&#123;</span><br><span class="line">    ell.render = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rows = <span class="keyword">this</span>.rows;</span><br><span class="line">        <span class="comment">// 基于rows打点实现……</span></span><br><span class="line">        <span class="comment">// 这里代码不是本文重点，略！有兴趣可以参阅demo页面</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重新定义rows属性</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(ell, <span class="string">'rows'</span>, &#123; <span class="comment">/* ... */</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打点显示</span></span><br><span class="line">    ell.render();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始观察ell元素</span></span><br><span class="line">    ell.addEventListener(<span class="string">'DOMCharacterDataModified'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.render();    </span><br><span class="line">    &#125;);</span><br><span class="line">    ell.addEventListener(<span class="string">'DOMAttrModified'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.render();    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果我们想要检测到DOM元素尺寸变化，在过去是没有专门的API的，多借助window对象上绑定resize事件  </p>
<p>但是DOM元素的尺寸变化，有时候窗体的尺寸没有变化也会触发。还有的时候窗体的尺寸变化了，  </p>
<p>但是DOM元素的尺寸并没有变化，window对象上绑定的resize事件就有些浪费</p>
<h2 id="4-ResizeObserver"><a href="#4-ResizeObserver" class="headerlink" title="4. ResizeObserver"></a>4. ResizeObserver</h2><p>专门用来观察DOM元素的尺寸是否发生了变化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ro = <span class="keyword">new</span> ResizeObserver( <span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> entries) &#123;</span><br><span class="line">    <span class="keyword">const</span> cr = entry.contentRect;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Element:'</span>, entry.target);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Element size: <span class="subst">$&#123;cr.width&#125;</span>px x <span class="subst">$&#123;cr.height&#125;</span>px`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Element padding: <span class="subst">$&#123;cr.top&#125;</span>px ; <span class="subst">$&#123;cr.left&#125;</span>px`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察一个或多个元素</span></span><br><span class="line">ro.observe(ele);</span><br></pre></td></tr></table></figure>
<p>contentRect指的是什么？   </p>
<p>entry.contentRect返回的是一个DOMRect对象，例如的属性包括：</p>
<p>{<br>    x: 0<br>    y: 0<br>    width: 296<br>    height: 100<br>    top: 0<br>    right: 296<br>    bottom: 100<br>    left: 0<br>}</p>
<p>这表明contentRect返回是content box，也就是内容区域的尺寸  </p>
<p><img src="../images/content-box.png" alt="content box"></p>
<p>同时也从侧面说明了，如果一个元素的content box的尺寸没有发生变化，  </p>
<p>那么也是不会触发ResizeObserver观察执行的，哪怕你改变了元素的padding值，  </p>
<p>或者改变了元素的border-width边框尺寸，都不会认为是DOM元素尺寸变化了   </p>
<p>例如：</p>
<p>div {<br>    width: 200px; height:100px;<br>}  </p>
<p>则上面这个div元素设置padding:10px，是没有不会触发ResizeObserver执行的   </p>
<p>Firefox中另外两个对象<br>Firefox浏览器中，entry还包括下面两个属性值，borderBoxSize对象和contentBoxSize对象。</p>
<p>entry.borderBoxSize<br>entry.contentBoxSize<br>都返回ResizeObserverSize对象，该对象展开为：    </p>
<p> {<br>    inlineSize: 271,<br>    blockSize: 41<br>}<br>其中inlineSize表示内联元素排列方向上的尺寸，等同于CSS逻辑属性inline-size，   </p>
<p>在默认文档流下表示宽度；blockSize表示块级元素排列方向上的尺寸，block</p>
<p>等同于CSS逻辑属性block-size，在默认文档流下表示高度   </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/05/JavaScript-Error-Objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/JavaScript-Error-Objects/" itemprop="url">JavaScript Error Objects</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T16:44:11+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Error-Object"><a href="#Error-Object" class="headerlink" title="Error Object"></a>Error Object</h2><p>6种Error</p>
<p>  EvalError, RangeError, ReferenceError, TypeError, SyntaxError, URIError  </p>
<p>  These all error types are inherited from Object -&gt; Error -&gt; RangeError   </p>
<ol>
<li><p>属性</p>
<p>name  message  stack</p>
</li>
</ol>
<p>a. Generic Error</p>
<p>try{<br>    throw new Error(‘Some Error Occurred!’)<br>}<br>catch(e){<br>    console.error(‘Error Occurred. ‘ + e.name + ‘: ‘ + e.message)<br>}</p>
<p>b. Handling Specific Error Types</p>
<p>try{<br>    someFunction()<br>}<br>catch(e){<br>    if(e instanceof EvalError) {<br>    console.error(e.name + ‘: ‘ + e.message)<br>  }<br>  else if(e instanceof RangeError) {<br>    console.error(e.name + ‘: ‘ + e.message)<br>  }<br>  // … something else<br>}</p>
<p>c. Custom Error Types</p>
<p>class CustomError extends Error {<br>    constructor(description, …params) {</p>
<p>// Passing arguments (including vendor specific ones) to parent constructor<br>    super(…params)</p>
<p>// Maintains proper error stack trace(available only on JS V8 engine)<br>    if(Error.captureStackTrace){<br>      Error.captureStackTrace(this, CustomError)<br>    }</p>
<p>this.name = ‘CustomError_MyError’<br>    // Custom debugging information<br>    this.description = description<br>    this.date = new Date()<br>  }<br>}</p>
<p>try{<br>  throw new CustomError(‘Custom Error’, ‘Some Error Occurred’)<br>}<br>catch(e){<br>  console.error(e.name)           //CustomError_MyError<br>  console.error(e.description)    //Custom Error<br>  console.error(e.message)        //Some Error Occurred<br>  console.error(e.stack)          //stacktrace<br>}</p>
<ol>
<li>EvalError</li>
</ol>
<p>It indicates an error in the global function eval() has occured.</p>
<p>new EvalError([message[, fileName[, lineNumber]]])</p>
<p>try{<br>  throw new EvalError(‘Eval Error Occurred’);<br>}<br>catch(e){<br>  console.log(e instanceof EvalError); // true<br>  console.log(e.message);    // “Eval Error Occurred”<br>  console.log(e.name);       // “EvalError”<br>  console.log(e.stack);      // “EvalError: Eval Error Occurred…”<br>}</p>
<ol start="2">
<li>RangeError</li>
</ol>
<p>we pass a value that is not an allowed string, as per<br>String.prototype.normalize()<br>String.prototype.normalize(“-1”)</p>
<p>Using Array constructor to create an array of illegal length<br>// RangeError: Invalid array length<br>var arr = new Array(-1);</p>
<p>Numeric methods like</p>
<p>Number.prototype.toExponential(),</p>
<p>Number.prototype.toFixed(), or</p>
<p>Number.prototype.toPrecision() receive invalid values.</p>
<ol start="3">
<li>ReferenceError</li>
</ol>
<p>当我们尝试取消引用无效的引用或引用不存在的变量时，它指示错误。</p>
<ol start="4">
<li>SyntaxError</li>
</ol>
<ol start="5">
<li><p>TypeError</p>
</li>
<li><p>URIError<br>It occurs when global URI handling function was not being used in the correct way.</p>
</li>
</ol>
<p>encodeURIComponent() or decodeURIComponent() functions.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/05/代码中命名/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/代码中命名/" itemprop="url">代码中命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T14:42:33+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Intention-Revealing-Names"><a href="#1-Intention-Revealing-Names" class="headerlink" title="1. Intention Revealing Names"></a>1. Intention Revealing Names</h2><p>名字揭示目的  见名知意</p>
<h2 id="2-avoid-Misleading-Names"><a href="#2-avoid-Misleading-Names" class="headerlink" title="2. avoid Misleading Names"></a>2. avoid Misleading Names</h2><p>避免误导性名称</p>
<h2 id="3-Meaning-Distinctions"><a href="#3-Meaning-Distinctions" class="headerlink" title="3. Meaning Distinctions"></a>3. Meaning Distinctions</h2><p>意义的区别</p>
<h2 id="3-Pronounceable-Names"><a href="#3-Pronounceable-Names" class="headerlink" title="3. Pronounceable Names"></a>3. Pronounceable Names</h2><h2 id="4-Searchable-Names"><a href="#4-Searchable-Names" class="headerlink" title="4. Searchable Names"></a>4. Searchable Names</h2><h2 id="5-Stick-to-Plain-English-Letters-and-Digits"><a href="#5-Stick-to-Plain-English-Letters-and-Digits" class="headerlink" title="5. Stick to Plain English Letters and Digits"></a>5. Stick to Plain English Letters and Digits</h2><p>坚持使用简单的英文字母和数字</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/05/Deep-dive-into-ES6-Symbols/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/Deep-dive-into-ES6-Symbols/" itemprop="url">Deep dive into ES6 Symbols</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T11:03:34+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Symbol-类型"><a href="#Symbol-类型" class="headerlink" title="Symbol 类型"></a>Symbol 类型</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="string">'symbol'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>() == <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="comment">// False</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="string">'abacaba'</span>) == <span class="built_in">Symbol</span>(<span class="string">'abacaba'</span>)</span><br><span class="line"><span class="comment">// False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// But</span></span><br><span class="line"><span class="keyword">const</span> s = <span class="built_in">Symbol</span>(<span class="string">'sym'</span>);</span><br><span class="line">s == s</span><br><span class="line"><span class="comment">// True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sym1 = <span class="built_in">Symbol</span>.for(<span class="string">'some-key'</span>); <span class="comment">// Symbol is created in global registry</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Elsewhere in project:</span></span><br><span class="line"><span class="keyword">const</span> sym2 = <span class="built_in">Symbol</span>.for(<span class="string">'some-key'</span>); <span class="comment">// Symbol is retrieved from global registry</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// They are the same symbol:</span></span><br><span class="line"><span class="built_in">console</span>.log(sym1 === sym2); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// You can even access the key property:</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(sym1)); <span class="comment">// some-key</span></span><br></pre></td></tr></table></figure>
<p>symbol 是 基本数据类型   </p>
<p>Symbol() 是构造函数</p>
<p>提出symbol的目的就是返回一个唯一值</p>
<p>Symbnol.for(‘key’)<br>全局注册</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>.prototype.for = <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Safely getting the global registry</span></span><br><span class="line">  <span class="keyword">const</span> symbolRegistry = <span class="built_in">window</span>.symbolRegistry || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Checking if this symbol exists</span></span><br><span class="line">  <span class="keyword">if</span> (symbolRegisty.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="keyword">return</span> symbolRegistry[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// It does not, creating a new one</span></span><br><span class="line">  <span class="keyword">const</span> newSymbol = <span class="built_in">Symbol</span>();</span><br><span class="line">  symbolRegistry[key] = newSymbol;</span><br><span class="line">  <span class="built_in">window</span>.symbolRegistry = symbolRegistry;</span><br><span class="line">  <span class="keyword">return</span> newSymbol;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>symbol绝大多数时候用来作为一个对象的属性<br>相对于一般属性优点在于不被枚举 例如 for..of<br>可以方便元编程和定义内部或者隐藏的对象方法</p>
<p>元编程的特色 例如可迭代对象 Symbol.iterator<br>有些对象可以转为原始类型 例如字符串 数字<br>那是因为有一个Symbol.toPrimitive函数来完成</p>
<p>ToPrimitive 算法在执行时，会被传递一个参数 hint，<br>表示这是一个什么类型的运算（也可以叫运算的期望值），<br>根据这个 hint 参数，ToPrimitive 算法来决定内部的执行逻辑。</p>
<p>hint 参数的取值只能是下列 3 者之一：</p>
<p>  string<br>  number<br>  default</p>
<p>转换算法</p>
<p>当对象发生到基本类型值的转换时，会按照下面的逻辑调用对象上的方法：</p>
<p>1. 如果存在，调用 obj<a href="hint">Symbol.toPrimitive</a>；</p>
<p>2. 否则，如果 hint 取值是 “string”：</p>
<pre><code>无论是否存在，调用 obj.toString() 和 obj.valueOf()
</code></pre><p>3.  否则（也就是 hint 取值是 “number” 或 “default” 的情况）：</p>
<pre><code>无论是否存在，调用 obj.valueOf() 和 obj.toString()
</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> Person = &#123;</span><br><span class="line">  name: <span class="string">"John"</span>,</span><br><span class="line">  age: <span class="number">10</span>,</span><br><span class="line"></span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive](hint) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hint: <span class="subst">$&#123;hint&#125;</span>`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(Person) <span class="comment">// hint: string</span></span><br><span class="line">+Person <span class="comment">// hint: number</span></span><br><span class="line">Person + <span class="number">500</span> <span class="comment">// hint: default</span></span><br></pre></td></tr></table></figure>
<p>Symbol.toPrimitive 和 toString/valueOf 方法</p>
<p>  并不要求 Symbol.toPrimitive 和 toString/valueOf 方法必须返回 hint 参数值所暗示的类型值</p>
<p>但要注意下面两点：</p>
<p>  Symbol.toPrimitive 和 toString 方法的返回值必须是基本类型值</p>
<p>  valueOf 方法除了可以返回基本类型值，也可以返回其他类型值</p>
<p>// Iteration symbols<br>Symbol.iterator<br>Symbol.asyncIterator</p>
<p>Symbol.asyncIterator 符号指定了一个对象的默认异步迭代器。如果一个对象设置了这个属性，它就是异步可迭代对象，可用于for await…of循环。</p>
<p>// RegEx symbols<br>Symbol.match<br>Symbol.matchAll<br>Symbol.replace<br>Symbol.search<br>Symbol.split</p>
<p>// Other symbols<br>Symbol.hasInstance</p>
<p>Symbol.hasInstance用于判断某对象是否为某构造器的实例。因此你可以用它自定义 instanceof 操作符在某个类上的行为</p>
<p>Symbol.hasInstance 属性的属性<br>writable        false<br>enumerable      false<br>configurable     false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> </span>&#123;  </span><br><span class="line">  <span class="keyword">static</span> [<span class="built_in">Symbol</span>.hasInstance](instance) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(instance);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> MyArray); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>Symbol.isConcatSpreadable</p>
<p>  内置的Symbol.isConcatSpreadable符号用于配置某对象作为Array.prototype.concat()方法的参数时是否展开其数组元素。</p>
<p>Symbol.unscopables</p>
<p>  Symbol.unscopables 指用于指定对象值，其对象自身和继承的从关联对象的 with 环境绑定中排除的属性名称</p>
<p>Symbol.species</p>
<p>  Symbol.species 是个函数值属性，其被构造函数用以创建派生对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array1</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> [Symbol.species]() &#123; <span class="keyword">return</span> <span class="built_in">Array</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Symbol.toPrimitive</p>
<p>  是作为对象的函数值属性存在的，当一个对象转换为对应的原始值时，会调用此函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive](hint) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hint == <span class="string">'number'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Symbol.toStringTag</p>
<p>  Symbol.toStringTag 是一个内置 symbol，它通常作为对象的属性键使用，对应的属性值应该为字符串类型<br>  这个字符串用来表示该对象的自定义类型标签，通常只有内置的 Object.prototype.toString() 方法会去<br>  读取这个标签并把它包含在自己的返回值里  </p>
<p>  Object.prototype.toString.call(‘foo’);     // “[object String]”<br>  Object.prototype.toString.call([1, 2]);    // “[object Array]”<br>  Object.prototype.toString.call(3);         // “[object Number]”<br>  Object.prototype.toString.call(true);      // “[object Boolean]”<br>  Object.prototype.toString.call(undefined); // “[object Undefined]”<br>  Object.prototype.toString.call(null);      // “[object Null]”<br>  Object.prototype.toString.call(new Map());       // “[object Map]”<br>  Object.prototype.toString.call(function* () {}); // “[object GeneratorFunction]”<br>  Object.prototype.toString.call(Promise.resolve()); // “[object Promise]”</p>
<p>自己创建的类不会有这份特殊待遇，toString() 找不到 toStringTag 属性时只好返回默认的 Object 标签：</p>
<p>class ValidatorClass {}</p>
<p>Object.prototype.toString.call(new ValidatorClass()); // “[object Object]”  </p>
<p>加上 toStringTag 属性，你的类也会有自定义的类型标签了：</p>
<p>class ValidatorClass {<br>  get <a href>Symbol.toStringTag</a> {<br>    return “Validator”;<br>  }<br>}</p>
<p>Object.prototype.toString.call(new ValidatorClass()); // “[object Validator]”</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/05/A-List-of-Interesting-Operators-in-JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/A-List-of-Interesting-Operators-in-JavaScript/" itemprop="url">A List of Interesting Operators in JavaScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T08:25:37+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Exclamation-Mark-—-Logical-NOT"><a href="#1-Exclamation-Mark-—-Logical-NOT" class="headerlink" title="1. Exclamation Mark (!)— Logical NOT"></a>1. Exclamation Mark (!)— Logical NOT</h2><p>If the value is true or truthy, then !value is false or falsy, and vice versa</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">!<span class="number">1</span> <span class="comment">// false</span></span><br><span class="line">!<span class="number">-1</span> <span class="comment">// false</span></span><br><span class="line">!<span class="number">0</span> <span class="comment">// true</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// false</span></span><br><span class="line">!&#123;&#125; <span class="comment">// false</span></span><br><span class="line">!<span class="string">''</span> <span class="comment">// true</span></span><br><span class="line">!<span class="literal">NaN</span> <span class="comment">// true</span></span><br><span class="line">!<span class="literal">null</span> <span class="comment">// true</span></span><br><span class="line">!<span class="literal">undefined</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="2-Double-Exclamation-Mark-—-Double-Logical-NOT"><a href="#2-Double-Exclamation-Mark-—-Double-Logical-NOT" class="headerlink" title="2. Double Exclamation Mark (!!) — Double Logical NOT"></a>2. Double Exclamation Mark (!!) — Double Logical NOT</h2><p> It’s the same as putting an extra exclamation mark(!) to a !value that is already converted to a Boolean value.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">!!<span class="literal">true</span> <span class="comment">// true</span></span><br><span class="line">!!&#123;&#125; <span class="comment">// true</span></span><br><span class="line">!!(<span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>)) <span class="comment">// true</span></span><br><span class="line">!!<span class="literal">false</span> <span class="comment">// false</span></span><br><span class="line">!!<span class="string">''</span> <span class="comment">// false</span></span><br><span class="line">!!<span class="built_in">Boolean</span>(<span class="literal">false</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Double-Asterisks-—-Exponentiation"><a href="#3-Double-Asterisks-—-Exponentiation" class="headerlink" title="3. Double Asterisks (**) — Exponentiation"></a>3. Double Asterisks (**) — Exponentiation</h2><ul>
<li>same as Math.pow(x, y), which is equal to x^y</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span> ** <span class="number">3</span> === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">3</span>) <span class="comment">// 8</span></span><br><span class="line">-(<span class="number">2</span> ** <span class="number">2</span>) === -<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">2</span>) <span class="comment">// -4</span></span><br><span class="line"><span class="number">10</span> ** <span class="number">-1</span> === <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="number">-1</span>) <span class="comment">// 0.1</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Tilde-—-Bitwise-NOT"><a href="#4-Tilde-—-Bitwise-NOT" class="headerlink" title="4. Tilde(~) — Bitwise NOT"></a>4. Tilde(~) — Bitwise NOT</h2><p>The formula is actually dead simple.</p>
<p>If an integer is K, ~K becomes -(K + 1)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">~<span class="number">9</span> =&gt; -<span class="function">(<span class="params"><span class="number">9</span> + <span class="number">1</span></span>) =&gt;</span> <span class="number">-10</span></span><br><span class="line">~<span class="number">-10</span> =&gt; -<span class="function">(<span class="params"><span class="number">-10</span> + <span class="number">1</span></span>) =&gt;</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
<h2 id="5-Double-Tilde-—-Math-floor-amp-Math-trunc"><a href="#5-Double-Tilde-—-Math-floor-amp-Math-trunc" class="headerlink" title="5. Double Tilde(~~) — Math.floor &amp; Math.trunc"></a>5. Double Tilde(~~) — Math.floor &amp; Math.trunc</h2><p>正数 效果  等于  Math.floor</p>
<p>负数 效果  等于  Math.trunc</p>
<p>~~对于整数 速度 快于 Math.floor</p>
<h2 id="6-Double-Period-With-toString"><a href="#6-Double-Period-With-toString" class="headerlink" title="6. Double Period(..) With toString"></a>6. Double Period(..) With toString</h2><p>快速将十进制数 转为 二进制 八进制 十六进制数<br>一般用Number.toString(2,8,16)</p>
<p>本质是将一个数字型字面量转为Number对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">5.</span>.toString(<span class="number">2</span>) <span class="comment">// '101'</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="number">5</span>).toString(<span class="number">2</span>) === <span class="number">5.</span>.toString(<span class="number">2</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="IIFE-With-Operators"><a href="#IIFE-With-Operators" class="headerlink" title="IIFE With Operators"></a>IIFE With Operators</h2><p>Immediately Invoked Function Expression 自执行函数表达式</p>
<p>通用</p>
<p>(function() {<br>  // do your work<br>})();</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">-<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">~~<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">!!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do your work</span></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<ul>
<li>工作原理</li>
</ul>
<p>any operators that run and evaluate an operand can run functions coming after<br>since functions also have to be run<br>and evaluated for their operators, such as ! or ~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/03/05/add链式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/add链式/" itemprop="url">add链式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T08:08:02+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="add-1-2-3"><a href="#add-1-2-3" class="headerlink" title="add(1)(2)(3)"></a>add(1)(2)(3)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = x;</span><br><span class="line">  <span class="keyword">let</span> tmp = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">    sum += y;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tmp.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>`</code>javascript<br>function add(x) {<br>  let tmp = function (y) {<br>    return add(x + y);<br>  }</p>
<p>  tmp.toString = function () {<br>    return x<br>  }</p>
<p>  return tmp;<br>}<br><code>`</code>9</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">killsos.ql@gmail.com</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">109</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">killsos.ql@gmail.com</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
