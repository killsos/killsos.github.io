<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="keywords" content="javascript å‰ç«¯">
<meta property="og:type" content="website">
<meta property="og:title" content="killsos">
<meta property="og:url" content="http://jsonload.com/index.html">
<meta property="og:site_name" content="killsos">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="killsos">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jsonload.com/">





  <title>killsos</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">killsos</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">äººæƒ…ä¼¼æ°´åˆ†é«˜ä¸‹ ä¸–äº‹å¦‚äº‘ä»»å·èˆ’</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/14/console-log/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/14/console-log/" itemprop="url">console.log </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-14T15:27:40+08:00">
                2020-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="console-debug"><a href="#console-debug" class="headerlink" title="console.debug"></a>console.debug</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥å¸¦å¤šä¸ªå­—ç¬¦ä¸²å‚æ•°</span><br></pre></td></tr></table></figure>
<h2 id="Add-Styles-to-the-console-output"><a href="#Add-Styles-to-the-console-output" class="headerlink" title="Add Styles to the console output"></a>Add Styles to the console output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥é€šè¿‡%cæŒ‡ä»¤åœ¨å­—ç¬¦ä¸²ä¿¡æ¯ä¸­è¾“å‡ºå¸¦æœ‰æ ·å¼çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">æ ·å¼å°†ç”¨ä»¥%cä¹‹åå†…å®¹ä¸Š</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚</span><br><span class="line"></span><br><span class="line">console.log(</span><br><span class="line">  &quot;This is a %cstyled ğŸ¨ %cconsole log %cin JavaScript&quot;,</span><br><span class="line">  &quot;color: orange; font-style: bold;font-size:18px;padding: 2px&quot;,</span><br><span class="line">  &quot;color: green; font-style: bold;font-size:18px;padding: 2px&quot;,</span><br><span class="line">  &quot;color: red; font-style: bold;font-size:28px; background-color: cyan;padding: 2px&quot;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">background and its longhand equivalents.</span><br><span class="line">border and its longhand equivalents</span><br><span class="line">border-radius</span><br><span class="line">color</span><br><span class="line">font and its longhand equivalents</span><br><span class="line">line-height</span><br><span class="line">margin</span><br><span class="line">padding</span><br></pre></td></tr></table></figure>
<h2 id="dir"><a href="#dir" class="headerlink" title="dir( )"></a>dir( )</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Display objects and HTML/XML elements in an interactive format using dir and dirxml</span><br><span class="line">å±•ç¤ºå¯¹è±¡æˆ–è€… html xmlå…ƒç´ </span><br><span class="line"></span><br><span class="line">console.dirxml(document);</span><br></pre></td></tr></table></figure>
<h2 id="Display-data-in-tabular-form-using-table"><a href="#Display-data-in-tabular-form-using-table" class="headerlink" title="Display data in tabular form using table"></a>Display data in tabular form using table</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const developers = [&quot;Kyle ğŸ˜ƒ&quot;, &quot;John ğŸ˜„&quot;, &quot;Sally ğŸ™‚&quot;];</span><br><span class="line"></span><br><span class="line">console.table(developers);</span><br></pre></td></tr></table></figure>
<h2 id="count"><a href="#count" class="headerlink" title="count( )"></a>count( )</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function counter() &#123;</span><br><span class="line">  console.count(&quot;Counterâ²ï¸&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">counter();</span><br><span class="line"></span><br><span class="line">counter();</span><br><span class="line"></span><br><span class="line">console.countReset(&quot;Counterâ²ï¸&quot;);</span><br><span class="line"></span><br><span class="line">counter();</span><br><span class="line"></span><br><span class="line">console.count(&quot;Other Counterâ²ï¸&quot;);</span><br><span class="line"></span><br><span class="line">console.countReset();</span><br></pre></td></tr></table></figure>
<h2 id="Group-different-logs-using-group-groupCollapsed-and-groupEnd"><a href="#Group-different-logs-using-group-groupCollapsed-and-groupEnd" class="headerlink" title="Group different logs using group, groupCollapsed, and groupEnd"></a>Group different logs using group, groupCollapsed, and groupEnd</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">group( )</span><br><span class="line"></span><br><span class="line">groupEnd( )</span><br><span class="line"></span><br><span class="line">groupCollapsed( )</span><br><span class="line"></span><br><span class="line">console.group(&quot;Outer group&quot;);</span><br><span class="line">for (let i = 0; i &lt; 50; i++) &#123;</span><br><span class="line">  console.log(&quot;Outer logs ğŸ“‘&quot;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&quot;Hello ğŸ‘‹&quot;);</span><br><span class="line">console.group(&quot;Inner group&quot;);</span><br><span class="line">for (let i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">  console.log(&quot;Inner logs ğŸ“„&quot;);</span><br><span class="line">&#125;</span><br><span class="line">console.groupCollapsed(&quot;Child group&quot;);</span><br><span class="line">console.log(&quot;Child log here ğŸ§’&quot;);</span><br><span class="line">console.groupEnd(&quot;Child group&quot;);</span><br><span class="line">console.groupEnd(&quot;Inner group&quot;);</span><br><span class="line">console.groupEnd(&quot;Outer group&quot;);</span><br><span class="line">console.group(&quot;Other group&quot;);</span><br><span class="line">console.log(&quot;Other log here ğŸ“&quot;);</span><br><span class="line">console.groupEnd(&quot;Other group&quot;);</span><br></pre></td></tr></table></figure>
<h2 id="assert"><a href="#assert" class="headerlink" title="assert()"></a>assert()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.assert()</span><br></pre></td></tr></table></figure>
<h2 id="Calculate-time-taken"><a href="#Calculate-time-taken" class="headerlink" title="Calculate time taken"></a>Calculate time taken</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">time() // start timer to track time</span><br><span class="line"></span><br><span class="line">timeLog() // è¾“å‡ºä¸€ä¸ªå½“å‰æ—¶é—´å€¼</span><br><span class="line"></span><br><span class="line">timeEnd() // end time</span><br></pre></td></tr></table></figure>
<h2 id="trace"><a href="#trace" class="headerlink" title="trace()"></a>trace()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">trace() outputs the stack trace to the console</span><br><span class="line"></span><br><span class="line">function outer() &#123;</span><br><span class="line">  function inner() &#123;</span><br><span class="line">    console.trace(&quot;Hello&quot;, &#123; name: &quot;Kyle&quot;, age: 24 &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  inner();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">outer();</span><br></pre></td></tr></table></figure>
<h2 id="Clear-the-console"><a href="#Clear-the-console" class="headerlink" title="Clear the console"></a>Clear the console</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">console.clear();</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/14/js-double-bangs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/14/js-double-bangs/" itemprop="url">js double bangs</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-14T15:12:55+08:00">
                2020-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="js-falsy"><a href="#js-falsy" class="headerlink" title="js falsy"></a>js falsy</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot; ç©ºå­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line">-0</span><br><span class="line">0n</span><br><span class="line"></span><br><span class="line">false</span><br><span class="line"></span><br><span class="line">null</span><br><span class="line">undefined</span><br><span class="line">NaN</span><br><span class="line"></span><br><span class="line">8</span><br></pre></td></tr></table></figure>
<h2 id="js-truthy"><a href="#js-truthy" class="headerlink" title="js truthy"></a>js truthy</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">except for false, 0, -0, 0n, &quot;&quot;, null, undefined, and NaN)</span><br><span class="line"></span><br><span class="line">[] &#123;&#125; æ˜¯ true</span><br></pre></td></tr></table></figure>
<h2 id="logical-NOT-operator"><a href="#logical-NOT-operator" class="headerlink" title="logical NOT operator"></a>logical NOT operator</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! not operator</span><br></pre></td></tr></table></figure>
<h2 id="Convert-Logical-â€œnotâ€-to-a-Double-Bang"><a href="#Convert-Logical-â€œnotâ€-to-a-Double-Bang" class="headerlink" title="Convert Logical â€œnotâ€ to a Double Bang"></a>Convert Logical â€œnotâ€ to a Double Bang</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">finds the boolean value associated with an entity</span><br><span class="line">Returns that value â€œreversedâ€, or â€œnegatedâ€, to be more specific</span><br><span class="line"></span><br><span class="line">æŸ¥æ‰¾ä¸å®ä½“å…³è”çš„å¸ƒå°”å€¼</span><br><span class="line"></span><br><span class="line">è¿”å›â€œåè½¬â€æˆ–â€œå¦å®šâ€çš„å€¼ï¼Œæ›´å…·ä½“åœ°è¯´</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/14/FastClickåŸç†è§£æ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/14/FastClickåŸç†è§£æ/" itemprop="url">FastClickåŸç†è§£æ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-14T13:54:07+08:00">
                2020-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FastClickåŸç†è§£æ</span><br><span class="line"></span><br><span class="line">åœ¨ç§»åŠ¨ç«¯å¼€å‘è¿‡ç¨‹ä¸­ä¼šé‡åˆ°</span><br><span class="line">  æ‰‹åŠ¨ç‚¹å‡» ä¸ çœŸæ­£è§¦å‘clickäº‹ä»¶ ä¼šå­˜åœ¨300mså»¶è¿Ÿ</span><br><span class="line">  ç‚¹å‡»ç©¿é€é—®é¢˜ ç‚¹å‡»è¡Œä¸ºä¼šç©¿é€å…ƒç´ è§¦å‘ éçˆ¶å­å…³ç³»å…ƒç´ çš„äº‹ä»¶</span><br><span class="line"></span><br><span class="line">  å»¶è¿Ÿçš„å­˜åœ¨æ—¶å› ä¸ºæµè§ˆå™¨æƒ³çŸ¥é“ä½ æ˜¯å¦åœ¨è¿›è¡ŒåŒå‡»æ“ä½œ</span><br><span class="line"></span><br><span class="line">  ç‚¹å‡»ç©¿é€æ˜¯å› ä¸º300mså»¶è¿Ÿçš„å‰¯ä½œç”¨</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ä¸šåŠ¡ä»£ç </span></span><br><span class="line"><span class="keyword">let</span> $test = <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>);</span><br><span class="line">$test.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1 click'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// FastClickåŸç†å®ç°</span></span><br><span class="line"><span class="keyword">var</span> targetElement = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'touchstart'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è®°å½•ç‚¹å‡»å…ƒç´ </span></span><br><span class="line">  targetElement = event.target;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'touchend'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é˜»æ­¢é»˜è®¤äº‹ä»¶ å±è”½ä¹‹åä¹‹åclickäº‹ä»¶</span></span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="comment">// è®°å½•ç‚¹å‡»å…ƒç´ </span></span><br><span class="line">  targetElement = event.target;</span><br><span class="line">  <span class="keyword">var</span> touch = event.changedTouches[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// åˆæˆclickäº‹ä»¶ å¹¶æ·»åŠ å¯è·Ÿè¸ªå±æ€§ forwardedTouchEvent</span></span><br><span class="line">  <span class="keyword">var</span> clickEvent = <span class="built_in">document</span>.createEvent(<span class="string">'MouseEvent'</span>);</span><br><span class="line">  clickEvent.initMouseEvent(<span class="string">'click'</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="built_in">window</span>, <span class="number">1</span> touch.screenX, touch.screenY, touch.clientX, touch.clientY,</span><br><span class="line">  <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  clickEvent.forwardedTouchEvent = <span class="literal">true</span>; <span class="comment">// è‡ªå®šä¹‰çš„</span></span><br><span class="line"></span><br><span class="line">  targetElement.dispatch(clickEvent)  </span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸç†</span></span><br><span class="line"><span class="comment">// åœ¨bodyä¸Šç»‘å®štouchstartå’Œtouchend</span></span><br><span class="line"><span class="comment">// å…¶ä¸­ touchstartç”¨äºè®°å½•å½“å‰å…ƒç´ çš„targetElement</span></span><br><span class="line"><span class="comment">// touchendç”¨äº</span></span><br><span class="line"><span class="comment">// é˜»æ­¢é»˜è®¤äº‹ä»¶ å±è”½ä¹‹åclickäº‹ä»¶</span></span><br><span class="line"><span class="comment">// åˆå¹¶clickäº‹ä»¶ å¹¶æ·»åŠ å¯è·Ÿè¸ªå±æ€§forwardedTouchEvent</span></span><br><span class="line"><span class="comment">// åœ¨tatargetElementä¸Šè§¦å‘clickäº‹ä»¶</span></span><br><span class="line"><span class="comment">// targetElementä¸Šè§¦å‘clickäº‹ä»¶</span></span><br></pre></td></tr></table></figure>
<h2 id="ç‚¹å‡»ç©¿é€"><a href="#ç‚¹å‡»ç©¿é€" class="headerlink" title="ç‚¹å‡»ç©¿é€"></a>ç‚¹å‡»ç©¿é€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚ é¡µé¢ä¸Šæœ‰Aå’ŒBå…ƒç´  Båœ¨Aå…ƒç´ ä¸Šé¢ ä¾‹å¦‚å®šä½z-index  </span><br><span class="line">åœ¨Bä¸Šæ³¨å†Œtouchstartå›è°ƒ è¯¥å›è°ƒç”¨äºéšè—Bå…ƒç´ </span><br><span class="line">å½“æˆ‘ä»¬ç‚¹å‡»Bå…ƒç´  Bå…ƒç´ è¢«éšè— éšåAå…ƒç´ çš„clickäº‹ä»¶ä¹Ÿè¢«è§¦å‘</span><br><span class="line">ç§»åŠ¨ç«¯ä¸Š äº‹ä»¶æ‰§è¡Œé¡ºåºæ˜¯ touchstart &gt; touchend &gt; click</span><br><span class="line">è€Œclickäº‹ä»¶æœ‰300mså»¶è¿Ÿ ä¹Ÿå°±æ˜¯touchendè§¦å‘ 300msåæµè§ˆå™¨</span><br><span class="line">å†è§¦å‘clickäº‹ä»¶ è€Œæ­¤æ—¶Bå…ƒç´ ä¸è§äº† æ‰€ä»¥è¯¥äº‹ä»¶è¢«æ´¾å‘åˆ°Aå…ƒç´ </span><br><span class="line">ä¸Š è¿™å°±æ˜¯ç©¿é€</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–è§£å†³æ–¹æ¡ˆ"><a href="#å…¶ä»–è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–è§£å†³æ–¹æ¡ˆ"></a>å…¶ä»–è§£å†³æ–¹æ¡ˆ</h2><h3 id="ç¦ç”¨ç¼©æ”¾"><a href="#ç¦ç”¨ç¼©æ”¾" class="headerlink" title="ç¦ç”¨ç¼©æ”¾"></a>ç¦ç”¨ç¼©æ”¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å½“HTMLæ–‡æ¡£å¤´éƒ¨åŒ…å«å¦‚ä¸‹metaæ ‡ç­¾æ—¶ï¼š</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;user-scalable=no&apos;&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1&quot;&gt;</span><br><span class="line"></span><br><span class="line">è®©é¡µé¢æ˜¯ä¸å¯ç¼©æ”¾ åŒå‡»ç¼©æ”¾åŠŸèƒ½å°±å¤±æ•ˆäº† æ­¤æ—¶æµè§ˆå™¨å¯ä»¥ç¦ç”¨é»˜è®¤çš„åŒå‡»ç¼©æ”¾è¡Œä¸º</span><br><span class="line">å¹¶ä¸”å»æ‰300msçš„ç‚¹å‡»å»¶è¿Ÿ</span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ ä¸èƒ½å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/14/JavaScript-ES2020-Features-With-Simple-Examples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/14/JavaScript-ES2020-Features-With-Simple-Examples/" itemprop="url">JavaScript ES2020 Features With Simple Examples </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-14T09:49:46+08:00">
                2020-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="String-protype-matchAll"><a href="#String-protype-matchAll" class="headerlink" title="String.protype.matchAll"></a>String.protype.matchAll</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ‰€æœ‰ç»“æœçš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">const</span> string = <span class="string">'Magic hex number: DEASBEEF CAFE'</span></span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/\b\p&#123;ASCII_HEX_Dight&#125;+\b/gu</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for (const match of string.match(regex)) &#123;</span></span><br><span class="line"><span class="comment">//   console.log(match)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> match <span class="keyword">of</span> string.matchAll(regex)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(match)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Dynamic-import"><a href="#Dynamic-import" class="headerlink" title="Dynamic import"></a>Dynamic import</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleSpecifier = <span class="string">'./utils.js'</span></span><br><span class="line"><span class="keyword">import</span>(moduleSpecifier).then(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">module</span>.method1()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> moduleSpecifier = <span class="string">'./utils.js'</span></span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">module</span> = <span class="keyword">await</span>  <span class="keyword">import</span>(moduleSpecifier)</span><br><span class="line">  <span class="built_in">module</span>.method1()</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id="BigInt-â€”-Arbitrary-Precision-Integers"><a href="#BigInt-â€”-Arbitrary-Precision-Integers" class="headerlink" title="BigInt â€” Arbitrary Precision Integers"></a>BigInt â€” Arbitrary Precision Integers</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é«˜ç²¾åº¦æ•´æ•° æ–°çš„ä¸€ç§æ•°æ®ç±»å‹ 253ä½</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">10</span>n; <span class="comment">// 'binint'</span></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>n === BigInt(<span class="number">10</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>n == <span class="number">10</span>; <span class="comment">// ture</span></span><br><span class="line"></span><br><span class="line"><span class="number">20</span>n / <span class="number">10</span>n ; <span class="comment">// 2n</span></span><br><span class="line"></span><br><span class="line"><span class="number">20</span>n / <span class="number">2</span> <span class="comment">// TypeError mix BigInt and other types</span></span><br></pre></td></tr></table></figure>
<h2 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled"></a>Promise.allSettled</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.allSettled([p1, p2, p3]).then(<span class="function"><span class="params">responses</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(responses)</span><br><span class="line">  <span class="comment">// [</span></span><br><span class="line">  <span class="comment">//  &#123;status: 'fulfilled', value: ''&#125;</span></span><br><span class="line">  <span class="comment">//  &#123;status: 'rejected', reason: ''&#125;</span></span><br><span class="line">  <span class="comment">// ]</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Standardized-globalThis-object"><a href="#Standardized-globalThis-object" class="headerlink" title="Standardized globalThis object"></a>Standardized globalThis object</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The global this was not standardized before ES10</span></span><br><span class="line"><span class="keyword">var</span> getGlobal = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> self === <span class="string">'undefined'</span>) <span class="keyword">return</span> self;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">'undefined'</span>) <span class="keyword">return</span> <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> global === <span class="string">'undefined'</span>) <span class="keyword">return</span> global;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'unable to locate global object'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="For-in-Mechanics"><a href="#For-in-Mechanics" class="headerlink" title="For-in Mechanics"></a>For-in Mechanics</h2><h2 id="Nullish-Coalescing-Operator"><a href="#Nullish-Coalescing-Operator" class="headerlink" title="Nullish Coalescing Operator"></a>Nullish Coalescing Operator</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åªå¯¹ null undefined  æœ‰æ•ˆ</span><br><span class="line"></span><br><span class="line">ç¬¦å· \?\?</span><br></pre></td></tr></table></figure>
<h2 id="Optional-Chaining"><a href="#Optional-Chaining" class="headerlink" title="Optional Chaining"></a>Optional Chaining</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ?. å‰æœ‰åæ‰¾</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/13/Understanding-WeakSets-in-JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/13/Understanding-WeakSets-in-JavaScript/" itemprop="url">Understanding WeakSets in JavaScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-13T18:02:17+08:00">
                2020-08-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸èƒ½é€šè¿‡ç´¢å¼•è®¿é—®</span><br><span class="line"></span><br><span class="line">åƒåœ¾æ”¶é›†åœ¨å¤–è¡Œäººçš„æœ¯è¯­æ˜¯ç®€å•åœ°æ”¶é›†å’Œé‡Šæ”¾å†…å­˜å·²ç»åˆ†é…ç»™å¯¹è±¡ï¼Œä½†ç›®å‰æ²¡æœ‰åœ¨æˆ‘ä»¬çš„ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†ä½¿ç”¨ã€‚</span><br><span class="line">åœ¨åƒCè¿™æ ·çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¼€å‘äººå‘˜å¿…é¡»ä½¿ç”¨malloc()å’Œdealloc()å‡½æ•°æ¥å¤„ç†å†…å­˜åˆ†é…å’Œé‡Šæ”¾</span><br><span class="line"></span><br><span class="line">åŸå§‹æ•°æ®ç±»å‹ä¸å…è®¸ä½œä¸ºå€¼å­˜å‚¨åœ¨WeakSetä¸­ã€‚ å¦‚æœä½¿ç”¨åŸå§‹å€¼ï¼Œåˆ™å°†å¼•å‘é”™è¯¯TypeErrorï¼šå¼±é›†ä¸­ä½¿ç”¨çš„æ— æ•ˆå€¼ã€‚ å°½ç®¡æ‚¨å¯èƒ½å·²ç»ä»WeakMapsç†Ÿæ‚‰äº†æ­¤æ¦‚å¿µï¼Œä½†è¿™é‡Œç¡®å®ç¡®å®æœ‰å¾®å°çš„åŒºåˆ«ã€‚ åœ¨WeakMapä¸­ï¼Œé”®åº”å§‹ç»ˆæ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯å€¼ã€‚ ä½†æ˜¯åœ¨WeakSetä¸­ï¼Œå€¼æœ¬èº«åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ è¿™æ˜¯å› ä¸ºå¯†é’¥ç­‰äºæœ¬æ–‡å¼€å¤´æ‰€è¿°çš„WeakSetsä¸­çš„å€¼ã€‚ æœ€ç»ˆï¼Œè¿™æ˜¯åœ¨ä¸€å¤©ç»“æŸæ—¶åº”ç”¨çš„åŒä¸€æ¦‚å¿µã€‚</span><br><span class="line"></span><br><span class="line">ä¹‹æ‰€ä»¥åªå…è®¸å¯¹è±¡ä½œä¸ºå€¼ï¼ˆé”®ï¼‰ï¼Œæ˜¯å› ä¸ºåŸå§‹å€¼æ°¸è¿œä¸ä¼šè¢«åƒåœ¾æ”¶é›†ã€‚ å¦‚æœç¡®å®å…è®¸ä½¿ç”¨åŸå§‹å€¼ä½œä¸ºé”®ï¼Œé‚£ä¹ˆæ‚¨å°†æ ¹æœ¬æ— æ³•ä»WeakSetsä¸­å—ç›Šã€‚</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/13/7-JavaScript-Utility-Functions-to-Improve-Your-Efficiency/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/13/7-JavaScript-Utility-Functions-to-Improve-Your-Efficiency/" itemprop="url">7 JavaScript Utility Functions to Improve Your Efficiency </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-13T17:20:05+08:00">
                2020-08-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Detect-Browser"><a href="#Detect-Browser" class="headerlink" title="Detect Browser"></a>Detect Browser</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">navigator.useragent</span><br><span class="line">navigator.useragent.toLower()</span><br></pre></td></tr></table></figure>
<h2 id="Detect-Function-Type"><a href="#Detect-Function-Type" class="headerlink" title="Detect Function Type"></a>Detect Function Type</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">native function</span><br><span class="line"></span><br><span class="line">functions by users</span><br><span class="line"></span><br><span class="line">.toString() // function fname() &#123;[native code]&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Convert-hyp-hens-to-camelCase"><a href="#Convert-hyp-hens-to-camelCase" class="headerlink" title="Convert hyp-hens to camelCase"></a>Convert hyp-hens to camelCase</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å°†è¿å­—ç¬¦è½¬ä¸ºå°é©¼å³°</span><br><span class="line">Converting hello-world style strings to helloWorld</span><br><span class="line"></span><br><span class="line">function camelize(string) &#123;</span><br><span class="line">  const camelizeRegex = /-(\w)/g;</span><br><span class="line">  return string.replace(camelizeRegex, (_, c) =&gt; c.toUpperCase() : &apos;&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Delete-HTML-tag-in-string"><a href="#Delete-HTML-tag-in-string" class="headerlink" title="Delete HTML tag in string"></a>Delete HTML tag in string</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const stripHTMLTags = str =&gt; str.replace(/&lt;[^&gt;]*&gt;/g, &apos;&apos;);</span><br></pre></td></tr></table></figure>
<h2 id="Reverse-a-String"><a href="#Reverse-a-String" class="headerlink" title="Reverse a String"></a>Reverse a String</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.split(&apos;&apos;).reverse().join(&apos;&apos;);</span><br></pre></td></tr></table></figure>
<h2 id="Format-a-number-to-a-string-with-comma"><a href="#Format-a-number-to-a-string-with-comma" class="headerlink" title="Format a number to a string with comma"></a>Format a number to a string with comma</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">111111 =&gt; 111,111</span><br><span class="line">123456789 =&gt; 123,456,789</span><br><span class="line"></span><br><span class="line">function numberToStringWithComma(number) &#123;</span><br><span class="line">  let str = String(number);</span><br><span class="line">  let s = &apos;&apos;;</span><br><span class="line">  let count = 0;</span><br><span class="line">  for (let i = str.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">    s = str[i] + s;</span><br><span class="line">    count++;</span><br><span class="line">    if (count % 3 === 0 &amp;&amp; i !== 0 ) &#123;</span><br><span class="line">      s = &apos;,&apos; + s;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Convert-byte-units-to-reasonable-units"><a href="#Convert-byte-units-to-reasonable-units" class="headerlink" title="Convert byte units to reasonable units"></a>Convert byte units to reasonable units</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bytesToSize(123456)</span><br><span class="line"></span><br><span class="line">npm i byte-size</span><br><span class="line">const byteSize = require(&apos;byte-size&apos;)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/08/12/ç°ä»£æµè§ˆå™¨æœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/12/ç°ä»£æµè§ˆå™¨æœºåˆ¶/" itemprop="url">ç°ä»£æµè§ˆå™¨æœºåˆ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-12T14:26:15+08:00">
                2020-08-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Gpu"><a href="#Gpu" class="headerlink" title="Gpu"></a>Gpu</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å›¾å½¢å¤„ç†å™¨ï¼ˆGraphics Processing Unitï¼‰ï¼Œä¹Ÿå°±æ˜¯ GPU</span><br><span class="line"></span><br><span class="line">åœ¨è¿›ç¨‹å’Œçº¿ç¨‹ä¸Šæ‰§è¡Œç¨‹åº</span><br><span class="line"></span><br><span class="line">è¿›ç¨‹å¯ä»¥æè¿°ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‰§è¡Œç¨‹åºã€‚çº¿ç¨‹åˆ™æ˜¯è¿›ç¨‹å†…éƒ¨ç”¨æ¥æ‰§è¡ŒæŸä¸ªéƒ¨åˆ†çš„ç¨‹åºã€‚</span><br><span class="line"></span><br><span class="line">å½“ä½ å¯åŠ¨ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œä¸€ä¸ªè¿›ç¨‹å°±è¢«åˆ›å»ºäº†ã€‚ç¨‹åºå¯èƒ½ä¼šåˆ›å»ºä¸€äº›çº¿ç¨‹å¸®åŠ©å®ƒå®ŒæˆæŸäº›å·¥ä½œï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚</span><br><span class="line"></span><br><span class="line">æ“ä½œç³»ç»Ÿä¼šåˆ’åˆ†å‡ºä¸€éƒ¨åˆ†å†…å­˜ç»™è¿™ä¸ªè¿›ç¨‹ï¼Œå½“å‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çŠ¶æ€éƒ½å°†ä¿å­˜åœ¨è¿™ä¸ªç§æœ‰çš„å†…å­˜ç©ºé—´ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">å½“ä½ å…³é—­åº”ç”¨æ—¶ï¼Œè¿›ç¨‹ä¹Ÿå°±è‡ªåŠ¨è’¸å‘æ‰äº†ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å…ˆå‰è¢«å ç”¨çš„å†…å­˜ç©ºé—´é‡Šæ”¾æ‰</span><br><span class="line"></span><br><span class="line">è¿›ç¨‹å¯ä»¥è®©æ“ä½œç³»ç»Ÿå†å¦èµ·ä¸€ä¸ªè¿›ç¨‹å»å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæ–°çš„è¿›ç¨‹åˆå°†å æ®ä¸€å—å†…å­˜ç©ºé—´</span><br><span class="line"></span><br><span class="line">å½“ä¸¤ä¸ªè¿›ç¨‹éœ€è¦é€šä¿¡æ—¶ï¼Œå®ƒä»¬å¯ä»¥ç”¨ä¸€ä¸ªå«åšè¿›ç¨‹é—´é€šè®¯ï¼ˆInter Process Communicationï¼‰çš„åŠæ³•è§£å†³</span><br><span class="line"></span><br><span class="line">è®¸å¤šåº”ç”¨ç¨‹åºéƒ½è¢«è®¾è®¡æˆä»¥è¿™ç§æ–¹å¼è¿›è¡Œå·¥ä½œï¼Œæ‰€ä»¥å½“å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æŒ‚æ‰æ—¶ï¼Œå®ƒå¯ä»¥åœ¨å…¶ä»–è¿›ç¨‹ä»ç„¶è¿è¡Œçš„æ—¶å€™ç›´æ¥é‡å¯ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="æµè§ˆå™¨æ¶æ„"><a href="#æµè§ˆå™¨æ¶æ„" class="headerlink" title="æµè§ˆå™¨æ¶æ„"></a>æµè§ˆå™¨æ¶æ„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æµè§ˆå™¨æ˜¯å¦‚ä½•é€šè¿‡è¿›ç¨‹å’Œçº¿ç¨‹å»ºç«‹èµ·æ¥çš„å‘¢ï¼Ÿ</span><br><span class="line">æœ‰æ—¶ä¼šæ˜¯ä¸€ä¸ªè¿›ç¨‹å’Œå¤šä¸ªä¸åŒçš„çº¿ç¨‹ï¼Œæˆ–æ˜¯å¤šä¸ªè¿›ç¨‹å’Œå°‘æ•°çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">é¦–å…ˆæ˜¯æµè§ˆå™¨çš„è‡ªèº«è¿›ç¨‹ï¼Œå®ƒè´Ÿè´£ä¸å…¶ä»–è¿›ç¨‹åä½œï¼Œä¸»è¦è´Ÿè´£æµè§ˆå™¨åº”ç”¨çš„ä¸åŒéƒ¨åˆ†ï¼Œ</span><br><span class="line">å¦‚ç½‘ç»œã€å†…å­˜ç­‰ã€‚</span><br><span class="line"></span><br><span class="line">è‡³äºæ¸²æŸ“è¿›ç¨‹ï¼Œæµè§ˆå™¨ä¼šä¸ºæ¯ä¸ªçª—å£åˆ†é…ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚åœ¨æœ€è¿‘çš„ä¸€æ¬¡æ›´æ–°ä¸­ï¼Œ</span><br><span class="line">å¦‚æœå¤Ÿç”¨çš„è¯ï¼ŒChrome å¹²è„†ç»™æ¯ä¸ªçª—å£åˆ†é…äº†ä¸€ä¸ªè¿›ç¨‹</span><br><span class="line">è€Œç°åœ¨ï¼ŒChrome åœ¨è‡´åŠ›äºç»™æ¯ä¸ªç«™ç‚¹ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼ŒåŒ…æ‹¬ iframe</span><br><span class="line"></span><br><span class="line">åŸºæœ¬è¿›ç¨‹:</span><br><span class="line"></span><br><span class="line">1. æµè§ˆå™¨è¿›ç¨‹  è´Ÿè´£ chrome çš„æµè§ˆå™¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¼èˆªæ ã€ä¹¦ç­¾ã€åé€€ã€å‰è¿›æŒ‰é’®ã€‚å½“ç„¶ä¹Ÿè´Ÿè´£ä¸€äº›è™½ç„¶çœ‹ä¸åˆ°ä½†ä¹Ÿå¾ˆé‡è¦çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å’Œæ–‡ä»¶è®¿é—®ã€‚</span><br><span class="line"></span><br><span class="line">2. æ¸²æŸ“è¿›ç¨‹ è´Ÿè´£ çª—å£å†…çš„ç½‘ç«™å°†å¦‚ä½•å‘ˆç° æ¯ä¸€ä¸ªtabå°±æ˜¯ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">3. æ’ä»¶è¿›ç¨‹ è´Ÿè´£ æ§åˆ¶ç€ç½‘ç«™å¯èƒ½ç”¨åˆ°çš„æ‰€æœ‰æ’ä»¶ï¼Œæ¯”å¦‚ flash</span><br><span class="line"></span><br><span class="line">4. GPUè¿›ç¨‹ è´Ÿè´£ å¤„ç† GPU ä»»åŠ¡ï¼Œä¸å…¶ä»–è¿›ç¨‹éš”ç¦»ã€‚å®ƒè¢«åˆ’åˆ†ä¸ºä¸åŒçš„è¿›ç¨‹å› ä¸º GPU ä¼šå¤„ç†æ¥è‡ªå¤šä¸ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚å¹¶å°†å…¶ç»˜åˆ¶åœ¨åŒä¸€ä¸ªå¹³é¢ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">å°†æµè§ˆå™¨çš„å·¥ä½œæ‹†åˆ†æˆä¸åŒçš„è¿›ç¨‹è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å®‰å…¨ã€‚ç”±äºæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ç§é™åˆ¶è¿›ç¨‹â€œæƒé™â€çš„æ–¹æ³•ï¼Œå› æ­¤æµè§ˆå™¨å¯ä»¥å°†ç‰¹å®šçš„åŠŸèƒ½å’Œè¿›ç¨‹æœ‰æ•ˆåœ°éš”ç¦»å¼€ã€‚æ¯”å¦‚ï¼ŒChrome ä¼šé™åˆ¶ç”¨æ¥å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ¸²æŸ“è¿›ç¨‹å»ç›´æ¥è®¿é—®æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰å„è‡ªçš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤å®ƒä»¬å¸¸ä¼šå„è‡ªæ‹¥æœ‰ä¸€ä»½åŸºç¡€åŠŸèƒ½çš„æ‹·è´ã€‚æ­£å› ä¸ºå®ƒä»¬ä¹‹é—´ä¸åƒåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹é‚£æ ·èƒ½å¤Ÿå…±äº«èµ„æºï¼Œæ‰€ä»¥å°±éœ€è¦æ›´å¤šçš„å†…å­˜å ç”¨ã€‚ä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒChrome å¯¹å…¶è‡ªèº«å¯è°ƒç”¨çš„è¿›ç¨‹åœ¨æ•°é‡ä¸Šåšäº†é™åˆ¶ã€‚å…·ä½“çš„é™åˆ¶å¤§å°åœ¨ä¸åŒæ€§èƒ½çš„æœºå™¨ä¸Šå„ä¸ç›¸åŒï¼Œå”¯ä¸€ç¡®å®šçš„æ˜¯ï¼Œå½“è¾¾åˆ°äº†è¿™ä¸ªä¸Šé™åï¼ŒChrome ä¼šå°†åŒç«™ç‚¹çš„å¤šä¸ªçª—å£äº¤ç»™åŒä¸€ä¸ªè¿›ç¨‹æ¥ç®¡ç†ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="Chrome-æœåŠ¡åŒ–-â€”â€”-èŠ‚çœæ›´å¤šçš„å†…å­˜"><a href="#Chrome-æœåŠ¡åŒ–-â€”â€”-èŠ‚çœæ›´å¤šçš„å†…å­˜" class="headerlink" title="Chrome æœåŠ¡åŒ– â€”â€” èŠ‚çœæ›´å¤šçš„å†…å­˜"></a>Chrome æœåŠ¡åŒ– â€”â€” èŠ‚çœæ›´å¤šçš„å†…å­˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå™¨è¿›ç¨‹ä¹Ÿåº”ç”¨äº†ç›¸åŒçš„æ–¹æ¡ˆã€‚Chrome æ­£åœ¨è¿›è¡Œæ¶æ„å±‚é¢çš„æ•´æ”¹ï¼Œç›®çš„æ˜¯å°†æµè§ˆå™¨çš„å„éƒ¨åˆ†åŠŸèƒ½å˜æˆç‹¬ç«‹çš„æœåŠ¡ï¼Œ</span><br><span class="line">è¿™æ ·å°±èƒ½è½»æ¾åœ°å°†å…¶æ‹†åˆ†ä¸ºä¸åŒçš„è¿›ç¨‹ï¼Œä¹Ÿèƒ½æ›´åŠ çµæ´»åœ°äº’ç›¸ç»„åˆã€‚</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼Œå½“ Chrome åœ¨è¾ƒé«˜æ€§èƒ½çš„è®¾å¤‡ä¸Šè¿è¡Œæ—¶ï¼Œå®ƒä¼šå°†æ¯ä¸ªæœåŠ¡åˆ†é…è‡³ä¸åŒçš„è¿›ç¨‹ï¼Œä»¥æ­¤æ¥è·å¾—æ›´å¼ºçš„è¿è¡Œæ—¶ç¨³å®šæ€§å’Œå¥å£®æ€§ï¼›</span><br><span class="line">åä¹‹ï¼Œå¦‚æœ Chrome è¿è¡Œåœ¨ä¸€å°èµ„æºå—é™çš„è®¾å¤‡ä¸Šæ—¶ï¼ŒChrome ä¼šå°†æœåŠ¡æ•´åˆåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œ</span><br><span class="line">ä»¥æ­¤æ¥èŠ‚çœå†…å­˜çš„å ç”¨ã€‚åƒè¿™ç§é€šè¿‡æ•´åˆè¿›ç¨‹èµ„æºä»¥æ­¤æ¥èŠ‚çœå†…å­˜çš„æ‰‹æ®µï¼Œå·²ç»è¢«ç”¨äº Android ä¸Šäº†ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="ç«™ç‚¹éš”ç¦»ï¼ˆSite-Isolationï¼‰"><a href="#ç«™ç‚¹éš”ç¦»ï¼ˆSite-Isolationï¼‰" class="headerlink" title="ç«™ç‚¹éš”ç¦»ï¼ˆSite Isolationï¼‰"></a>ç«™ç‚¹éš”ç¦»ï¼ˆSite Isolationï¼‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç«™ç‚¹éš”ç¦»æ˜¯ Chrome åœ¨å…¶ 67 æ¡Œé¢ç‰ˆä¸Šæ–°å¢çš„ç‰¹æ€§ï¼ŒåŸºæœ¬åŸåˆ™æ˜¯ä¸åŒçš„ç«™ç‚¹å„è‡ªè¿è¡Œåœ¨è‡ªå·±çš„æ²™ç®±ç¯å¢ƒä¸­ï¼Œç‹¬äº«è¿›ç¨‹ï¼Œå¹¶ä¸”ä¸å…è®¸é€šä¿¡ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡æ¯ä¸ªçª—å£ä¸€ä¸ªè¿›ç¨‹çš„æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæµè§ˆå™¨å…è®¸è·¨ç«™ç‚¹çš„ iframe ç‹¬ç«‹è¿›ç¨‹å…±äº«ä¸åŒç«™ç‚¹ä¹‹é—´çš„å†…å­˜ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">æ—©å…ˆåœ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ï¼ˆçª—å£ï¼‰åŒæ—¶è¿è¡Œ a.com å’Œ b.com çœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºæœ‰åŒæºç­–ç•¥ï¼Œ</span><br><span class="line"></span><br><span class="line">ç¡®ä¿ä¸€ä¸ªç«™ç‚¹æœªç»åŒæ„å°±æ— æ³•è®¿é—®å…¶ä»–ç«™ç‚¹çš„æ•°æ®ã€‚ç»•è¿‡åŒæºç­–ç•¥åŸºæœ¬ä¸Šæˆä¸ºäº†æ‰€æœ‰å®‰å…¨æ”»å‡»çš„æŒ‡å¯¼æ–¹é’ˆã€‚</span><br><span class="line"></span><br><span class="line">è€Œè¿›ç¨‹é—´çš„ç›¸äº’éš”ç¦»æ˜¯å°†ç«™ç‚¹åˆ†å¼€çš„æœ€ä½³é€”å¾„</span><br><span class="line"></span><br><span class="line">ç«™ç‚¹éš”ç¦»å·²ç»é»˜è®¤ä¸ºç”¨æˆ·å¼€å¯äº†ã€‚äº‹å®ä¸Šï¼Œç«™ç‚¹éš”ç¦»å¹¶ä¸ä»…ä»…æ˜¯ä¸ºç«™ç‚¹åˆ†é…ä¸åŒçš„æ¸²æŸ“è¿›ç¨‹è¿™ä¹ˆç®€å•ï¼Œ</span><br><span class="line"></span><br><span class="line">å®ƒä»æ ¹æœ¬ä¸Šæ”¹å˜äº† iframe ä¹‹é—´çš„é€šä¿¡æ–¹å¼ã€‚æ‰“å¼€è¿è¡Œæœ‰ä¸åŒç«™ç‚¹ iframe çš„å¼€å‘è€…å·¥å…·ï¼Œ</span><br><span class="line"></span><br><span class="line">æ„å‘³ç€æµè§ˆå™¨å¿…é¡»åšå¾ˆå¤šçœ‹ä¸åˆ°çš„å¹•åå·¥ä½œï¼Œæ‰èƒ½è®©è¿™ä¸€åˆ‡çœ‹èµ·æ¥å’Œä»¥å‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ</span><br><span class="line"></span><br><span class="line">å³ä½¿æ˜¯ç®€ç®€å•å•çš„ ctrl+F åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ä¹Ÿæ„å‘³ç€åœ¨ä¸åŒçš„æ¸²æŸ“è¿›ç¨‹ä¸­æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">ç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« ä»‹ç»æµè§ˆå™¨çš„ç«™ç‚¹éš”ç¦»ç­–ç•¥ï¼Œå½“ä½ çœ‹å®Œé‚£äº›ä¹‹åå°±ä¼šæ„è¯†åˆ°ï¼Œ</span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆç«™ç‚¹éš”ç¦»å€¼å¾— Chrome å›¢é˜Ÿä¸ºå…¶å‘å¸ƒä¸€ä¸ªç‹¬ç«‹ç‰ˆæœ¬äº†ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€æ¬¡ç®€å•çš„å¯¼èˆª"><a href="#ä¸€æ¬¡ç®€å•çš„å¯¼èˆª" class="headerlink" title="ä¸€æ¬¡ç®€å•çš„å¯¼èˆª"></a>ä¸€æ¬¡ç®€å•çš„å¯¼èˆª</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">Step 1ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥</span><br><span class="line">å½“ç”¨æˆ·å¼€å§‹åœ¨åœ°å€æ è¾“å…¥æ—¶ï¼Œ</span><br><span class="line"></span><br><span class="line">UI çº¿ç¨‹ è§£æè¾“å…¥å­—ç¬¦ä¸²æ˜¯url ã€‚å› ä¸º Chrome çš„åœ°å€æ åŒæ—¶è¿˜æ˜¯ä¸ªæœç´¢æ¡†ï¼Œæ‰€ä»¥ UI çº¿ç¨‹éœ€è¦è§£æç”¨æˆ·çš„è¾“å…¥ï¼Œ</span><br><span class="line">æ‰èƒ½å†³å®šè¯¥ç›´æ¥è®¿é—®ç½‘å€è¿˜æ˜¯æŠŠç”¨æˆ·çš„è¾“å…¥ä¸¢ç»™æœç´¢å¼•æ“å¤„ç†</span><br><span class="line"></span><br><span class="line">Step 2ï¼šå¼€å§‹å¯¼èˆª</span><br><span class="line"></span><br><span class="line">å½“ç”¨æˆ·æŒ‰ä¸‹å›è½¦é”®åï¼ŒUI çº¿ç¨‹è¦æ±‚ç½‘ç»œçº¿ç¨‹å»è·å–ç½‘ç«™çš„å†…å®¹ã€‚çª—å£çš„ Tab ä¸Šä¼šå¼€å§‹è½¬èŠèŠ±ï¼Œ</span><br><span class="line">ç½‘ç»œçº¿ç¨‹ä¼šé‡‡ç”¨ä¸€ç³»åˆ—çš„åè®®å’Œæ“ä½œï¼ˆæ¯”å¦‚ DNSï¼‰æŸ¥è¯¢å¿…è¦çš„ä¿¡æ¯å¹¶ä¸ºè¯·æ±‚å»ºç«‹è¿æ¥</span><br><span class="line">ç½‘ç»œçº¿ç¨‹å¯èƒ½ä¼šæ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è®°ç€é‡å®šå‘æŒ‡ä»¤çš„å¤´éƒ¨æ¯”å¦‚ HTTP 301ï¼Œ</span><br><span class="line">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œçº¿ç¨‹ä¼šæŠŠè¿™ä»¶äº‹æƒ…å‘Šè¯‰ UI çº¿ç¨‹ï¼Œä¹‹ååˆ™ä¼šå‘èµ·ä¸€æ¬¡æŒ‡å‘é‡å®šå‘åœ°å€çš„æ–°çš„ç½‘ç»œè¯·æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">Step 3ï¼šè¯»å–å“åº”</span><br><span class="line">å½“å“åº”çš„æ•°æ®å¼€å§‹ä¼ é€åˆ°æµè§ˆå™¨æ—¶ï¼Œç½‘ç»œçº¿ç¨‹ä¼šåœ¨å¿…è¦çš„æƒ…å†µä¸‹æ£€æŸ¥ä¸€äº›æ¥è‡ªå“åº”çš„å­—æ®µã€‚</span><br><span class="line">å“åº”æ•°æ®çš„ Content-Type å­—æ®µä¼šè¡¨ç¤ºå½“å‰è¿”å›çš„æ˜¯å“ªç§ç±»å‹çš„æ•°æ®ï¼Œä½†å®ƒä¹Ÿä¸å®Œå…¨é è°±ï¼Œ</span><br><span class="line">ç»å¸¸ä¼šå‡ºç°ä¸¢å¤±æˆ–è€…å¹²è„†ä¸å‡†ç¡®çš„æƒ…å†µï¼Œä½†ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼ŒMIME å—…æ¢[3]ä¼šå®Œæˆç¼ºå¤±çš„å·¥ä½œã€‚</span><br><span class="line">æ­£å¦‚æºç çš„æ³¨é‡Šä¸­å†™é“ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥è¢«è§£é‡Šä¸º hack çš„æ–¹æ¡ˆï¼Œ</span><br><span class="line">å¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥å»é˜…è¯»è¿™äº›æ³¨é‡Šï¼Œè¿™æ ·å°±èƒ½äº†è§£ä¸åŒçš„æµè§ˆå™¨æ˜¯å¦‚ä½•å°†å®é™…çš„æ•°æ®ä¸ Content-Type åŒ¹é…äº†ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœå“åº”æ•°æ®æ˜¯ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„ä¸€æ­¥ä¼šæ˜¯æŠŠæ•°æ®ä¼ é€’ç»™æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹ï¼›</span><br><span class="line">ä½†å¦‚æœæ•°æ®æ˜¯ zip å‹ç¼©æ–‡ä»¶æˆ–å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œæ„å‘³ç€è¿™å°†è¢«å®šä½æˆä¸€æ¬¡ä¸‹è½½åŠ¨ä½œï¼Œ</span><br><span class="line">äºæ˜¯æµè§ˆå™¨ä¼šå°†æ•°æ®è½¬äº¤ç»™ä¸‹è½½ç®¡ç†å™¨å»å¤„ç†</span><br><span class="line"></span><br><span class="line">é€šå¸¸è¿™ä¸€æ­¥ä¹Ÿæ˜¯å®‰å…¨æ£€æµ‹[5]å‘ç”Ÿçš„æ—¶å€™ï¼šå¦‚æœåŸŸåæˆ–å“åº”æ•°æ®å’Œå·²çŸ¥çš„æ¶æ„ç½‘ç«™åŒ¹é…æ—¶ï¼Œ</span><br><span class="line">ç½‘ç»œè¿›ç¨‹ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šï¼Œå¹¶å±•ç°ä¸€ä¸ªå‘Šè­¦çš„é¡µé¢ã€‚å¦å¤–ï¼ŒCORB[6] æ£€æµ‹ä¹Ÿä¼šå¼€å§‹å·¥ä½œï¼Œ</span><br><span class="line">ç¡®ä¿é‚£äº›æ¥è‡ªæ•æ„Ÿç«™ç‚¹çš„è·¨ç«™å“åº”æ•°æ®ä¸ä¼šè¿›å…¥åˆ°æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹ä¸­</span><br><span class="line"></span><br><span class="line">Step 4ï¼šæ¸²æŸ“è¿›ç¨‹</span><br><span class="line">ç½‘ç»œçº¿ç¨‹ä»¥è·å–äº†å…¨éƒ¨çš„æ•°æ®ï¼Œå¹¶å®Œæˆäº†æ‰€æœ‰éœ€è¦çš„æ£€æŸ¥ï¼Œæ­¤åˆ»å®ƒè‡ªä¿¡çš„å‘Šè¯‰ UI çº¿ç¨‹</span><br><span class="line">æ¥ç€ï¼ŒUI çº¿ç¨‹ä¼šå”¤èµ·ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹å»æ¸²æŸ“é¡µé¢</span><br><span class="line">ç”±äºç½‘ç»œæƒ…å†µçš„ä¸å¯æ§ï¼Œä¸€ä¸ªè¯·æ±‚å¯èƒ½ä¼šèŠ±ä¸Šå¥½å‡ ç™¾æ¯«ç§’æ‰èƒ½æŠŠå“åº”æ•°æ®æ‹¿å›æ¥ï¼Œ</span><br><span class="line">æ‰€ä»¥è¿™é‡Œæµè§ˆå™¨é»˜è®¤å¼€å¯äº†ç”¨æ¥åŠ é€Ÿè¿™ä¸€è¿‡ç¨‹çš„ä¼˜åŒ–ã€‚</span><br><span class="line">åœ¨ Step 2 ä¸­ï¼Œå½“ UI çº¿ç¨‹å°†éœ€è¦è¯·æ±‚çš„ url å‘Šè¯‰ç½‘ç»œçº¿ç¨‹æ—¶ï¼Œå…¶å®å®ƒæœ¬èº«å·²ç»çŸ¥é“è¦å¯¼èˆªåˆ°å“ªä¸ªç½‘ç«™äº†ï¼Œ</span><br><span class="line">äºæ˜¯ UI çº¿ç¨‹åœ¨æŠŠ url ä¼ é€’ç»™ç½‘ç»œçº¿ç¨‹çš„åŒæ—¶ï¼Œä¼šå°è¯•å¯åŠ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚</span><br><span class="line">å¦‚æœä¸€åˆ‡éƒ½æŒ‰ç…§é¢„æœŸæ­£å¸¸è¿›è¡Œçš„è¯ï¼Œå½“ç½‘ç»œçº¿ç¨‹æ‹¿åˆ°æ•°æ®æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹å°±å·²ç»å¤„äºå¾…å‘½çŠ¶æ€äº†ã€‚</span><br><span class="line">ä¹Ÿä¼šæœ‰ä¾‹å¤–çš„æƒ…å†µï¼šæ¯”å¦‚å¯¼èˆªé‡å®šå‘åˆ°ä¸€ä¸ªå¦å¤–çš„ç«™ç‚¹ï¼Œ</span><br><span class="line">é‚£ä¹ˆé¢„å…ˆå¯åŠ¨å¥½çš„æ¸²æŸ“è¿›ç¨‹å°†ä¸ä¼šè¢«ä½¿ç”¨ï¼Œè¿™å¯¼è‡´ UI çº¿ç¨‹éœ€è¦é‡æ–°å¯åŠ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">Step 5ï¼šè§¦å‘å¯¼èˆª</span><br><span class="line">æµè§ˆå™¨è¿›ç¨‹é€šè¿‡ IPC å‘ŠçŸ¥æ¸²æŸ“è¿›ç¨‹å¯ä»¥å‡ºå‘æœ¬æ¬¡å¯¼èˆªäº†ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ•°æ®æµä¹Ÿå°†ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œè¿™æ ·åè€…å°±èƒ½ç»§ç»­æ¥æ”¶ HTML æ•°æ®ã€‚</span><br><span class="line">ä¸€æ—¦æµè§ˆå™¨æ”¶åˆ°äº†æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„å¯¼èˆªå¯åŠ¨ä¿¡å·ï¼Œè¿™æ¬¡å¯¼èˆªä¹Ÿå°±å®Œæˆäº†ï¼Œä¸‹ä¸€æ­¥è¿›å…¥æ–‡æ¡£çš„åŠ è½½é˜¶æ®µã€‚</span><br><span class="line"></span><br><span class="line">åˆ°è¿™ä¼šå„¿ï¼Œæµè§ˆå™¨çš„åœ°å€æ æ›´æ–°ï¼Œå®‰å…¨æŒ‡ç¤ºç¬¦å’Œç«™ç‚¹çš„è®¾ç½® UI ä¼šå°†æ–°é¡µé¢çš„ä¿¡æ¯å‘ˆç°å‡ºæ¥ã€‚</span><br><span class="line">å½“å‰çª—å£çš„ session å°†ä¼šæ›´æ–°ï¼Œåˆšå¯¼èˆªåˆ°çš„é¡µé¢ä¼šè¢«åé€€/å‰è¿›æŒ‰é’®è®°å½•åˆ°çª—å£çš„é¡µé¢å†å²ä¸­</span><br><span class="line">ä¸ºäº†ä¾¿äºåœ¨å…³é—­çª—å£æ—¶æ¢å¤é¡µé¢ï¼Œå†å²çš„ä¼šè¯è®°å½•ä¼šä¿å­˜åœ¨æœ¬åœ°çš„ç£ç›˜ä¸Š</span><br><span class="line"></span><br><span class="line">Extra Stepï¼šåˆå§‹åŠ è½½å®Œæˆ</span><br><span class="line">å½“å¯¼èˆªè§¦å‘åï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šæŒç»­æ¥æ”¶èµ„æºå¹¶æ¸²æŸ“é¡µé¢ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®ºè¿™ä¸€æ­¥çš„æ›´å¤šç»†èŠ‚ã€‚</span><br><span class="line">å½“æ¸²æŸ“è¿›ç¨‹â€œå®Œæˆâ€æ¸²æŸ“åï¼Œå®ƒä¼šé€šè¿‡ IPC å‘ŠçŸ¥æµè§ˆå™¨è¿›ç¨‹ï¼ˆé¡µé¢çš„ onload äº‹ä»¶å‡å·²æ‰§è¡Œå®Œæ¯•åï¼‰ï¼ŒUI çº¿ç¨‹ä¹Ÿå°±ä¸å†åœ¨ tab ä¸Šè½¬èŠèŠ±äº†ã€‚</span><br><span class="line"></span><br><span class="line">ä¸Šé¢çš„â€œå®Œæˆâ€ä¸¤ä¸ªå­—ï¼Œä¹‹æ‰€ä»¥æ‰“äº†åŒå¼•å·ï¼Œå› ä¸ºåœ¨å®é™…åœºæ™¯ä¸­ï¼Œ</span><br><span class="line">å®ƒé€šå¸¸å¹¶ä¸çœŸæ­£æ„å‘³ç€å®Œæˆï¼Œå› ä¸ºå®¢æˆ·ç«¯çš„ JavaScript å¯èƒ½åœ¨æ­¤æ—¶æŒç»­åœ°åŠ è½½èµ„æºå¹¶æ¸²æŸ“æ–°çš„è§†å›¾</span><br><span class="line"></span><br><span class="line">å¯¼èˆªåˆ°å¦ä¸€ä¸ªç½‘ç«™</span><br><span class="line">ä¸€æ¬¡ç®€å•çš„å¯¼èˆªæˆªè‡³ç›®å‰å·²ç»å®Œæˆäº†ã€‚å‡å¦‚è¿™æ—¶ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªä¸åŒçš„ url ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ä¹Ÿæ²¡å•¥ï¼Œ</span><br><span class="line">æµè§ˆå™¨è¿›ç¨‹ä¼šæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤å¯¼èˆªåˆ°è¿™ä¸ªç½‘ç«™ã€‚ä½†åœ¨è¿™ä¸€åˆ‡å¼€å§‹ä¹‹å‰ï¼Œ</span><br><span class="line">æµè§ˆå™¨ä¼šæ£€æŸ¥å½“å‰å·²ç»æ¸²æŸ“å¥½äº†çš„ç½‘ç«™æ˜¯å¦éœ€è¦åœ¨ç½‘é¡µå¸è½½ä¹‹å‰æä¸€ç‚¹äº‹æƒ…ï¼Œè¿™å°±æ˜¯ beforeunload äº‹ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨ beforeunload äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·å³å°†è·³è½¬è‡³å…¶ä»–é¡µé¢æˆ–è€…å…³é—­ Tab çš„æ—¶å€™å‘èµ·ä¸€ä¸ªâ€œç¡®è®¤ç¦»å¼€å½“å‰é¡µé¢ï¼Ÿâ€çš„äºŒæ¬¡ç¡®è®¤ã€‚</span><br><span class="line">Tab ä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”±æ¸²æŸ“è¿›ç¨‹æ§åˆ¶ç€ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬å¼€å‘è€…ç¼–å†™çš„ JavaScriptï¼Œ</span><br><span class="line">ä»¥å½“ä¸€ä¸ªæ–°çš„å¯¼èˆªè¯·æ±‚å³å°†åˆ°æ¥æ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šå¯¹å½“å‰çš„æ¸²æŸ“è¿›ç¨‹åšæœ€åçš„æ£€æŸ¥ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬åº”å½“å°½é‡é¿å…åœ¨ beforeunload ä¸­æ·»åŠ æ€»ä¼šæ‰§è¡Œçš„äº‹ä»¶ä»£ç ï¼Œè¿™ä¼šé€ æˆæ›´å¤šçš„äº¤äº’å»¶æ—¶ï¼Œæ¯•ç«Ÿå®ƒä»¬æ€»ä¼šåœ¨æ–°çš„å¯¼èˆªå¼€å§‹ä¹‹å‰æ‰§è¡Œã€‚åªåœ¨éœ€è¦çš„æ—¶å€™æ·»åŠ è¿™äº›ä»£ç ï¼Œæ¯”å¦‚æé†’ç”¨æˆ·å¦‚æœè¿›å…¥æ–°çš„é¡µé¢é‚£ä¹ˆå½“å‰é¡µé¢çš„æ•°æ®ä¼šä¸¢å¤±ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœå¯¼èˆªæ˜¯åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¢«åˆ›å»ºçš„ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†é¡µé¢ä¸Šçš„æŸä¸€é“¾æ¥æˆ–è€…åœ¨ JavaScript è¿è¡Œäº† window.location.href = &apos;https://abc.cn&apos; ï¼‰ï¼Œåˆ™å½“å‰çš„æ¸²æŸ“è¿›ç¨‹ä¼šé¦–å…ˆæ£€æŸ¥æ˜¯ beforeunload ä¸­æ˜¯å¦æœ‰ä¸œè¥¿éœ€è¦æ‰§è¡Œã€‚ä¹‹åï¼Œå®ƒä¼šç»å†ä¸æµè§ˆå™¨è¿›ç¨‹ç›´æ¥å‘èµ·å¯¼èˆªåä¸€æ ·çš„å¯¼èˆªè¿‡ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">å½“æ–°çš„å¯¼èˆªå°†å‘å¾€ä¸å½“å‰é¡µé¢ä¸åŒçš„ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¸²æŸ“è¿›ç¨‹å»å¤„ç†è¿™äº›æ–°å·¥ä½œï¼Œæ—§çš„æ¸²æŸ“è¿›ç¨‹åˆ™åˆ™ç”¨æ¥åœ¨å‰©ä½™çš„æ—¶é—´é‡Œå¤„ç†è¯¸å¦‚ unload çš„é¡µé¢äº‹ä»¶ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šçš„è¯ï¼Œå¯ä»¥çœ‹çœ‹é¡µé¢ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ[7]å’Œé¡µé¢ç”Ÿå‘½å‘¨æœŸ API[8]è¿™ä¸¤ç¯‡æ–‡ç« ã€‚</span><br><span class="line"></span><br><span class="line">## å¦‚æœæœ‰ Service Worker...</span><br><span class="line">Service Worker[9] çš„å¼•å…¥ä¼šå¯¹é¡µé¢çš„å¯¼èˆªæµç¨‹å¸¦æ¥ä¸€äº›æ”¹å˜ã€‚Service Worker æ˜¯ä¸€ç§å¯ä»¥åœ¨åº”ç”¨ä»£ç ä¸­ç¼–å†™ç½‘ç»œä»£ç†çš„æ–¹æ³•ï¼›å¢å¼ºäº†å¼€å‘è€…å¯¹äºæœ¬åœ°ç¼“å­˜ä»¥åŠä½•æ—¶å‘èµ·ç½‘ç»œè¯·æ±‚çš„æ§åˆ¶ã€‚å¦‚æœ Service Worker æå‰è®¾ç½®äº†ä»æœ¬åœ°ç¼“å­˜ä¸­è¯»å–æŸä¸€é¡µé¢çš„æ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸éœ€è¦å‘èµ·ç½‘ç»œè¯·æ±‚äº†ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œå³ä½¿ Service Worker æä¾›äº†å¬èµ·æ¥å¾ˆé«˜ç«¯çš„åŠŸèƒ½ï¼Œä½†å®ƒå®è´¨ä¸Šä¹Ÿæ˜¯è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„ JavaScript ä»£ç ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå½“ç”¨æˆ·å‘èµ·ä¸€æ¬¡å¯¼èˆªæ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹æ˜¯å¦‚ä½•çŸ¥é“ç›®æ ‡ç«™ç‚¹å­˜åœ¨ä¸€ä¸ª Service Worker çš„å‘¢ï¼Ÿ</span><br><span class="line"></span><br><span class="line">å¯¼èˆªé¢„åŠ è½½</span><br><span class="line"></span><br><span class="line">ç›¸ä¿¡ä½ å¯ä»¥å‘ç°ï¼Œå¦‚æœ Service Worker æœ€ç»ˆå†³å®šä»ç½‘ç»œä¸­è¯·æ±‚æ•°æ®ï¼Œé‚£ä¹ˆä¹‹å‰åœ¨æµè§ˆå™¨è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´æ‰€å‘ç”Ÿçš„é€šä¿¡éƒ½å°†æˆä¸ºå¯¼è‡´å“åº”å»¶æ—¶çš„ç½ªé­ç¥¸é¦–ã€‚</span><br><span class="line"></span><br><span class="line">å¯¼èˆªé¢„åŠ è½½[11]å°±æ˜¯ç”¨æ¥åŠ é€Ÿè¿™ä¸€è¿›ç¨‹çš„æœºåˆ¶ï¼šä¸ Service Worker å¹¶è¡Œå¯åŠ¨å»åŠ è½½èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">å®ƒå°†ä¸ºè¿™äº›è¯·æ±‚è®¾ç½®ä¸€ä¸ª Headerï¼Œç”±æœåŠ¡ç«¯æ¥å†³å®šä¸ºè¿™äº›è¯·æ±‚å‘é€ä¸åŒçš„å†…å®¹ï¼›æ¯”å¦‚ï¼Œä»…è¿”å›æ›´æ–°çš„æ•°æ®è€Œä¸æ˜¯æ•´ä¸ªæ–‡æ¡£ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="æ¸²æŸ“è¿›ç¨‹"><a href="#æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="æ¸²æŸ“è¿›ç¨‹"></a>æ¸²æŸ“è¿›ç¨‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line">æ¸²æŸ“è¿›ç¨‹å¤„ç† Web é¡µé¢çš„æ‰€æœ‰å†…å®¹</span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªæµè§ˆå™¨çª—å£ä¹‹å†…å‘ç”Ÿçš„æ‰€æœ‰äº‹æƒ…ï¼Œéƒ½æ˜¯è¢«æ¸²æŸ“è¿›ç¨‹æ‰€æŒæ¡ç€çš„ã€‚å‰ç«¯å·¥ç¨‹å¸ˆä»¬çš„ä»£ç ç”±æ¸²æŸ“è¿›ç¨‹ä¸­çš„ä¸»çº¿ç¨‹å¤„ç†</span><br><span class="line"></span><br><span class="line">å¦‚æœä½¿ç”¨äº† web worker æˆ–è€… service workerï¼Œé‚£å…¶ä¸­çš„ä»£ç å°†ä¼šç”± worker çº¿ç¨‹å¤„ç†</span><br><span class="line"></span><br><span class="line">Compositor çº¿ç¨‹å’Œ Raster çº¿ç¨‹ä¹Ÿè¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯é«˜æ•ˆå¹³æ»‘åœ°æ¸²æŸ“å‡ºä¸€ä¸ªé¡µé¢ã€‚</span><br><span class="line"></span><br><span class="line">æ¸²æŸ“è¿›ç¨‹æœ€æ ¸å¿ƒçš„å·¥ä½œæ˜¯ï¼šå°† HTMLã€CSS å’Œ JavaScript ä»£ç å˜æˆä¸€ä¸ªå¯ä¸ç”¨æˆ·äº¤äº’çš„ Web é¡µé¢ã€‚</span><br><span class="line"></span><br><span class="line">è§£ææ–‡æ¡£</span><br><span class="line"></span><br><span class="line">æ„å»º DOM æ ‘</span><br><span class="line">å½“æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°ä¸€æ¡å³å°†å»å¯¼èˆªçš„ä¿¡å·å¹¶å¼€å§‹æ¥æ”¶ HTML æ•°æ®æ—¶ï¼Œä¸»çº¿ç¨‹å°±å¼€å§‹äº†è‡ªå·±çš„å·¥ä½œï¼šè§£æ HTML æ–‡æœ¬å¹¶å°†å…¶è½¬æ¢ä¸ºæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼Œaka DOMï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">DOM æ˜¯æµè§ˆå™¨å†…éƒ¨å¯¹ä¸€ä¸ªé¡µé¢çš„æŠ½è±¡ï¼ˆä»£è¡¨ï¼‰ï¼Œä¹Ÿæ˜¯å¼€å‘è€…å¯ä»¥åˆ©ç”¨ JavaScript ä¸ä¹‹ç›¸äº¤äº’çš„æ•°æ®ç»“æ„å’Œ APIã€‚</span><br><span class="line"></span><br><span class="line">æµè§ˆå™¨æŒ‰ç…§HTML æ ‡å‡†[4] å»è§£æ HTML æ–‡æ¡£ã€‚ä½ æˆ–è®¸å‘ç°äº†ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å³ä½¿ä½ éšä¾¿ä¸¢ç»™æµè§ˆå™¨ä¸€ä¸ª HTML æ–‡æ¡£éƒ½ä¸ä¼šæŠ¥é”™ã€‚æ¯”å¦‚ï¼Œæ²¡æœ‰ç»“æŸæ ‡ç­¾çš„ &lt;/p&gt; ä»ç„¶æ˜¯ä¸€æ®µæœ‰æ•ˆçš„ HTMLã€‚ä¸€æ®µé”™è¯¯çš„æ ‡ç­¾æ¯”å¦‚ï¼šHi! &lt;b&gt;æˆ‘æ˜¯&lt;i&gt;Chrome&lt;/b&gt;!&lt;/i&gt;(b æ ‡ç­¾åœ¨ i æ ‡ç­¾ä¹‹å‰æå‰å…³é—­äº†)ä¼šè¢«å½“ä½œ Hi! &lt;b&gt;I&apos;m &lt;i&gt;Chrome&lt;/i&gt;&lt;/b&gt;&lt;i&gt;!&lt;/i&gt; å»å¯¹å¾…ã€‚è¿™éƒ½æ˜¯å› ä¸º HTML æœ¬èº«æ‰è®¾è®¡ä¹‹åˆå°±å¸Œæœ›ä¼˜é›…çš„è§£å†³è¿™äº›é”™è¯¯ã€‚å¦‚æœä½ æ˜¯ä¸ªå¥½å¥‡çš„å°æœ‹å‹ï¼Œå¯ä»¥å»çœ‹çœ‹ An Introduction to Error Handling and Strange Cases in the Parser[5] è¿™ç¯‡æ–‡ç« çš„ç›¸å…³ç« èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å­èµ„æºåŠ è½½</span><br><span class="line">ä¸€ä¸ªç½‘ç«™é€šå¸¸ä¼šç”¨åˆ°å¾ˆå¤šå¤–éƒ¨èµ„æºæ¯”å¦‚å›¾ç‰‡ã€CSS å’Œ JavaScriptã€‚è¿™äº›æ–‡ä»¶éƒ½éœ€è¦ä»ç½‘ç»œæˆ–æ˜¯ç¼“å­˜ä¸­åŠ è½½ã€‚å½“ä¸»çº¿ç¨‹åœ¨è§£æ HTML æ–‡æ¡£çš„æ—¶å€™å‘ç°äº†è¿™äº›éœ€è¦é¢å¤–åŠ è½½çš„èµ„æºï¼Œä¸»çº¿ç¨‹ä¼šä¸€ä¸ªä¸€ä¸ªåœ°å»è¯·æ±‚ï¼Œä½†è¿™æ ·ä¼šé™ä½è§£æ HTML çš„æ•ˆç‡ã€‚å› æ­¤ä¸ºäº†æé€Ÿï¼Œâ€œé¢„åŠ è½½æ‰«æå™¨â€é—ªäº®ç™»åœºäº†ã€‚å¦‚æœåœ¨æ–‡æ¡£ä¸­å­˜åœ¨ img æ ‡ç­¾æˆ–æ˜¯ link æ ‡ç­¾ï¼Œé¢„åŠ è½½æ‰«æå™¨ä¼šâ€œçª¥æ¢â€åˆ° HTML è§£æå™¨ç”Ÿæˆçš„ tokenï¼Œå¹¶å‘æµè§ˆå™¨è¿›ç¨‹ä¸­çš„ç½‘ç»œçº¿ç¨‹å‘èµ·è¯·æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">JavaScript é˜»å¡è§£æ</span><br><span class="line">å½“ HTML è§£æå™¨é‡åˆ°äº† script æ ‡ç­¾æ—¶ï¼Œå®ƒä¼šæš‚åœå¯¹ HTML çš„è§£æå·¥ä½œï¼Œè½¬è€Œå»åŠ è½½ã€è§£æå¹¶æ‰§è¡Œ JavaScript ä»£ç ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º JavaScript å¯èƒ½æ”¹å˜æ–‡æ¡£çš„ç»“æ„ï¼Œæ¯”å¦‚ç”¨äº† document.write() ä¹‹ç±»çš„å‡½æ•°ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ HTML è§£æå™¨å¿…é¡»åœ¨ JavaScript æ‰§è¡Œè¿‡åæ‰æ¢å¤å¯¹ HTML æ–‡æ¡£çš„è§£æå·¥ä½œã€‚å¦‚æœä½ çš„ JavaScript ä»£ç åœ¨æ‰§è¡Œæ—¶çš„äº‹æƒ…æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹ V8 å›¢é˜Ÿçš„è¿™ç¯‡æ–‡ç« [6]</span><br><span class="line"></span><br><span class="line">å‘Šè¯‰æµè§ˆå™¨ä½ æƒ³æ€æ ·åŠ è½½èµ„æº</span><br><span class="line">æµè§ˆå™¨æä¾›äº†å¾ˆå¤šä¸é”™çš„æ–¹æ³•ç»™å¼€å‘è€…ï¼Œä»¥å¸®åŠ©ä»–ä»¬ç”¨ä¸åŒçš„å§¿åŠ¿åœ¨é¡µé¢ä¸ŠåŠ è½½èµ„æºã€‚</span><br><span class="line">å¦‚æœä½ çš„ JavaScript ä»£ç ä¸­æ²¡æœ‰ç”¨åˆ°è¯¸å¦‚ document.write() ä¹‹ç±»çš„ä»£ç ï¼Œ</span><br><span class="line">ä½ å¯ä»¥åœ¨è‡ªå·±çš„ script æ ‡ç­¾ä¸ŠåŠ ä¸Š async / defer å±æ€§ï¼Œæµè§ˆå™¨å°±ä¼šå¼‚æ­¥åœ°åŠ è½½å¹¶æ‰§è¡Œ JavaScript ä»£ç å¹¶ä¸”ä¸ä¼šé˜»å¡å¯¹äºæ–‡æ¡£çš„è§£æã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ° JavaScript æ¨¡å—[7]ã€‚&lt;link rel=&quot;preload&quot;&gt; ç”¨äºåŠ è½½å½“å‰é¡µé¢ä¸€å®šä¼šç”¨åˆ°çš„èµ„æºï¼Œ</span><br><span class="line">å¹¶ä¸”å¼€å‘è€…å¸Œæœ›æµè§ˆå™¨èƒ½åœ¨ç¬¬ä¸€æ—¶é—´åŠ è½½è¿™äº›èµ„æºã€‚å¼€å‘è€…å¯ä»¥é’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼Œ</span><br><span class="line">èµ‹äºˆèµ„æºä¸åŒçš„åŠ è½½ä¼˜å…ˆçº§[8]ï¼Œæµè§ˆå™¨ä¼šæŒ‰ç…§æ—¢å®šçš„è§„åˆ™ä¾æ¬¡åŠ è½½è¿™äº›èµ„æºï¼Œä»è€Œèµ·åˆ°åŠ è½½ä¼˜åŒ–çš„æ•ˆæœ</span><br><span class="line"></span><br><span class="line">æ ·å¼çš„è®¡ç®—</span><br><span class="line">åªæœ‰ DOM æ˜¯æ— æ³•å®Œå…¨çŸ¥é“ä¸€ä¸ªé¡µé¢æœ€ç»ˆä¼šæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ CSSã€‚</span><br><span class="line">ä¸»çº¿ç¨‹åœ¨å®Œæˆå¯¹ CSS çš„è§£æå’Œè®¡ç®—åï¼Œæ‰ä¼šä¸ºæ¯ä¸ª DOM èŠ‚ç‚¹èµ‹äºˆæœ€ç»ˆçš„æ ·å¼ã€‚</span><br><span class="line">ä½ å¯ä»¥åœ¨ DevTools çš„ Computed ä¸­æŸ¥çœ‹åˆ°é¡µé¢çš„ç›¸å…³ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">å³ä½¿å¼€å‘è€…ä¸æä¾›ä»»ä½•çš„ CSSï¼Œæ¯ä¸ª DOM èŠ‚ç‚¹è¿˜æ˜¯ä¼šæœ‰å„è‡ªçš„æ ·å¼ï¼š&lt;h1&gt; æ˜¾ç¤ºçš„å­—ä½“æ¯” &lt;h2&gt; å¤§ã€</span><br><span class="line">æ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„ margin å€¼ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨æœ¬èº«æœ‰ä¸€ä¸ªé»˜è®¤çš„æ ·å¼è¡¨ã€‚</span><br><span class="line">å¦‚æœä½ æƒ³çŸ¥é“ Chrome çš„é»˜è®¤ CSS æ˜¯å•¥ï¼Œå»çœ‹çœ‹ Chrome çš„æºä»£ç [9]å§ã€‚</span><br><span class="line"></span><br><span class="line">å¸ƒå±€</span><br><span class="line">ç°åœ¨æ¸²æŸ“è¿›ç¨‹çŸ¥é“äº†æ–‡æ¡£çš„ç»“æ„å’Œæ¯ä¸ªèŠ‚ç‚¹çš„æ ·å¼ï¼Œä½†è¿™è¿˜ä¸è¶³ä»¥å»æ¸²æŸ“ä¸€ä¸ªé¡µé¢</span><br><span class="line"></span><br><span class="line">å¸ƒå±€æ˜¯æŸ¥æ‰¾å…ƒç´ å‡ ä½•å½¢çŠ¶çš„è¿‡ç¨‹ã€‚ä¸»çº¿ç¨‹éå† DOM å¹¶è®¡ç®—æ ·å¼ï¼Œ</span><br><span class="line">åˆ›å»ºä¸€ä¸ªå…·ä½“æ¨ªçºµåæ ‡ä»¥åŠç›’å­è¾¹ç•Œå¤§å°æ•°æ®çš„å¸ƒå±€æ ‘ï¼ˆlayout treeï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">å¸ƒå±€æ ‘å¯èƒ½ä¸ DOM æ ‘ç›¸ä¼¼ï¼Œä½†å®ƒåªåŒ…å«å’Œé¡µé¢å³å°†å‘ˆç°çš„èŠ‚ç‚¹ç›¸å…³çš„ä¿¡æ¯ã€‚</span><br><span class="line">å¦‚æœæŸä¸ªå…ƒç´ è®¾ç½®äº† display: none ï¼Œè™½ç„¶å®ƒä¼šå‘ˆç°åœ¨ DOM æ ‘ä¸­ä½†å¹¶ä¸ä¼šåŒ…å«äºå¸ƒå±€æ ‘å½“ä¸­ï¼›</span><br><span class="line">å¦‚æœæœ‰ä¸€ä¸ªä¼ªç±»å…ƒç´  p::before&#123; content: &apos;Hi!&apos; &#125;ï¼Œ é‚£ä¹ˆå®ƒè™½ç„¶ä¸åœ¨ DOM æ ‘ä¸­ï¼Œä½†ä»ç„¶ä¼šå‡ºç°åœ¨å¸ƒå±€æ ‘å½“ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ domæ ‘  å¸ƒå±€æ ‘</span><br><span class="line"></span><br><span class="line">é¡µé¢å¸ƒå±€çš„å†³ç­–æ˜¯ä¸€é¡¹å¾ˆæœ‰æŒ‘æˆ˜çš„å·¥ä½œã€‚å³ä½¿æ˜¯æœ€ç®€å•çš„é¡µé¢å¸ƒå±€ï¼Œ</span><br><span class="line">æ¯”å¦‚ä¸€ä¸ªä»ä¸Šè‡³ä¸‹çš„å—çŠ¶å…ƒç´ é›†åˆï¼Œä¹Ÿéœ€è¦å»å†³å®šå­—ä½“æ˜¾ç¤ºå¤šå¤§ã€åœ¨å“ªé‡Œæ¢è¡Œ...å› ä¸ºè¿™äº›éƒ½ä¼šå½±å“åˆ°æ®µè½çš„å¤§å°å’Œå½¢çŠ¶ï¼Œ</span><br><span class="line">è¿™äº›ä¹Ÿéƒ½ä¼šå½±å“åˆ°ç›¸é‚»çš„å…ƒç´ æœ€ç»ˆä¼šæ˜¾ç¤ºåœ¨å“ªé‡Œã€‚</span><br><span class="line"></span><br><span class="line">CSS å¯ä»¥è®©å…ƒç´ æ‚¬æµ®åœ¨å¦ä¸€ä¾§ï¼Œå¯ä»¥å°†æº¢å‡ºçš„å†…å®¹éšè—ï¼Œè¿˜å¯ä»¥æ”¹å˜æ–‡æ¡ˆçš„é˜…è¯»æ–¹å‘ã€‚</span><br><span class="line">ç›¸ä¿¡ä½ å¯ä»¥æƒ³è±¡çš„åˆ°ï¼Œå¸ƒå±€é˜¶æ®µçš„ä»»åŠ¡æ˜¯éå¸¸è‰°å·¨çš„ã€‚</span><br><span class="line">Chromeï¼Œä¸€æ•´ä¸ªå›¢é˜Ÿçš„å·¥ç¨‹å¸ˆéƒ½è‡´åŠ›äºå¸ƒå±€è¿™ä¸€é˜¶æ®µçš„å·¥ä½œã€‚å¦‚æœä½ æƒ³çœ‹çœ‹ä»–ä»¬éƒ½åšäº†å“ªäº›å·¥ä½œï¼Œ</span><br><span class="line">è¿™é‡Œæœ‰ä¸€ä¸ªå…³äº BlinkOn[10] æœ‰è¶£çš„ä¼šè®®è®°å½•å¯ä»¥çœ‹çœ‹ã€‚</span><br><span class="line"></span><br><span class="line">å¸ƒå±€å°±åƒæ˜¯ä½ åœ¨å°½åŠ›è¿˜åŸä¸€å¹…ç”»ï¼šä½ çŸ¥é“å¤§å°ã€å½¢çŠ¶ä»¥åŠå…ƒç´ çš„åæ ‡ï¼Œä½†ä½ è¿˜æ˜¯éœ€è¦å†³å®šå…ˆç”»å“ªä¸€ä¸ªã€‚</span><br><span class="line"></span><br><span class="line">å®é™…æƒ…å†µæ˜¯ï¼ŒæŸä¸ªå…ƒç´ å¯èƒ½è¢«è®¾ç½®äº† z-indexï¼Œå¦‚æœæŒ‰ç…§ HTML çš„å…ƒç´ ç¼–å†™é¡ºåºå»â€œç”»â€ï¼Œå°±ä¼šå¯¼è‡´é”™è¯¯çš„æ¸²æŸ“æ•ˆæœ</span><br><span class="line"></span><br><span class="line">åœ¨è¿™ä¸€ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹éå†å¸ƒå±€æ ‘ä»è€Œå»åˆ›å»ºç»˜åˆ¶è®°å½•ã€‚ç»˜åˆ¶è®°å½•æ˜¯ç»˜åˆ¶è¿›ç¨‹çš„â€œç¬”è®°â€ï¼Œ</span><br><span class="line">è®°ä¸‹äº†è¯¸å¦‚â€œå…ˆæ˜¯èƒŒæ™¯ï¼Œç„¶åæ–‡å­—ï¼Œæ¥ä¸‹æ¥æ˜¯çŸ©å½¢â€è¿™æ ·çš„è®°å½•ã€‚</span><br><span class="line">å¦‚æœä½ æ›¾ç»åœ¨ canvas ä¸Šç”¨ JavaScript ç”»è¿‡ç”»ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å¯¹ä½ æ¥è¯´å°±å¾ˆç†Ÿæ‚‰äº†ã€‚</span><br><span class="line"></span><br><span class="line">æ›´æ–°æ¸²æŸ“çš„ä»£ä»·æ˜¯å¾ˆå¤§çš„</span><br><span class="line">åœ¨æ¸²æŸ“ä¸­æœ€éœ€è¦å…³æ³¨åˆ°çš„äº‹æƒ…æ˜¯ï¼Œåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå…ˆå‰çš„æ“ä½œéƒ½ä¼šäº§ç”Ÿæ–°çš„æ•°æ®ã€‚</span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå¸ƒå±€æ ‘çš„æŸäº›ä¸œè¥¿æ”¹å˜äº†ï¼Œæ–‡æ¡£ä¸­ç›¸å…³éƒ¨åˆ†çš„ç»˜åˆ¶é¡ºåºä¹Ÿéœ€è¦é‡æ–°å®‰æ’ä¸€éã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœé¡µé¢ä¸Šæœ‰åŠ¨ç”»å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šåœ¨æ¯ä¸€å¸§éƒ½æ‰§è¡Œè¿™äº›æ“ä½œã€‚å¤§å¤šæ•°æ˜¾ç¤ºå™¨ä¼šä»¥æ¯ç§’ 60 æ¬¡çš„é¢‘ç‡åˆ·æ–°å±å¹•ï¼Œ</span><br><span class="line">å½“ä½ ä»¥è¿™æ ·çš„è¿åŠ¨é€Ÿç‡å»ç»´æŒåŠ¨ç”»æ—¶ï¼Œäººçœ¼å¯¹äºåŠ¨ç”»çš„æ„ŸçŸ¥ä¼šæ˜¯æµç•…çš„ã€‚ç„¶è€Œï¼Œå¦‚æœåŠ¨ç”»â€œä¸¢å¸§â€äº†ï¼Œé¡µé¢å°±ä¼šçœ‹èµ·æ¥å¾ˆä¸å‹å¥½ã€‚</span><br><span class="line"></span><br><span class="line">å³ä½¿ä½ çš„æ¸²æŸ“æ“ä½œè·Ÿä¸Šäº†å±å¹•çš„åˆ·æ–°é¢‘ç‡ï¼Œä½†è¿™äº›è®¡ç®—å§‹ç»ˆæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œ</span><br><span class="line">è¿™å°±æ„å‘³ç€å½“ä½ çš„åº”ç”¨åœ¨è¿è¡Œ JavaScript æ—¶ï¼Œè¿™äº›éƒ½ä¼šè¢«é˜»å¡æ‰ã€‚</span><br><span class="line"></span><br><span class="line">ä½ å¯ä»¥å°† JavaScript çš„æ“ä½œåˆ†å‰²ä¸ºè®¸å¤šå°çš„å—å¹¶æ”¾åœ¨ requestAnimationFrame() é‡Œæ‰§è¡Œï¼Œ</span><br><span class="line">æˆ–è€…å¹²è„†æŠŠè¿™äº› JavaScript ä¸¢åœ¨ Web Worker é‡Œå»æ‰§è¡Œï¼Œè¿™æ ·å°±èƒ½é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">åˆæˆ</span><br><span class="line">ç°åœ¨æµè§ˆå™¨çŸ¥é“äº†æ–‡æ¡£çš„ç»“æ„ã€æ¯ä¸ªå…ƒç´ çš„æ ·å¼ã€é¡µé¢çš„å‡ ä½•æ„æˆä»¥åŠç»˜åˆ¶çš„é¡ºåºï¼Œå®ƒä¼šæ€æ ·å»ç»˜åˆ¶ä¸€ä¸ªé¡µé¢å‘¢ï¼Ÿ</span><br><span class="line">å°†è¿™äº›ä¿¡æ¯è½¬åŒ–ä¸ºå±å¹•ä¸Šçš„åƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå…‰æ …åŒ–ã€‚</span><br><span class="line">å¤„ç†è¿™ä¸ªé—®é¢˜æœ‰ä¸ªâ€œå¹¼ç¨šâ€çš„åŠæ³•ï¼Œå°±æ˜¯åªå¯¹å¯è§†åŒºåŸŸçš„éƒ¨åˆ†è¿›è¡Œå…‰æ …åŒ–ã€‚å½“ç”¨æˆ·æ»šåŠ¨é¡µé¢æ—¶ç§»åŠ¨æµè§ˆå™¨çš„å…‰æ …çª—å£ï¼Œ</span><br><span class="line">ä»è€Œå°†å‰©ä½™çš„éƒ¨åˆ†æ¸²æŸ“å‡ºæ¥ã€‚å®ä¸ç›¸ç’ï¼ŒChrome åœ¨åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œç¡®å®æ˜¯ç”¨è¿™ç§æ–¹æ¡ˆçš„ã€‚</span><br><span class="line">ä¸è¿‡æ—¶è‡³ä»Šæ—¥ï¼Œç°ä»£æµè§ˆå™¨çš„è¿™ä¸€è¿‡ç¨‹æ›´ä¸ºå¤æ‚ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºåˆæˆã€‚</span><br><span class="line"></span><br><span class="line">ä»€ä¹ˆæ˜¯åˆæˆï¼Ÿ</span><br><span class="line">åˆæˆæ˜¯ä¸€ç§å°†é¡µé¢çš„å„ä¸ªéƒ¨åˆ†åˆ†ä¸ºå¤šå±‚ï¼Œåˆ†åˆ«å¯¹å…¶è¿›è¡Œå…‰æ …åŒ–å¹¶åœ¨æˆä¸ºåˆæˆå™¨çº¿ç¨‹çš„å•ç‹¬çº¿ç¨‹ä¸­ä½œä¸ºé¡µé¢è¿›è¡Œåˆæˆçš„æŠ€æœ¯ã€‚</span><br><span class="line">å¦‚æœå‘ç”Ÿäº†æ»šåŠ¨ï¼Œå› ä¸ºæ¯ä¸€å±‚éƒ½å·²ç»å®Œæˆäº†å…‰æ …åŒ–ï¼Œå‰©ä¸‹éœ€è¦åšçš„å°±åªæ˜¯åˆæˆå‡ºä¸€ä¸ªçª—å£ã€‚</span><br><span class="line">å¯ä»¥é€šè¿‡ç§»åŠ¨å›¾å±‚å¹¶åˆå¹¶æ–°å¸§æ¥ä»¥ç›¸åŒçš„æ–¹å¼å®ç°åŠ¨ç”»ã€‚</span><br><span class="line"></span><br><span class="line">ä½ å¯ä»¥åœ¨ DevTools çš„ Layers é¢æ¿[11]ä¸­æŸ¥çœ‹ä½ çš„é¡µé¢æ˜¯å¦‚ä½•è¢«åˆ‡åˆ†æˆå±‚çš„ã€‚</span><br><span class="line"></span><br><span class="line">åˆ†å±‚</span><br><span class="line">ä¸ºäº†ç¡®å®šæ¯ä¸ªå…ƒç´ å„è‡ªåº”è¯¥åœ¨å“ªä¸€å±‚ï¼Œä¸»çº¿ç¨‹åœ¨éå†äº†å¸ƒå±€æ ‘åç”Ÿæˆäº†ä¸€ä¸ªå«åš Layer Tree çš„ä¸œè¥¿</span><br><span class="line">ï¼ˆä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘å°±è¿˜æ˜¯ä¿ç•™ Layer Tree è¿™ä¸ªåå­—å§ï¼‰ã€‚å¦‚æœé¡µé¢çš„æŸä¸€éƒ¨åˆ†éœ€è¦å•ç‹¬çš„å±‚çº§</span><br><span class="line">ï¼ˆæ¯”å¦‚æ»‘å…¥çš„ä¾§è¾¹æ ç›®å½•ï¼‰ä½†å´æ²¡æœ‰å¾—åˆ°å¯¹åº”çš„å±‚çº§ï¼Œå¼€å‘è€…å¯ä»¥ç”¨ CSS çš„ will-change å±æ€§æ¥å‘ŠçŸ¥æµè§ˆå™¨</span><br><span class="line"></span><br><span class="line">ä½ å¯èƒ½æƒ³ç»™æ¯ä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“å±‚ï¼Œä½†æ˜¯ä¸æ¯å¸§å…‰æ …åŒ–é¡µé¢çš„ä¸€å°éƒ¨åˆ†ç›¸æ¯”ï¼Œåœ¨è¿‡å¤šæ•°é‡çš„å›¾å±‚ä¸Šè¿›è¡Œåˆæˆå¯èƒ½ä¼šå¯¼è‡´æ“ä½œçš„é€Ÿåº¦å˜æ…¢ï¼Œ</span><br><span class="line">å› æ­¤è¡¡é‡åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æ€§èƒ½ä¹Ÿæ˜¯è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚æ›´å¤šå†…å®¹ï¼Œ</span><br><span class="line">å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼šStick to Compositor-Only Properties and Manage Layer Count[12]</span><br><span class="line"></span><br><span class="line">will-change ä¸ºwebå¼€å‘è€…æä¾›äº†ä¸€ç§å‘ŠçŸ¥æµè§ˆå™¨è¯¥å…ƒç´ ä¼šæœ‰å“ªäº›å˜åŒ–çš„æ–¹æ³•ï¼Œ</span><br><span class="line">è¿™æ ·æµè§ˆå™¨å¯ä»¥åœ¨å…ƒç´ å±æ€§çœŸæ­£å‘ç”Ÿå˜åŒ–ä¹‹å‰æå‰åšå¥½å¯¹åº”çš„ä¼˜åŒ–å‡†å¤‡å·¥ä½œã€‚</span><br><span class="line">è¿™ç§ä¼˜åŒ–å¯ä»¥å°†ä¸€éƒ¨åˆ†å¤æ‚çš„è®¡ç®—å·¥ä½œæå‰å‡†å¤‡å¥½ï¼Œä½¿é¡µé¢çš„ååº”æ›´ä¸ºå¿«é€Ÿçµæ•</span><br><span class="line"></span><br><span class="line">ä¸»çº¿ç¨‹çš„å…‰æ …ä¸åˆæˆ</span><br><span class="line">ä¸€æ—¦ layer tree å½¢æˆå¹¶ä¸”ç»˜åˆ¶çš„é¡ºåºå®šä¸‹æ¥åï¼Œä¸»çº¿ç¨‹ä¼šå°†è¿™ä¸ªæ¶ˆæ¯æäº¤ç»™åˆæˆçº¿ç¨‹ã€‚ç„¶åï¼Œåˆæˆå™¨çº¿ç¨‹å°†æ¯ä¸ªå›¾å±‚å…‰æ …åŒ–</span><br><span class="line">ä¸€ä¸ªå›¾å±‚æœ‰å¯èƒ½å’Œæ•´ä¸ªé¡µé¢ä¸€æ ·å¤§ï¼Œæ‰€ä»¥åˆæˆå™¨çº¿ç¨‹å°†å®ƒä»¬åˆ‡å‰²ä¸ºå¾ˆå¤šå°å—ï¼Œå¹¶å°†è¿™äº›å—å‘é€ç»™å…‰æ …çº¿ç¨‹</span><br><span class="line">å…‰æ …çº¿ç¨‹å°†ä¸€å°å—å®Œæˆå…‰æ …åŒ–åå°†å…¶ä¿å­˜åœ¨ GPU çš„å†…å­˜å½“ä¸­</span><br><span class="line"></span><br><span class="line">åˆæˆçº¿ç¨‹å¯ä»¥ä¼˜å…ˆå¤„ç†ä¸åŒçš„å…‰æ …çº¿ç¨‹ï¼Œä»¥ä¾¿å¯ä»¥é¦–å…ˆå¯¹å¯è§†åŒºåŸŸï¼ˆæˆ–è€…å¯è§†åŒºåŸŸé™„è¿‘ï¼‰ä¸­çš„äº‹ç‰©è¿›è¡Œå…‰æ …åŒ–</span><br><span class="line">å›¾å±‚è¿˜å…·æœ‰ç”¨äºä¸åŒåˆ†è¾¨ç‡çš„å¤šä¸ªæ‹¼è´´ï¼Œä»¥å¤„ç†è¯¸å¦‚æ”¾å¤§åŠ¨ä½œä¹‹ç±»çš„äº‹æƒ…ã€‚</span><br><span class="line"></span><br><span class="line">å…‰æ …åŒ–åï¼Œåˆæˆå™¨çº¿ç¨‹å°†æ”¶é›†æˆä¸ºâ€œDraw Quadsï¼ˆç»˜åˆ¶å››è¾¹å½¢ï¼Ÿï¼‰â€çš„å›¾å—ä¿¡æ¯ä»¥åˆ›å»º åˆæˆå¸§ï¼ˆCompositor frameï¼‰</span><br><span class="line"></span><br><span class="line">åˆæˆå¸§ä¼šé€šè¿‡ IPC è¢«ä¼ é€’ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚è¿™æ—¶ï¼Œæ¥è‡ªå…¶ä»– UI çº¿ç¨‹çš„åˆæˆå¸§å¯èƒ½å·²ç»è¢«ç”¨äºæµè§ˆå™¨çš„ UI å˜åŒ–äº†</span><br><span class="line">åˆæˆå¸§è¢«è¿é€è‡³ GPUï¼Œç›®çš„å°±æ˜¯ä¸ºäº†æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</span><br><span class="line">å¦‚æœè¿™æ—¶æ»šåŠ¨é¡µé¢ï¼Œåˆæˆå™¨çº¿ç¨‹åˆä¼šåˆ›å»ºæ–°çš„åˆæˆå¸§å¹¶å°†ä¹‹å‘é€åˆ° GPU</span><br><span class="line"></span><br><span class="line">åˆæˆçš„ä¼˜åŠ¿æ˜¯æ‰€æœ‰çš„åˆæˆæ“ä½œéƒ½æ˜¯ç‹¬ç«‹äºä¸»çº¿ç¨‹è¿›è¡Œçš„ã€‚åˆæˆå™¨çº¿ç¨‹ä¸éœ€è¦ç­‰å¾…æ ·å¼çš„è®¡ç®—æˆ–æ˜¯ JavaScript çš„æ‰§è¡Œã€‚</span><br><span class="line">è¿™å°±æ˜¯ COAï¼ˆCompositing Only Animations[13]ï¼‰èƒ½åŠ é€Ÿé¡µé¢æ€§èƒ½çš„åŸå› ã€‚</span><br><span class="line">å¦‚æœé¡µé¢çš„å¸ƒå±€æˆ–è€…ç»˜åˆ¶éœ€è¦è¢«é‡æ–°è®¡ç®—ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸»çº¿ç¨‹å°±ä¼šè¢«ç‰µæ‰¯è¿›æ¥ã€‚</span><br><span class="line"></span><br><span class="line">ä»æµè§ˆå™¨çš„è§’åº¦å®šä¹‰è¾“å…¥äº‹ä»¶</span><br><span class="line">å½“æåˆ°â€œè¾“å…¥äº‹ä»¶â€æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°åœ¨æ–‡æœ¬åŸŸä¸­æ‰“å­—æˆ–æ˜¯é¼ æ ‡çš„ç‚¹å‡»äº‹ä»¶ï¼Œ</span><br><span class="line">ä½†åœ¨æµè§ˆå™¨çœ‹æ¥ï¼Œç”¨æˆ·çš„ä»»ä½•åŠ¨ä½œéƒ½æ„å‘³ç€â€œè¾“å…¥â€ã€‚é¼ æ ‡æ»šè½®çš„æ»šåŠ¨æ˜¯ä¸€ç§è¾“å…¥äº‹ä»¶ï¼Œè§¦æ‘¸æˆ–è€…é¼ æ ‡æ»‘è¿‡ä¹Ÿæ˜¯ä¸€ç§è¾“å…¥äº‹ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">å½“ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºå‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è§¦æ‘¸ç‚¹å‡»å±å¹•ï¼‰ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šç¬¬ä¸€ä¸ªæ„ŸçŸ¥åˆ°è¿™ä¸ªç”¨æˆ·è¡Œä¸ºï¼Œä½†ä¹Ÿä»…ä»…æ˜¯æ„ŸçŸ¥è€Œå·²ï¼Œ</span><br><span class="line">å› ä¸ºæµè§ˆå™¨ tab ä¸‹çš„å†…å®¹éƒ½æ˜¯ç”±æ¸²æŸ“è¿›ç¨‹å…¨ç›˜æŒæ§ç€ã€‚äºæ˜¯æµè§ˆå™¨è¿›ç¨‹åœ¨ç¬¬ä¸€æ—¶é—´å°†ç”¨æˆ·äº‹ä»¶çš„ç±»å‹å’Œåæ ‡å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</span><br><span class="line">æ¸²æŸ“è¿›ç¨‹é€šè¿‡æŸ¥æ‰¾å¹¶è°ƒç”¨å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°æ¥å¤„ç†è¿™ä¸ªç”¨æˆ·è¾“å…¥äº‹ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">åˆæˆå™¨æ¥æ”¶åˆ°è¾“å…¥äº‹ä»¶</span><br><span class="line">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†åˆæˆå™¨å¦‚ä½•é€šè¿‡å…‰æ …åŒ–å›¾å±‚æ¥å¹³æ»‘çš„å¤„ç†æ»šåŠ¨ã€‚</span><br><span class="line">å¦‚æœé¡µé¢ä¸Šæ²¡æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªå®Œå…¨ç‹¬ç«‹äºä¸»çº¿ç¨‹çš„æ–°çš„åˆæˆå¸§ã€‚</span><br><span class="line"></span><br><span class="line">éå¿«é€Ÿæ»šåŠ¨åŒºåŸŸ</span><br><span class="line">å› ä¸ºè¿è¡Œ JavaScript æ˜¯ä¸»çº¿ç¨‹çš„ä»»åŠ¡ï¼Œå½“ä¸€ä¸ªé¡µé¢è¢«åˆæˆï¼Œåˆæˆå™¨çº¿ç¨‹å°†é¡µé¢ä¸ŠæŒ‚åœ¨äº†äº‹ä»¶å¤„ç†å™¨çš„åŒºåŸŸæ ‡è®°ä¸ºâ€œéå¿«é€Ÿæ»šåŠ¨åŒºåŸŸâ€ã€‚</span><br><span class="line">æœ‰äº†è¿™ä¸ªæ ‡è®°ä¹‹åï¼Œåˆæˆå™¨å°±èƒ½ä¿è¯åœ¨å¯¹åº”çš„åŒºåŸŸè§¦å‘è¾“å…¥äº‹ä»¶æ—¶å¯ä»¥å‘ä¸»çº¿ç¨‹ä¼ é€’è¿™ä¸€äº‹ä»¶ã€‚</span><br><span class="line">å¦‚æœè¾“å…¥äº‹ä»¶æ¥è‡ªäºè¿™ä¸ªåŒºåŸŸä¹‹å¤–ï¼Œåˆæˆå™¨åˆ™ä¼šæŒç»­åˆæˆæ–°çš„å¸§ï¼Œå¹¶ä¸ä¼šç­‰å¾…ä¸»çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">å†™äº‹ä»¶å¤„ç†å™¨æ—¶è¦æ³¨æ„</span><br><span class="line">åœ¨ Web å¼€å‘ä¸­ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„äº‹ä»¶å¤„ç†æ¨¡å‹å°±æ˜¯äº‹ä»¶å§”æ‰˜ï¼ˆä»£ç†ï¼‰ã€‚å› ä¸ºäº‹ä»¶çš„å†’æ³¡æœºåˆ¶ï¼Œ</span><br><span class="line">å¼€å‘è€…å¯ä»¥åœ¨æœ€é¡¶å±‚çš„å…ƒç´ æŒ‚è½½ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸”åŸºäº event target åˆ†å‘ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚</span><br><span class="line"></span><br><span class="line">åªç”¨å†™ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨å°±å¯ä»¥æå®šæ‰€æœ‰çš„è¾“å…¥äº‹ä»¶ï¼Œè¿™åœ¨å·¥ç¨‹å­¦ä¸Šæ˜¯ä¸€ä»¶æå…·é­…åŠ›çš„äº‹æƒ…ã€‚</span><br><span class="line">å½“ä½ ä»æµè§ˆå™¨çš„è§†è§’å®¡è§†è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°æ•´ä¸ªé¡µé¢éƒ½è¢«æ ‡è®°æˆäº†â€œéå¿«é€Ÿæ»šåŠ¨åŒºåŸŸâ€ã€‚</span><br><span class="line">è¿™å°±æ„å‘³ç€å³ä½¿ä½ çš„ web app ä¸å…³å¿ƒæ¥è‡ªé¡µé¢ä¸ŠæŸä¸ªä½ç½®çš„è¾“å…¥äº‹ä»¶ï¼Œ</span><br><span class="line">ä½†åˆæˆå™¨çº¿ç¨‹ä»ç„¶ä¼šåŸºäºè¿™æ¬¡è§¦å‘çš„äº‹ä»¶å’Œä¸»çº¿ç¨‹è¿›è¡Œâ€œäº¤æµâ€ã€‚</span><br><span class="line">åœ¨è¿™ç§æ¨¡å¼ä¹‹ä¸‹ï¼Œåˆæˆå™¨æœ¬èº«â€œå¹³æ»‘å¤„ç†é¡µé¢æ»šåŠ¨â€çš„èƒ½åŠ›å°±ä¸å¤å­˜åœ¨äº†</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¸ºäº†å‡è½»è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå¼€å‘è€…å¯ä»¥ç»™è‡ªå·±çš„äº‹ä»¶å¤„ç†å™¨ä¼ é€’ passive: true è¿™æ ·ä¸€ä¸ªå‚ã€‚</span><br><span class="line">è¿™ç­‰åŒäºå‘Šè¯‰æµè§ˆå™¨å¼€å‘è€…ä»ç„¶å¸Œæœ›åœ¨ä¸»çº¿ç¨‹ä¸­ç›‘å¬é¡µé¢ä¸Šæ¯ä¸€æ¬¡è§¦å‘çš„è¾“å…¥äº‹ä»¶ï¼Œ</span><br><span class="line">ä½†ä¹Ÿå¸Œæœ›åˆæˆå™¨è¯¥å¹²å•¥å¹²å•¥ï¼ŒæŒç»­åˆæˆæ–°çš„å¸§ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨ä½ çš„é¼ æ ‡äº‹ä»¶ç›‘å¬å‡½æ•°ä¸­ä½¿ç”¨ passive:true æ„å‘³ç€é¡µé¢çš„æ»šåŠ¨å¯ä»¥æŒ‰ç…§å¾€å¸¸çºµäº«ä¸æ»‘èˆ¬åœ°å»å¤„ç†ï¼Œ</span><br><span class="line">ä½ ä¼šä¸ºäº†é™åˆ¶æ»šåŠ¨çš„æ–¹å‘è°ƒç”¨ preventDefault ï¼Œä½†åœ¨è¿™ä¹‹å‰ç«–ç›´çš„æ»šåŠ¨å°±å¯èƒ½å·²ç»å‘ç”Ÿäº†ã€‚</span><br><span class="line">ä½ å¯ä»¥é€šè¿‡ event.cancelable é’ˆå¯¹æ­¤ç§æƒ…å†µè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">document.body.addEventListener(&apos;pointermove&apos;, event =&gt; &#123;</span><br><span class="line">  if (event.cancelable) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123; passive: true &#125;);</span><br><span class="line"></span><br><span class="line">ä½ ä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹ css æ¥å¸®å¿™æ¶ˆé™¤äº‹ä»¶å¤„ç†å™¨ï¼š</span><br><span class="line"></span><br><span class="line">#area &#123;</span><br><span class="line">  touch-action: pan-x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å½“åˆæˆå™¨çº¿ç¨‹å‘ä¸»çº¿ç¨‹å‘é€äº†ä¸€ä¸ªè¾“å…¥äº‹ä»¶åï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯é€šè¿‡ hit testï¼ˆç‚¹å‡»æµ‹è¯•ï¼‰</span><br><span class="line">æ‰¾åˆ°å¯¹åº”çš„ event targetï¼ˆäº‹ä»¶ç›®æ ‡ï¼Œè¿˜æ˜¯ä¸ç¿»è¯‘è¿™ä¸ªè¯æ¯”è¾ƒæ­£å®—ï¼‰</span><br><span class="line">Hit test åˆ©ç”¨æ¸²æŸ“è¿›ç¨‹äº§ç”Ÿçš„ç»˜åˆ¶è®°å½•æ¥æ‰¾å‡ºåœ¨è§¦å‘æœ¬æ¬¡è¾“å…¥äº‹ä»¶çš„åæ ‡åº•ä¸‹çš„çœŸå®å…ƒç´ </span><br><span class="line"></span><br><span class="line">å‡å°‘ä¸»çº¿ç¨‹çš„äº‹ä»¶å¤„ç†è´Ÿæ‹…</span><br><span class="line"></span><br><span class="line">ä¸»æµçš„æ˜¾ç¤ºå™¨é€šè¿‡æ¯ç§’ 60 æ¬¡çš„é¢‘ç‡åˆ·æ–°ä»¥åŠæˆ‘ä»¬éœ€è¦è·Ÿä¸Šè¿™ä¸ªèŠ‚å¥ä»¥å®ç°æµç•…çš„åŠ¨ç”»æ•ˆæœã€‚</span><br><span class="line">å¯¹äºè¾“å…¥äº‹ä»¶æ¥è¯´ï¼Œä¸»æµçš„è§¦æ‘¸å±ä¼šä»¥æ¯ç§’ 60 åˆ° 120 æ¬¡çš„é¢‘ç‡å‘ä¸»çº¿ç¨‹ä¼ é€’è§¦æ‘¸äº‹ä»¶ï¼Œ</span><br><span class="line">å¤§å¤šæ•°çš„é¼ æ ‡äº‹ä»¶éƒ½è¢«ä»¥æ¯ç§’ 100 æ¬¡çš„é¢‘ç‡ä¼ é€’ç»™ä¸»çº¿ç¨‹ã€‚</span><br><span class="line">è¾“å…¥äº‹ä»¶çš„ä¿çœŸåº¦æ˜¯æ™®éé«˜äºä¸»æµå±å¹•çš„åˆ·æ–°èƒ½åŠ›çš„ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœä¸€ä¸ªæŒç»­ä¸æ–­çš„äº‹ä»¶ï¼ˆæ¯”å¦‚ touchmoveï¼‰åœ¨ä¸€ç§’å†…è¢«ä¼ é€’ç»™äº†ä¸»çº¿ç¨‹ 120 æ¬¡ï¼Œ</span><br><span class="line">è¿™å°±ä¼šè§¦å‘å¤§é‡çš„ hit test å’Œ JavaScript çš„æ‰§è¡Œï¼Œ</span><br><span class="line">è¿™ä¹ˆä¸€å¯¹æ¯”ï¼Œæ¯ç§’ 60 æ¬¡çš„å±å¹•åˆ·æ–°é€Ÿç‡å°±æ˜¾å¾—å¤ªæ…¢äº†ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºäº†å‡å°‘ä¸»çº¿ç¨‹çš„è´Ÿæ‹…ï¼ŒChrome å°†å¸¸è§çš„è¿ç»­äº‹ä»¶è¿›è¡Œäº†åˆå¹¶ï¼ˆæ¯”å¦‚ wheelã€mousewheelã€mousemoveã€pointermoveã€touchmove ç­‰ï¼‰ï¼Œ</span><br><span class="line">å¹¶ä¸”åœ¨ requestAnimationFrame ä¸­å»¶ç¼“äº†äº‹ä»¶çš„è§¦å‘æ—¶æœºã€‚</span><br><span class="line"></span><br><span class="line">å…¶ä»–â€œåˆ†æ•£è§¦å‘â€çš„äº‹ä»¶ï¼ˆkeydownã€keyupã€mouseupã€touchstartã€touchend ç­‰ï¼‰ä»ä¿æŒç«‹å³è§¦å‘çš„ç­–ç•¥ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡ getCoalescedEvents è·å–å¸§å†…äº‹ä»¶</span><br><span class="line"></span><br><span class="line">å¯¹äºå¤§å¤šæ•°çš„ web app æ¥è¯´ï¼Œåˆæˆäº‹ä»¶æ˜¯ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚å‡å¦‚ä½ åœ¨å¼€å‘ä¸€æ¬¾ç»˜ç”»çš„åº”ç”¨ç¨‹åºï¼Œ</span><br><span class="line">å¦‚æœä½ æ ¹æ® touchmove çš„åæ ‡æ¥æ”¾ç½®è·¯å¾„ï¼Œå¤§æ¦‚ç‡æ˜¯ä¼šä¸¢å¤±æ‰ä¸­é—´çš„åæ ‡çš„ï¼Œä½ ä¹Ÿå°±æ— æ³•ç”»ä¸€æ¡å¹³æ»‘çš„çº¿äº†ã€‚</span><br><span class="line">è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°±å¯ä»¥ç”¨ getCoalescedEvents è¿™ä¸ªæ–¹æ³•æ¥è·å–æ›´å¤šå…³äºåˆæˆäº‹ä»¶çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">window.addEventListener(&apos;pointermove&apos;, event =&gt; &#123;</span><br><span class="line">  const evnets = event.getCoalescedEvents();</span><br><span class="line">  for (let event of events) &#123;</span><br><span class="line">    const x = event.pageX;</span><br><span class="line">    const y = event.pageY;</span><br><span class="line">    // ç”¨è¿™äº›åæ ‡ç”»çº¿ï¼Œç¨³</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">å¦‚æœä½ ä¹‹å‰ä»æ¥æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆå®˜æ–¹æ¨èåœ¨ä½ çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ·»åŠ  passive å‚æ•°ï¼Œ</span><br><span class="line">æˆ–è€…ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ script æ ‡ç­¾ä¸Šæ·»åŠ  async å±æ€§ï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªç³»åˆ—èƒ½ä¸ºä½ é˜æ˜ä¸ºä»€ä¹ˆæµè§ˆå™¨éœ€è¦è¿™äº›ä¸œè¥¿æ¥æä¾›æ›´å¿«ã€æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</span><br><span class="line"></span><br><span class="line">Lighthouse ç”¨èµ·æ¥</span><br><span class="line">å¦‚æœä½ æƒ³è®©è‡ªå·±çš„ä»£ç å˜å¾—æ›´åŠ â€œæµè§ˆå™¨å‹å¥½â€å´ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Œä¸å¦¨è¯•è¯• Lighthouse[3] å§ã€‚Lighthouse æ˜¯ä¸€ä¸ªå¯ä»¥å¯¹ç½‘ç«™è¿›è¡Œå®¡æ ¸æ£€æŸ¥çš„å·¥å…·ï¼Œä¼šä¸ºå¼€å‘è€…æä¾›ä¸€ä»½åŒ…å«ç½‘ç«™å¾—åˆ†ä»¥åŠä¼˜åŒ–æ–¹æ¡ˆçš„è¯¦å°½æŠ¥å‘Šã€‚</span><br><span class="line"></span><br><span class="line">å­¦ä¹ å¦‚ä½•åº¦é‡æ€§èƒ½</span><br><span class="line">ä¸åŒçš„ç½‘ç«™å¯¹äºæ€§èƒ½çš„éœ€æ±‚å¯èƒ½ä¸åŒï¼Œå› æ­¤æ‰¾åˆ°åˆé€‚çš„åº¦é‡æ–¹æ³•ä»¥åŠä¼˜åŒ–æ–¹æ¡ˆæ˜¯è‡³å…³é‡è¦çš„ã€‚Chrome çš„å¼€å‘è€…å·¥å…·å›¢é˜Ÿæœ‰è¯è¯´ï¼šé€šè¿‡ Chrome Devtools ä¼˜åŒ–ç½‘ç«™æ€§èƒ½[4]ã€‚</span><br><span class="line"></span><br><span class="line">ç»™ç½‘ç«™æ·»åŠ  Feature Policy</span><br><span class="line">å¦‚æœä½ æƒ³æ›´è¿›ä¸€æ­¥ï¼ŒFeature Policy äº†è§£ä¸€ä¸‹ï¼ŸFeature Policy æ˜¯ä¸€ä¸ªæ–°çš„ web ç‰¹æ€§ï¼Œå®ƒå¯ä»¥åœ¨å¼€å‘è€…æ„å»º web app æ—¶æä¾›â€œä¿æŠ¤â€ã€‚å¯ç”¨ feature policy å¯ä»¥ç¡®ä¿ä½ çš„ web app å…·å¤‡æŸäº›è¡Œä¸ºï¼Œå¹¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…å¼€å‘è€…çŠ¯é”™ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ å¸Œæœ›ä¿è¯ä½ çš„ app ä¸ä¼šé˜»å¡è§£æï¼Œä½ å¯ä»¥åœ¨åŒæ­¥è„šæœ¬ç­–ç•¥ä¹‹ä¸‹è¿è¡Œä½ çš„ appã€‚å½“ sync-script:none æ‰“å¼€æ—¶ï¼Œä¼šé˜»å¡è§£æçš„ JavaScript éƒ½ä¼šè¢«é˜»æ­¢æ‰§è¡Œã€‚è¿™ä¸€ç­–ç•¥ä¼šé˜²æ­¢ä»»ä½•â€œè„šæœ¬é˜»å¡è§£æâ€çš„å‘ç”Ÿï¼Œæµè§ˆå™¨å°±å†ä¹Ÿä¸ç”¨æ‹…å¿ƒè§£æè¢«é˜»å¡è¿™ä»¶äº‹æƒ…äº†ã€‚</span><br><span class="line"></span><br><span class="line">é€šå¸¸æ¥è¯´å°±æ˜¯æ»šåŠ¨å½“å‰é¡µé¢ï¼ˆè¿˜å¯èƒ½æ˜¯ç¼©æ”¾é¡µé¢ï¼‰ï¼Œå¦‚æœå®ƒçš„é»˜è®¤è¡Œä¸ºè¢«é˜»æ­¢äº†ï¼Œé¡µé¢å°±å¿…é¡»é™æ­¢ä¸åŠ¨ã€‚ä½†æµè§ˆå™¨æ— æ³•é¢„å…ˆçŸ¥é“ä¸€ä¸ªç›‘å¬å™¨ä¼šä¸ä¼šè°ƒç”¨ preventDefault()ï¼Œå®ƒèƒ½åšçš„åªæœ‰ç­‰ç›‘å¬å™¨æ‰§è¡Œå®Œåå†å»æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼Œè€Œç›‘å¬å™¨æ‰§è¡Œæ˜¯è¦è€—æ—¶çš„ï¼Œæœ‰äº›ç”šè‡³è€—æ—¶å¾ˆæ˜æ˜¾ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚è§†é¢‘é‡Œä¹Ÿè¯´äº†ï¼Œå³ä¾¿ç›‘å¬å™¨æ˜¯ä¸ªç©ºå‡½æ•°ï¼Œä¹Ÿä¼šäº§ç”Ÿä¸€å®šçš„å¡é¡¿ï¼Œæ¯•ç«Ÿç©ºå‡½æ•°çš„æ‰§è¡Œä¹Ÿä¼šè€—æ—¶ã€‚</span><br><span class="line"></span><br><span class="line">è§†é¢‘é‡Œè¿˜è¯´äº†ï¼Œæœ‰ 80% çš„æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨æ˜¯ä¸ä¼šé˜»æ­¢é»˜è®¤è¡Œä¸ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ˜¯ç™½ç­‰äº†ã€‚æ‰€ä»¥ï¼Œpassive ç›‘å¬å™¨è¯ç”Ÿäº†ï¼Œpassive çš„æ„æ€æ˜¯â€œé¡ºä»çš„â€ï¼Œè¡¨ç¤ºå®ƒä¸ä¼šå¯¹äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºè¯´ noï¼Œæµè§ˆå™¨çŸ¥é“äº†ä¸€ä¸ªç›‘å¬å™¨æ˜¯ passive çš„ï¼Œå®ƒå°±å¯ä»¥åœ¨ä¸¤ä¸ªçº¿ç¨‹é‡ŒåŒæ—¶æ‰§è¡Œç›‘å¬å™¨ä¸­çš„ JavaScript ä»£ç å’Œæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºäº†ã€‚</span><br><span class="line"></span><br><span class="line">https://developers.google.com/web/updates/2018/09/inside-browser-part4</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/07/26/How-to-Configure-VS-Code-Like-a-Pro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/26/How-to-Configure-VS-Code-Like-a-Pro/" itemprop="url">How to Configure VS Code Like a Pro</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-26T11:00:48+08:00">
                2020-07-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Why-Do-We-Even-Need-a-Workspace"><a href="#Why-Do-We-Even-Need-a-Workspace" class="headerlink" title="Why Do We Even Need a Workspace?"></a>Why Do We Even Need a Workspace?</h2><p>ä¸ºäº†åœ¨åŸºäºé¡¹ç›®çš„çº§åˆ«è€Œä¸æ˜¯å…¨å±€ï¼ˆç”¨æˆ·ï¼‰çº§åˆ«åº”ç”¨ä»»ä½•è®¾ç½®æˆ–é…ç½®ï¼Œæ‚¨å°†éœ€è¦æœ‰ä¸€ä¸ªå·¥ä½œåŒºã€‚</p>
<p>æœ‰äº†å·¥ä½œåŒºï¼Œæ‚¨å¯ä»¥å®šåˆ¶å·¥ä½œç¯å¢ƒçš„å„ä¸ªæ–¹é¢ï¼Œä»¥æ»¡è¶³å’Œæ»¡è¶³æ‚¨æ­£åœ¨å¤„ç†çš„é¡¹ç›®çš„ç‰¹å®šéœ€æ±‚ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘æ­£åœ¨è°ˆè®ºæ‰©å±•ï¼Œä»»åŠ¡ï¼Œä»£ç ç‰‡æ®µï¼Œç”šè‡³æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨çš„å¤–è§‚ã€‚ è¿™æ­£æ˜¯æˆ‘æ‰€è¦ä»‹ç»çš„å†…å®¹ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨è‡ªå·±çš„å·¥ä½œç©ºé—´ä¸­è¿›è¡Œè®¾ç½®å’Œé…ç½®ã€‚</p>
<h2 id="å¦‚ä½•è®¾ç½®å·¥ä½œåŒº"><a href="#å¦‚ä½•è®¾ç½®å·¥ä½œåŒº" class="headerlink" title="å¦‚ä½•è®¾ç½®å·¥ä½œåŒº"></a>å¦‚ä½•è®¾ç½®å·¥ä½œåŒº</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ä¿å­˜</span><br><span class="line">1. æ–‡ä»¶  2. å°†å·¥ä½œåŒºå¦å­˜ä¸º</span><br><span class="line"></span><br><span class="line">æ‰“å¼€</span><br><span class="line"></span><br><span class="line">1. æ–‡ä»¶  2. æ‰“å¼€å·¥ä½œåŒº</span><br><span class="line"></span><br><span class="line">å·¥ä½œåŒºçœ‹ä¸Šå»æ˜¯ç©ºæ–‡ä»¶ ä¹Ÿæ²¡æœ‰ä»€ä¹ˆ</span><br><span class="line">ä½†æ˜¯é€šè¿‡å·¥ä½œåŒºå¯ä»¥å¿«é€Ÿå®‰è£… è‡ªå·±å–œæ¬¢çš„æ’ä»¶</span><br><span class="line">é€šè¿‡ Peacock è¿™ä¸ªæ’ä»¶ ç»™vså®ä¾‹æ·»åŠ ä¸åŒé¢œè‰²</span><br><span class="line"></span><br><span class="line">æ‰“å¼€å‘½ä»¤é¢æ¿ cmd + shift +  p  è¾“å…¥ peacock</span><br><span class="line"></span><br><span class="line">åœ¨å·¥ä½œåŒºä¸­.vscode/settings.json</span><br><span class="line"></span><br><span class="line">åœ¨workbenchå¯¹è±¡ä¸­ï¼Œæ‚¨å¯ä»¥è¿›ä¸€æ­¥å®šåˆ¶VSä»£ç ä¸­çš„è®¸å¤šå…¶ä»–å…ƒç´ å’Œéƒ¨åˆ†(ä¾‹å¦‚ç»ˆç«¯éƒ¨åˆ†)</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•ä¸€ä¸ªå¤šæ–‡ä»¶å·¥ä½œåŒº"><a href="#å¦‚ä½•ä¸€ä¸ªå¤šæ–‡ä»¶å·¥ä½œåŒº" class="headerlink" title="å¦‚ä½•ä¸€ä¸ªå¤šæ–‡ä»¶å·¥ä½œåŒº"></a>å¦‚ä½•ä¸€ä¸ªå¤šæ–‡ä»¶å·¥ä½œåŒº</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å®é™…ä¸Šï¼Œå¤šæ–‡ä»¶å¤¹å·¥ä½œåŒºåªæ˜¯ä¸€ä¸ªå¸¸è§„å·¥ä½œåŒºï¼Œåœ¨åŸå§‹é¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ äº†å…¶ä»–æ–‡ä»¶å¤¹ï¼ˆé¡¹ç›®</span><br><span class="line">æ‚¨å¯ä»¥åœ¨å½“å‰å·¥ä½œç©ºé—´ä¸­æ·»åŠ ä»»æ„æ•°é‡çš„é¡¹ç›®ã€‚ æ‚¨å¯ä»¥è®©å‰ç«¯å’Œåç«¯é¡¹ç›®å…±äº«ä¸€ä¸ªå·¥ä½œåŒº</span><br><span class="line">æˆ–ä½ å¯æƒ³åœ¨è‡ªå·±ä¸€ä¸ªä»“åº“ä¸­æœ‰ä¸€ä¸ªå·¥ä½œåŒºä¸­å¯¹å¤šä¸ªReacté¡¹ç›®è¿›è¡Œé…ç½®</span><br><span class="line">æ‚¨åœ¨å¤šæ–‡ä»¶å¤¹å·¥ä½œç©ºé—´ä¸­å¯ä»¥æ‹¥æœ‰çš„è®¾ç½®å’ŒåŠŸèƒ½ä¸æ™®é€šå·¥ä½œç©ºé—´å®Œå…¨ç›¸åŒ</span><br><span class="line"></span><br><span class="line">1. æ–‡ä»¶  2. å°†æ–‡ä»¶å¤¹æ·»åŠ åˆ°å·¥ä½œåŒº</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡å·¥ä½œåŒºå…¬å¼€å’Œåˆ†äº«æ‰©å±•"><a href="#é€šè¿‡å·¥ä½œåŒºå…¬å¼€å’Œåˆ†äº«æ‰©å±•" class="headerlink" title="## é€šè¿‡å·¥ä½œåŒºå…¬å¼€å’Œåˆ†äº«æ‰©å±•"></a>## é€šè¿‡å·¥ä½œåŒºå…¬å¼€å’Œåˆ†äº«æ‰©å±•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">***.code-workspace æ–‡ä»¶ä¸­</span><br><span class="line"></span><br><span class="line">extensionså­—æ®µä¸­ recommrecommendationså­—æ®µä¸­    </span><br><span class="line">æ·»åŠ è‡ªå·±å–œæ¬¢çš„æ’ä»¶</span><br><span class="line"></span><br><span class="line">ä¸€æ—¦å…¶ä»–äººæ‰“å¼€è¿™ä¸ªå·¥ä½œåŒº å°±ä¼šæç¤ºå®‰è£…æ¨èçš„æ’ä»¶</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•åœ¨å·¥ä½œç©ºé—´-å¤šæ–‡ä»¶å¤¹-å·¥ä½œç©ºé—´è®¾ç½®å’Œè¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡"><a href="#å¦‚ä½•åœ¨å·¥ä½œç©ºé—´-å¤šæ–‡ä»¶å¤¹-å·¥ä½œç©ºé—´è®¾ç½®å’Œè¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡" class="headerlink" title="å¦‚ä½•åœ¨å·¥ä½œç©ºé—´/å¤šæ–‡ä»¶å¤¹ å·¥ä½œç©ºé—´è®¾ç½®å’Œè¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡"></a>å¦‚ä½•åœ¨å·¥ä½œç©ºé—´/å¤šæ–‡ä»¶å¤¹ å·¥ä½œç©ºé—´è®¾ç½®å’Œè¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†VS Codeé…ç½®ä¸ºä¸€æ¬¡å•å‡»æˆ–æ¯æ¬¡æ‰“å¼€å·¥ä½œåŒºæ—¶æ‰§è¡Œæ­¤å‘½ä»¤é“¾</span><br><span class="line">å…·ä½“å–å†³äºæˆ‘ä»¬çš„éœ€æ±‚</span><br><span class="line"></span><br><span class="line">åœ¨.vscodeæ–‡ä»¶å¤¹ä¸­task.jsonè®¾ç½®</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &apos;version&apos;,</span><br><span class="line">  &apos;tasks&apos;; [</span><br><span class="line">    &#123;</span><br><span class="line">      label,</span><br><span class="line">      command,</span><br><span class="line">      type: &apos;shell&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œä»»åŠ¡ ç»ˆç«¯ run task  é€‰æ‹©</span><br><span class="line"></span><br><span class="line">æˆ‘æƒ³æŒ‡å‡ºçš„æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨å¤šæ–‡ä»¶å¤¹å·¥ä½œåŒºä¸­å·¥ä½œï¼Œåˆ™å¯ä»¥åœ¨å½¼æ­¤ç‹¬ç«‹çš„æ¯ä¸ªæ–‡ä»¶å¤¹ï¼ˆé¡¹ç›®ï¼‰ä¸­åŒæ—¶è¿è¡Œä»»åŠ¡ã€‚ æ‚¨åªéœ€è¦åœ¨æ¯ä¸ªé¡¹ç›®ä¸­éƒ½æœ‰ä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åŒ…å«å‘½ä»¤çš„tasks.jsonæ–‡ä»¶å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">æ¯å½“æˆ‘ä»¬ä»å·¥ä½œåŒºæ‰“å¼€æˆ‘ä»¬çš„é¡¹ç›®å¹¶çœŸæ­£å®ç°å®ƒçš„è‡ªåŠ¨åŒ–æ—¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥è½»æ¾åœ°å°†VS Codeé…ç½®ä¸ºè¿è¡Œæ­¤ç±»ä»»åŠ¡ã€‚ è¯¥è¿‡ç¨‹è¿˜æ¶‰åŠä¸¤ä¸ªæ­¥éª¤</span><br><span class="line"></span><br><span class="line">1. åœ¨ä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ·»åŠ runOptionså­—æ®µ å¯¹è±¡ä¸º&#123;runOn: &apos;folderOpen&apos;&#125;</span><br><span class="line"></span><br><span class="line">2. we need to open the command palette, type â€œManage Automatic Tasks in Folder,â€ and then allow the option.</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•åœ¨å·¥ä½œåŒºä¸­åˆ›å»ºè‡ªå®šä¹‰ç‰‡æ®µ"><a href="#å¦‚ä½•åœ¨å·¥ä½œåŒºä¸­åˆ›å»ºè‡ªå®šä¹‰ç‰‡æ®µ" class="headerlink" title="å¦‚ä½•åœ¨å·¥ä½œåŒºä¸­åˆ›å»ºè‡ªå®šä¹‰ç‰‡æ®µ"></a>å¦‚ä½•åœ¨å·¥ä½œåŒºä¸­åˆ›å»ºè‡ªå®šä¹‰ç‰‡æ®µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä»£ç æ®µæ˜¯ä¸€ç§èŠ‚çœæ—¶é—´çš„å¥½æ–¹æ³•ï¼Œæ‚¨æ— éœ€ä¸€ç›´è¾“å…¥æ¨¡æ¿æˆ–æ ·æ¿ä»£ç ã€‚</span><br><span class="line">å½“ç„¶ï¼Œå¯ä»¥é€‰æ‹©å®‰è£…ç‰‡æ®µæ‰©å±•ï¼Œä½†æ˜¯æˆ‘çœŸçš„æ›´å–œæ¬¢æ ¹æ®è‡ªå·±çš„å–œå¥½å’Œéœ€æ±‚å®šåˆ¶ç‰‡æ®µã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†åˆ›å»ºä»£ç æ®µï¼Œæ‚¨åº”è¯¥åœ¨VS Codeä¸­å¯¼èˆªåˆ°</span><br><span class="line"></span><br><span class="line">ä»£ç &gt;é¦–é€‰é¡¹&gt;ç”¨æˆ·ä»£ç æ®µã€‚ ç„¶åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨ï¼Œ</span><br><span class="line">å…¶ä¸­åŒ…å«å½“å‰åˆ—å‡ºçš„æ‘˜å½•ä»¥åŠé€‰é¡¹â€œ New Global Snippets Fileâ€¦â€</span><br><span class="line"></span><br><span class="line"> å’Œâ€œæ–°çš„æ‘˜è¦æ–‡ä»¶â€ä½œä¸ºâ€œæ‚¨çš„å·¥ä½œåŒºåç§°â€ã€‚</span><br><span class="line"></span><br><span class="line"> ä»“åº“åœ°å€</span><br><span class="line"></span><br><span class="line"> https://github.com/Squiff88/vscodeSetup</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/07/20/æ­å»ºä¸€ä¸ªç°åº¦å‘å¸ƒç¯å¢ƒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/20/æ­å»ºä¸€ä¸ªç°åº¦å‘å¸ƒç¯å¢ƒ/" itemprop="url">æ­å»ºä¸€ä¸ªç°åº¦å‘å¸ƒç¯å¢ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-20T11:29:22+08:00">
                2020-07-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç°åº¦å‘å¸ƒï¼Œåˆç§°é‡‘ä¸é›€å‘å¸ƒ</span><br><span class="line"></span><br><span class="line">é›†æˆç°åº¦å‘å¸ƒçš„æµæ°´çº¿åœ¨DevOpsä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·å’Œé«˜æ•ˆçš„å®è·µ</span><br></pre></td></tr></table></figure>
<h2 id="01-æœåŠ¡å™¨å‡†å¤‡"><a href="#01-æœåŠ¡å™¨å‡†å¤‡" class="headerlink" title="01 æœåŠ¡å™¨å‡†å¤‡"></a>01 æœåŠ¡å™¨å‡†å¤‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è·å–æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">ä¸Šé¢æåˆ°ï¼Œç°åº¦å‘å¸ƒæ˜¯é€šè¿‡å°‘é‡çš„ç”¨æˆ·è¯•ç‚¹æ¥éªŒè¯æ–°åŠŸèƒ½æœ‰æ²¡æœ‰é—®é¢˜ã€‚</span><br><span class="line">æ‰€ä»¥è¦ä¿è¯æœ‰ä¸¤æ‰¹ç”¨æˆ·èƒ½åœ¨åŒä¸€æ—¶é—´ä½“éªŒåˆ°ä¸åŒçš„åŠŸèƒ½ã€‚</span><br><span class="line">è¿™å°±è¦æ±‚æˆ‘ä»¬å‡†å¤‡ä¸¤å°æœåŠ¡å™¨ï¼Œåˆ†åˆ«éƒ¨ç½²ä¸åŒçš„ä»£ç ç‰ˆæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœä½ å·²ç»æœ‰äº†ä¸€å°æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨ä¸åŒç«¯å£éƒ¨ç½²æœåŠ¡çš„æ–¹å¼æ¥æ¨¡æ‹Ÿä¸¤å°æœåŠ¡å™¨ã€‚</span><br><span class="line">å¦‚æœä½ è¿˜ä¸€å°æœåŠ¡å™¨éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆå¯ä»¥å‚è€ƒè¿™ä¸ªè¿‡ç¨‹è´­ä¹°ä¸¤å°äº‘æœåŠ¡å™¨ï¼Œ</span><br><span class="line">å¦‚æœæ˜¯æŒ‰éœ€è´­ä¹°ï¼Œå®Œæˆæœ¬æ–‡çš„Demoï¼Œå¤§æ¦‚è¦èŠ±è´¹20å—é’±ã€‚</span><br><span class="line"></span><br><span class="line">https://github.com/TerminatorSd/canaryUI/blob/master/HuaWeiCloudServer.md</span><br></pre></td></tr></table></figure>
<h3 id="å·¥å…·å®‰è£…"><a href="#å·¥å…·å®‰è£…" class="headerlink" title="å·¥å…·å®‰è£…"></a>å·¥å…·å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">1. git</span><br><span class="line">é¦–å…ˆï¼Œç¡®ä¿ä½ çš„æœåŠ¡å™¨ä¸Šå·²ç»å®‰è£…äº†gitï¼Œå¦‚æœæ²¡æœ‰çš„è¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼Œ</span><br><span class="line">å®‰è£…å¥½äº†ä»¥åç”Ÿæˆssh å…¬é’¥ï¼Œæ”¾åˆ°ä½ çš„github é‡Œï¼Œåé¢æ‹‰å–ä»£ç çš„æ—¶å€™ä¼šç”¨åˆ°</span><br><span class="line"></span><br><span class="line">yum install git</span><br><span class="line"></span><br><span class="line">2. nginx</span><br><span class="line"></span><br><span class="line">å®‰è£…nginx</span><br><span class="line"></span><br><span class="line">sudo yum install nginx</span><br><span class="line"></span><br><span class="line">åœ¨ç»ˆç«¯è¾“å…¥nginx -tæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line"></span><br><span class="line">å¦‚æœå®‰è£…æˆåŠŸï¼Œå®ƒä¼šæ˜¾ç¤ºNginx é…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼Œä»¥åŠä½ç½®</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶nginxè¿˜æ²¡æœ‰å¯åŠ¨ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥nginx æˆ–nginx \-s reload å‘½ä»¤å³å¯å¯åŠ¨</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶çœ‹åˆ°çš„nginxç›¸å…³è¿›ç¨‹å¦‚ä¸‹ï¼Œè¡¨æ˜å·²ç»å¯åŠ¨æˆåŠŸ</span><br><span class="line"></span><br><span class="line">åœ¨æµè§ˆå™¨é‡Œè®¿é—®ä½ çš„æœåŠ¡å™¨å…¬ç½‘IPï¼Œå¦‚æœèƒ½çœ‹åˆ°ä¸‹é¢çš„é¡µé¢è¯´æ˜Nginx å¯ä»¥æ­£å¸¸å·¥ä½œ</span><br><span class="line"></span><br><span class="line">3. Jenkins</span><br><span class="line"></span><br><span class="line">  å®‰è£…</span><br><span class="line"></span><br><span class="line"> Jenkinsç¨³å®šç‰ˆæœ¬list  http://pkg.jenkins-ci.org/redhat-stable/</span><br><span class="line"></span><br><span class="line"> // ç§‘å­¦ä¸Šç½‘ä¼šå¿«ä¸€äº›ï¼Œè®°å¾—ç•™æ„ç½‘ç«™ä¸Šjavaå’Œjenkinsç‰ˆæœ¬åŒ¹é…ä¿¡æ¯ï¼Œåˆ«ä¸‹é”™äº†</span><br><span class="line"></span><br><span class="line"> wget http://pkg.jenkins-ci.org/redhat-stable/jenkins-2.204.5-1.1.noarch.rpm</span><br><span class="line"></span><br><span class="line"> rpm -ivh jenkins-2.204.5-1.1.noarch.rpm</span><br><span class="line"></span><br><span class="line"> ä¿®æ”¹Jenkinsç«¯å£ï¼Œä¸å†²çªå¯ä¸ä¿®æ”¹</span><br><span class="line"></span><br><span class="line"> // line 56 JENKINS_PORT</span><br><span class="line"> vi /etc/sysconfig/jenkins</span><br><span class="line"></span><br><span class="line"> å¯åŠ¨</span><br><span class="line"></span><br><span class="line"> å¯åŠ¨jenkins</span><br><span class="line"></span><br><span class="line">    service jenkins start/stop/restart</span><br><span class="line"></span><br><span class="line">  // å¯†ç ä½ç½®</span><br><span class="line"></span><br><span class="line">    /var/lib/jenkins/secrets/initialAdminPassword</span><br><span class="line"></span><br><span class="line">  è®¿é—®</span><br><span class="line"></span><br><span class="line">    è®¿é—®æœåŠ¡å™¨çš„8080ç«¯å£ï¼Œè¾“å…¥ä»ä¸Šè¿°ä½ç½®è·å–çš„å¯†ç ï¼Œç‚¹å‡»ç»§ç»­</span><br><span class="line"></span><br><span class="line">  åˆ›å»ºä¸€ä¸ªè´¦æˆ·ç„¶åç™»å½•</span><br></pre></td></tr></table></figure>
<h2 id="02-ä»£ç å‡†å¤‡"><a href="#02-ä»£ç å‡†å¤‡" class="headerlink" title="02 ä»£ç å‡†å¤‡"></a>02 ä»£ç å‡†å¤‡</h2><h3 id="å‡†å¤‡ä¸¤ä»½ä»£ç "><a href="#å‡†å¤‡ä¸¤ä»½ä»£ç " class="headerlink" title="å‡†å¤‡ä¸¤ä»½ä»£ç "></a>å‡†å¤‡ä¸¤ä»½ä»£ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å› ä¸ºè¦åšç°åº¦éƒ¨ç½²ï¼Œæ‰€ä»¥éœ€è¦å‡†å¤‡ä¸¤ä»½ä¸ä¸€æ ·çš„ä»£ç ï¼Œä»¥éªŒè¯æˆ‘ä»¬å®æ–½çš„ç°åº¦æ“ä½œæ˜¯å¦ç”Ÿæ•ˆ</span><br><span class="line">è¿™é‡Œé€‰æ‹©ä½¿ç”¨Angular çš„Angular-CLI æ¥åˆ›å»ºä»£ç </span><br><span class="line"></span><br><span class="line">åˆ›å»ºçš„é¡¹ç›®å¹¶ä¸ç®€æ´ï¼Œä½†æ˜¯èƒœåœ¨æ“ä½œç®€å•ã€‚æˆ‘ä»¬ä¸€æ¬¡æ€§æŠŠä¸¤ä»½ä»£ç å‡†å¤‡å¥½ï¼Œç®€åŒ–å¼€å‘ä¾§å·¥ä½œ</span><br><span class="line"></span><br><span class="line">// å®‰è£…angular-cliï¼Œå‰ææ˜¯å·²ç»å®‰è£…äº†nodeï¼Œå¦‚æœæ²¡æœ‰nodeçœŸçš„è¦å»è‡ªè¡Œç™¾åº¦äº†...</span><br><span class="line">npm install -g @angular/cli</span><br><span class="line">// å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä¸€è·¯å›è½¦</span><br><span class="line">ng new canaryDemocd canaryDemo</span><br><span class="line">// è¿è¡Œå®Œè¿™ä¸ªå‘½ä»¤åè®¿é—®http://localhost:4200 æŸ¥çœ‹é¡µé¢ä¿¡æ¯</span><br><span class="line">ng serve</span><br><span class="line"></span><br><span class="line">è®¿é—®localhost çš„4200 ç«¯å£æŸ¥çœ‹é¡µé¢ï¼Œç„¶åæŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹src ä¸­çš„index.html çš„title æ”¹æˆA-CanaryDemoï¼Œ</span><br><span class="line">å¯ä»¥çœ‹åˆ°é¡µé¢ä¼šè¿›è¡Œå®æ—¶åœ°åˆ·æ–°ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨title æ¥æ ‡è¯†ç°åº¦å‘å¸ƒè¿‡ç¨‹ä¸­ä¸¤è¾¹ä¸åŒçš„æœåŠ¡éœ€è¦éƒ¨ç½²çš„ä»£ç </span><br><span class="line"></span><br><span class="line">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›è¡Œä¸¤æ¬¡æ‰“åŒ…ï¼Œä¸¤æ¬¡æ‰“åŒ…çš„title åˆ†åˆ«ä¸ºA-CanaryDemo å’Œ B-CanaryDemo</span><br><span class="line">æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ”¾å¥½å¤‡ç”¨ï¼Œä½œä¸ºä¸€ä¼šç°åº¦å‘å¸ƒçš„æ–°è€ä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">ng build --prod</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®Nginx"><a href="#é…ç½®Nginx" class="headerlink" title="é…ç½®Nginx"></a>é…ç½®Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨ä¸Šè¿°å®ŒæˆNginx çš„å®‰è£…æ“ä½œæ—¶ï¼Œæˆ‘ä»¬è®¿é—®æœåŠ¡å™¨çš„IP çœ‹åˆ°çš„æ˜¯Nginx çš„é¡µé¢ï¼Œ</span><br><span class="line">ç°åœ¨æˆ‘ä»¬æƒ³è®¿é—®åˆ°è‡ªå·±çš„é¡µé¢ï¼Œé¦–å…ˆæŠŠä¸Šé¢æ‰“åŒ…å¾—åˆ°çš„A-CanaryDemo å‘é€åˆ°ä¸¤å°æœåŠ¡å™¨ä¸Šä»»æ„ä½ç½®</span><br><span class="line">é‡Œæˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°/var/canaryDemo</span><br><span class="line"></span><br><span class="line">// å°†A-CanaryDemo æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½ çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼Œxxéƒ¨åˆ†æ˜¯ä½ çš„æœåŠ¡å™¨å…¬ç½‘ip</span><br><span class="line">scp -r ./dist/A-CanaryDemo root@xx.xx.xx.xx:/var/canaryDemo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å»æœåŠ¡å™¨ä¸Š/var çš„ä½ç½®ä¸Šçœ‹ä¸€ä¸‹ï¼Œæ˜¯å¦å·²ç»æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæœ‰äº†çš„è¯ï¼Œæ¥ç€åˆ°ä¸‹ä¸€æ­¥</span><br><span class="line">å³ä¿®æ”¹Nginx é…ç½®æŠŠè®¿é—®è¯¥æœåŠ¡å™¨IP çš„è¯·æ±‚è½¬å‘åˆ°æˆ‘ä»¬åˆšåˆšä¸Šä¼ ä¸Šæ¥çš„é¡µé¢ä¸Š</span><br><span class="line">ä¸Šé¢æåˆ°è¿‡å¯ä»¥é€šè¿‡nginx -t è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹Nginx é…ç½®æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦å»ç¼–è¾‘é‚£ä¸ªæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">vi /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹47-50è¡Œæ·»åŠ ä¸‹å›¾ç›¸å…³çš„å†…å®¹ï¼Œå³å°†è®¿é—®åˆ°è¯¥æœåŠ¡å™¨IP çš„æµé‡è½¬å‘åˆ°/var/canaryDemo ä¸‹çš„index.html</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">  root /var/canaryDemo;</span><br><span class="line">  index index.html</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line">è¿™æ—¶å€™å»è®¿é—®æˆ‘ä»¬æœåŠ¡å™¨çš„IP åœ°å€å¯ä»¥çœ‹åˆ°é¡µé¢å·²ç»å˜æˆäº†åˆšåˆšæˆ‘ä»¬åœ¨æœ¬åœ°æ”¹çš„é¡µé¢ï¼Œè€Œä¸”title ç¡®å®æ˜¯A-CanaryDemoã€‚</span><br><span class="line">ä¸¤å°æœåŠ¡å™¨éƒ½æ“ä½œå®Œæˆåï¼Œä¸¤è¾¹éƒ½å¯ä»¥è®¿é—®åˆ°title ä¸ºA-CanaryDemo çš„é¡µé¢ã€‚</span><br><span class="line">æ­¤æ—¶çš„çŠ¶æ€ç›¸å½“äºç”Ÿäº§ç¯å¢ƒå·²ç»åœ¨æä¾›ç¨³å®šæœåŠ¡çš„ä¸¤å°æœºå™¨</span><br></pre></td></tr></table></figure>
<h2 id="03-å®šä¹‰ç°åº¦ç­–ç•¥"><a href="#03-å®šä¹‰ç°åº¦ç­–ç•¥" class="headerlink" title="03 å®šä¹‰ç°åº¦ç­–ç•¥"></a>03 å®šä¹‰ç°åº¦ç­–ç•¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å¼€å§‹è¿›è¡Œç°åº¦å‘å¸ƒçš„éƒ¨åˆ†ï¼Œåœ¨è¿›è¡Œç›¸å…³æ“ä½œä¹‹å‰ï¼Œ</span><br><span class="line">æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªç°åº¦ç­–ç•¥ï¼Œå³æ»¡è¶³ä»€ä¹ˆæƒ…å†µä¸‹çš„æµé‡ä¼šèµ°åˆ°ç°åº¦è¾¹ï¼Œè€Œå…¶ä»–æµé‡èµ°å‘æ­£å¸¸è¾¹ã€‚</span><br><span class="line">è¿™é‡Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨åå­—ä¸ºcanary çš„cookie æ¥åŒºåˆ†ï¼Œ</span><br><span class="line"></span><br><span class="line">å¦‚æœæ£€æµ‹åˆ°è¿™ä¸ªcookie çš„å€¼ä¸ºdevuiï¼Œå°±è®¿é—®ç°åº¦è¾¹æœºå™¨ï¼Œå¦åˆ™å°±è®¿é—®æ­£å¸¸è¾¹æœºå™¨ã€‚</span><br><span class="line"></span><br><span class="line">æŒ‰ç…§æ­¤è§„åˆ™é…ç½®Nginx ç»“æœå¦‚ä¸‹ï¼Œæ­¤å¤„åˆ†åˆ«ä½¿ç”¨11.11.11.11å’Œ22.22.22.22ä»£è¡¨ä¸¤å°æœåŠ¡å™¨çš„IPåœ°å€</span><br></pre></td></tr></table></figure>
<h3 id="nignx"><a href="#nignx" class="headerlink" title="nignx"></a>nignx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Canary Deployment</span></span><br><span class="line">map <span class="variable">$COOKIE_canary</span> <span class="variable">$group</span> &#123;</span><br><span class="line">  <span class="comment"># canary account</span></span><br><span class="line">  ~*devui$ server_canary;</span><br><span class="line">  default server_default;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream server_canary &#123;</span><br><span class="line">  <span class="comment"># ä¸¤å°æœºå™¨çš„IPï¼Œç¬¬ä¸€å°è®¾ç½®ç«¯å£å·8000æ˜¯ä¸ºäº†é˜²æ­¢nginxè½¬å‘å‡ºç°æ­»å¾ªç¯å¯¼è‡´é¡µé¢æŠ¥é”™</span></span><br><span class="line">  server 11.11.11.11:8000 weight=1 max_fails=1 fail_timeout=30s;</span><br><span class="line">  server 22.22.22.22 weight=1 max_fails=1 fail_timeout=30s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream server_default &#123;</span><br><span class="line">  server 11.11.11.11:8000 weight=2 max_fails=1 fail_timeout=30s;</span><br><span class="line">  server 22.22.22.22 weight=2 max_fails=1 fail_timeout=30s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›¸åº”åœ°ï¼Œè¦é…ç½®8000ç«¯å£çš„è½¬å‘è§„åˆ™ï¼Œ8000ç«¯å£é»˜è®¤ä¸å¼€å¯è®¿é—®ï¼Œéœ€è¦å»äº‘æœåŠ¡å™¨æ§åˆ¶å°å®‰å…¨ç»„æ–°å¢8000</span></span><br><span class="line">server &#123;</span><br><span class="line">  listen 8000;</span><br><span class="line">  server_name _;</span><br><span class="line">  root /var/canaryDemo;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">  include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/canaryDemo;</span><br><span class="line">    index index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80 default_server;</span><br><span class="line">  listen [::]:80 default_server;</span><br><span class="line">  server_name _;</span><br><span class="line">  <span class="comment"># root /usr/share/nginx/html;</span></span><br><span class="line">  root /var/canaryDemo;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">  include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://<span class="variable">$group</span>;</span><br><span class="line">    <span class="comment"># root /var/canaryDemo;</span></span><br><span class="line">    <span class="comment"># index index.html;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 404 /404.html;</span><br><span class="line">    location = /40x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 500 502 503 504 /50x.html;</span><br><span class="line">  location = /50x.h</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ­¤æ—¶ï¼Œç°åº¦æµé‡å’Œæ­£å¸¸æµé‡éƒ½ä¼šéšæœºåˆ†é…åˆ°ABä¸¤è¾¹çš„æœºå™¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡å»ºç«‹Jenkins ä»»åŠ¡æ‰§è¡ŒNginx æ–‡ä»¶ä¿®æ”¹çš„æ–¹å¼å®ç°ç°åº¦å‘å¸ƒ</span><br></pre></td></tr></table></figure>
<h2 id="04-å®ç°ç°åº¦å‘å¸ƒ"><a href="#04-å®ç°ç°åº¦å‘å¸ƒ" class="headerlink" title="04 å®ç°ç°åº¦å‘å¸ƒ"></a>04 å®ç°ç°åº¦å‘å¸ƒ</h2><h3 id="æµç¨‹æ¢³ç†"><a href="#æµç¨‹æ¢³ç†" class="headerlink" title="æµç¨‹æ¢³ç†"></a>æµç¨‹æ¢³ç†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">åœ¨åˆ›å»ºç”¨äºå®ç°ç°åº¦å‘å¸ƒçš„Jenkinsä»»åŠ¡ä¹‹å‰æˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹è¦è¾¾åˆ°ç°åº¦å‘å¸ƒçš„ç›®æ ‡éœ€è¦å“ªå‡ ä¸ªä»»åŠ¡ï¼Œ</span><br><span class="line">ä»¥åŠæ¯ä¸ªä»»åŠ¡è´Ÿè´£å®Œæˆä»€ä¹ˆäº‹æƒ…ã€‚</span><br><span class="line"></span><br><span class="line">ç°åº¦å‘å¸ƒä¸€èˆ¬éµå¾ªè¿™æ ·çš„æµç¨‹ï¼ˆå‡è®¾æˆ‘ä»¬æœ‰ABä¸¤å°æœåŠ¡å™¨ç”¨äºæä¾›ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºABè¾¹ï¼‰ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ1ï¼‰æ–°ä»£ç éƒ¨ç½²åˆ°Aè¾¹</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰ç¬¦åˆç°åº¦ç­–ç•¥çš„å°éƒ¨åˆ†æµé‡åˆ‡åˆ°Aè¾¹ï¼Œå‰©ä½™å¤§éƒ¨åˆ†æµé‡ä»å»å¾€Bè¾¹</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰æ‰‹åŠ¨éªŒè¯Aè¾¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å¯ç”¨</span><br><span class="line"></span><br><span class="line">ï¼ˆ4ï¼‰éªŒè¯æ— è¯¯åï¼Œå¤§éƒ¨åˆ†æµé‡è½¬åˆ°Aè¾¹ï¼Œç°åº¦æµé‡å»å¾€Bè¾¹</span><br><span class="line"></span><br><span class="line">ï¼ˆ5ï¼‰æ‰‹åŠ¨éªŒè¯Bè¾¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å¯ç”¨</span><br><span class="line"></span><br><span class="line">ï¼ˆ6ï¼‰éªŒè¯æ— è¯¯åï¼Œæµé‡åƒå¾€å¸¸ä¸€æ ·å‡åˆ†åˆ°ABè¾¹</span><br></pre></td></tr></table></figure>
<h3 id="ä»»åŠ¡æ‹†è§£"><a href="#ä»»åŠ¡æ‹†è§£" class="headerlink" title="ä»»åŠ¡æ‹†è§£"></a>ä»»åŠ¡æ‹†è§£</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡ä¸Šè¿°çš„æ‹†è§£ï¼Œæˆ‘ä»¬å¾—å‡ºç°åº¦å‘å¸ƒçš„6ä¸ªæ­¥éª¤ï¼Œå…¶ä¸­ï¼ˆ3ï¼‰å’Œï¼ˆ5ï¼‰æ˜¯éœ€è¦æ‰‹åŠ¨éªŒè¯çš„ç¯èŠ‚</span><br><span class="line"></span><br><span class="line">ä»¥æˆ‘ä»¬ä»¥è¿™ä¸¤ä¸ªä»»åŠ¡ä¸ºåˆ†å‰²ç‚¹ï¼Œå»ºç«‹ä¸‰ä¸ªJenkins ä»»åŠ¡ï¼ˆJenkins ä»»åŠ¡å»ºç«‹åœ¨A è¾¹æœºå™¨ä¸Šï¼‰å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ1ï¼‰Canary_Aï¼ˆç°åº¦æµ‹è¯•Aï¼‰ï¼Œè¿™ä¸ªä»»åŠ¡åˆåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ›´æ–°Aè¾¹çš„ä»£ç ï¼Œç„¶åä¿®æ”¹æµé‡åˆ†å‘ç­–ç•¥ä½¿å¾—ç°åº¦æµé‡åˆ°è¾¾Aï¼Œå…¶ä»–æµé‡åˆ°è¾¾B</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰Canary_ABï¼ˆä¸Šçº¿Aç°åº¦æµ‹è¯•Bï¼‰ï¼Œæ›´æ–°Bè¾¹ä»£ç ï¼Œç°åº¦æµé‡è¾¾åˆ°Bï¼Œå…¶ä»–æµé‡åˆ°è¾¾A</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰Canary_Bï¼ˆä¸Šçº¿Bï¼‰ï¼Œæ‰€æœ‰æµé‡å‡åˆ†åˆ°AB</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºä»»åŠ¡"><a href="#åˆ›å»ºä»»åŠ¡" class="headerlink" title="åˆ›å»ºä»»åŠ¡"></a>åˆ›å»ºä»»åŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å…ˆæŒ‰ç…§ä»»åŠ¡æ‹†è§£éƒ¨åˆ†çš„è®¾å®šåˆ›å»ºä¸‰ä¸ªFreeStyle ç±»å‹çš„Jenkins ä»»åŠ¡ï¼Œè®°å¾—ä½¿ç”¨è‹±æ–‡åå­—ï¼Œä¸­æ–‡åå­—åé¢å»ºæ–‡ä»¶å¤¹æ¯”è¾ƒéº»çƒ¦ã€‚</span><br><span class="line"></span><br><span class="line">ä»»åŠ¡è¯¦æƒ…ä¿¡æ¯å¯ä»¥ä¸å¡«ï¼Œç›´æ¥ä¿å­˜å°±å¥½ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å†æ¥é…ç½®æ¯ä¸ªä»»åŠ¡çš„å…·ä½“ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ä»»åŠ¡"><a href="#é…ç½®ä»»åŠ¡" class="headerlink" title="é…ç½®ä»»åŠ¡"></a>é…ç½®ä»»åŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç°åœ¨å·²ç»åˆ›å»ºå¥½äº†ä¸‰ä¸ªä»»åŠ¡ï¼Œå…ˆç‚¹å‡»è¿›å…¥æ¯ä¸€ä¸ªä»»åŠ¡è¿›è¡Œä¸€æ¬¡ç©ºçš„æ„å»ºï¼ˆå¦åˆ™åé¢å¯èƒ½å¯¼è‡´ä¿®æ”¹åçš„æ„å»ºä»»åŠ¡æ— æ³•å¯åŠ¨ï¼‰</span><br><span class="line"></span><br><span class="line">ç„¶åæˆ‘ä»¬æ¥å¯¹æ¯ä¸ªä»»åŠ¡è¿›è¡Œè¯¦ç»†çš„é…ç½®</span><br><span class="line"></span><br><span class="line">ç°ä»£å‰ç«¯é¡¹ç›®éƒ½è¦è¿›è¡Œæ„å»ºæ‰“åŒ…è¿™ä¸€æ­¥ã€‚ä½†æ˜¯å»‰ä»·çš„äº‘æœåŠ¡å™¨åœ¨å®Œæˆæ„å»ºæ–¹é¢æœ‰äº›åŠ›ä¸ä»å¿ƒï¼ŒCPU ç»å¸¸çˆ†è¡¨</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠæ‰“åŒ…å‡ºå¾—å‡ºçš„ç”Ÿäº§åŒ…çº³å…¥git ç®¡ç†ï¼Œæ¯æ¬¡çš„ä»£ç æ›´æ–°ä¼šåŒæ­¥æœ€æ–°çš„ç”Ÿäº§åŒ…åˆ°github</span><br><span class="line"></span><br><span class="line">å› æ­¤Jenkins ä»»åŠ¡æŠŠç”Ÿäº§åŒ…æ‹‰ä¸‹æ¥ï¼Œæ”¾åœ¨æŒ‡å®šä½ç½®å³å¯å®Œæˆä¸€æ¬¡æ–°ä»£ç çš„éƒ¨ç½²ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸€æ­¥æ“ä½œï¼Œå…¶å®æˆ‘ä»¬åœ¨ä¹‹å‰å°±å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢æ‰“äº†ä¸¤ä»½tilte ä¸ä¸€æ ·çš„ç”Ÿäº§åŒ…ï¼Œæ­¤æ—¶å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚</span><br><span class="line"></span><br><span class="line">é¦–å…ˆæ¥é…ç½®ç°åº¦æµ‹è¯•Aï¼Œè¿™ä¸ªä»»åŠ¡å†…å®¹ä¸Šé¢ä¹ŸåŸºæœ¬è®²æ¸…æ¥šäº†</span><br><span class="line"></span><br><span class="line">é¦–å…ˆè¦å…³è”è¯¥ä»»åŠ¡åˆ°è¿œç¨‹çš„github ä»“åº“ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªï¼Œå­˜æ”¾ä¸Šé¢æ‰“åŒ…çš„B-CanaryDemoï¼Œå¹¶å‘½åä¸ºdistï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è®©å®ƒçŸ¥é“å¯ä»¥å»å“ªé‡Œæ‹‰å–æœ€æ–°ä»£ç </span><br><span class="line"></span><br><span class="line">æ‰§è¡Œä¸€æ¬¡æ„å»ºä»»åŠ¡ï¼ˆåœ¨git fetch é‚£ä¸€æ­¥è€—æ—¶ä¸ç¨³å®šï¼Œæœ‰æ—¶æ¯”è¾ƒä¹…ï¼‰ï¼Œç„¶åç‚¹å‡»æœ¬æ¬¡æ„å»ºè¿›å»æŸ¥çœ‹Console Output</span><br><span class="line"></span><br><span class="line">å¯ä»¥ç¡®å®šæ‰§è¡ŒJenkins ä»»åŠ¡çš„ä½ç½®æ˜¯ä½äºæœåŠ¡å™¨ä¸Šçš„/var/lib/jenkins/workspace/Canary_A</span><br><span class="line"></span><br><span class="line">ç»§ç»­ç¼–è¾‘ç°åº¦æµ‹è¯•A ä»»åŠ¡ï¼Œæ·»åŠ build shellï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ1ï¼‰å…ˆæ‹‰å–æœ€æ–°çš„ä»£ç </span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰æŠŠä»£ç æ ¹ç›®å½•ä¸‹çš„distç›®å½•å¤åˆ¶åˆ°éƒ¨ç½²ä»£ç çš„ä½ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šçš„ä½ç½®æ˜¯/var/canaryDemo</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰ä¿®æ”¹Nginx é…ç½®ä½¿ç°åº¦æµé‡åˆ°è¾¾Aè¾¹</span><br><span class="line"></span><br><span class="line">å°±æ­¥éª¤ï¼ˆ3ï¼‰è€Œè¨€ï¼Œä¿®æ”¹ç°åº¦æµé‡çš„æ–¹å¼å…¶å®å°±æ˜¯é€‰æ‹©æ€§æ³¨é‡ŠNginx é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæ³¨é‡Šæ–¹å¼å¦‚ä¸‹å³å¯å®ç°ç°åº¦æµ‹è¯•Aã€‚</span><br><span class="line"></span><br><span class="line">upstream server_canary &#123;</span><br><span class="line">  # ç°åº¦æµé‡è®¿é—®A è¾¹</span><br><span class="line">  server 11.11.11.11:8080 weight=1 max_fails=1 fail_timeout=30s;</span><br><span class="line">  # server 22.22.22.22 weight=1 max_fails=1 fail_timeout=30s;</span><br><span class="line">&#125;</span><br><span class="line">upstream server_default &#123;</span><br><span class="line">  # æ­£å¸¸æµé‡è®¿é—®B è¾¹ï¼Œä¸ºäº†åœ¨ä¿®æ”¹æ–‡ä»¶çš„æ—¶å€™æŠŠè¿™æ®µçš„é…ç½®å’Œä¸Šé¢çš„server_canary åŒºåˆ†å¼€ï¼Œæˆ‘ä»¬æŠŠè¿™é‡Œçš„weight è®¾ä¸º2</span><br><span class="line">  # server 11.11.11.11:8080 weight=2 max_fails=1 fail_timeout=30s;</span><br><span class="line">  server 22.22.22.22 weight=2 max_fails=1 fail_timeout=30s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿™ä¸€æ­¥å¡«å†™çš„shell å‘½ä»¤åœ¨ä½¿ç”¨jenkins ç”¨æˆ·æ‰§è¡Œæ—¶å¯èƒ½ä¼šé‡åˆ°æƒé™é—®é¢˜ï¼Œå¯ä»¥å…ˆç”¨root ç”¨æˆ·ç™»å½•ï¼ŒæŠŠ/var ç›®å½•çš„å½’å±æ”¹ä¸ºjenkins ç”¨æˆ·ï¼Œ/etc/nginx/ngix.confä¹Ÿéœ€è¦æ–°å¢å¯å†™æƒé™ã€‚ç”±æ­¤ï¼Œæœ€ç»ˆå¾—åˆ°çš„shell å‘½ä»¤å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">git pull</span><br><span class="line">rm -rf /var/canaryDemo</span><br><span class="line">scp -r dist /var/canaryDemo</span><br><span class="line">sed -i &apos;s/server 22.22.22.22 weight=1/# server 22.22.22.22 weight=1/&apos; /etc/nginx/nginx.conf</span><br><span class="line">sed -i &apos;s/server 11.11.11.11:8000 weight=2/# server 11.11.11.11:8000 weight=2/&apos; /etc/nginx/nginx.conf</span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line">ç°åº¦æµ‹è¯•A ä»»åŠ¡å†…å®¹é…ç½®å®Œæˆï¼Œæ¥ä¸‹æ¥ä¾æ¬¡é…ç½®ä¸Šçº¿A ç°åº¦æµ‹è¯•B å’Œä¸Šçº¿Bã€‚</span><br><span class="line"></span><br><span class="line">ç°åº¦æµ‹è¯•B çš„è¦æ‰§è¡Œçš„ä»»åŠ¡æ˜¯æŠŠæœ€æ–°çš„ä»£ç æ‹‰åˆ°A è¾¹ï¼ˆå› ä¸ºæˆ‘ä»¬çš„Jenkins ä»»åŠ¡éƒ½æ˜¯å»ºç«‹åœ¨A è¾¹çš„ï¼‰ï¼Œå¤åˆ¶dist ä¸‹çš„ä»£ç åˆ°B è¾¹Nginx æŒ‡å®šè®¿é—®ä½ç½®ï¼Œç„¶åä¿®æ”¹A è¾¹Nginx é…ç½®ï¼Œä½¿ç°åº¦æµé‡åˆ°è¾¾B è¾¹ã€‚</span><br><span class="line"></span><br><span class="line">git pull</span><br><span class="line">rm -rf canaryDemo</span><br><span class="line">mv dist canaryDemo</span><br><span class="line">scp -r canaryDemo root@xx.xx.xx.xx:/var</span><br><span class="line">sed -i &apos;s/# server 22.22.22.22 weight=1/server 22.22.22.22 weight=1/&apos; /etc/nginx/nginx.conf</span><br><span class="line">sed -i &apos;s/# server 11.11.11.11:8000 weight=2/server 11.11.11.11:8000 weight=2/&apos; /etc/nginx/nginx.conf</span><br><span class="line">sed -i &apos;s/server 22.22.22.22 weight=2/# server 22.22.22.22 weight=2/&apos; /etc/nginx/nginx.conf</span><br><span class="line">sed -i &apos;s/server 11.11.11.11:8000 weight=1/# server 11.11.11.11:8000 weight=1/&apos; /etc/nginx/nginx.conf</span><br><span class="line">nginx -s reload</span><br><span class="line">è¿™ä¸€æ­¥çš„ä»»åŠ¡å†…å®¹æ¶‰åŠåˆ°ä»A è¾¹æœåŠ¡å™¨å‘B è¾¹æœåŠ¡å™¨å‘é€ä»£ç ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬æ¥è¯´éœ€è¦è¾“å…¥B è¾¹æœåŠ¡å™¨çš„å¯†ç ã€‚æˆ‘ä»¬æƒ³è¦åšåˆ°å…å¯†å‘é€ï¼Œå› æ­¤è¦é€šè¿‡æŠŠA è¾¹æœºå™¨~/.ssh/id_rsa.pub ä¸­çš„å†…å®¹æ·»åŠ åˆ°B è¾¹æœåŠ¡å™¨~/.ssh/authorized_keys ä¸­ä½¿å¾—A è·å¾—å…å¯†åƒB å‘é€æ–‡ä»¶çš„æƒé™ã€‚</span><br><span class="line"></span><br><span class="line">ä¸Šçº¿B åˆ™æ˜¯é€šè¿‡å–æ¶ˆå¯¹A è¾¹Nginx é…ç½®çš„æ³¨é‡Šä½¿æ‰€æœ‰æµé‡å‡åˆ†åˆ°AB è¾¹.</span><br><span class="line"></span><br><span class="line">sed -i &apos;s/# server 22.22.22.22 weight=2/server 22.22.22.22 weight=2/&apos; /etc/nginx/nginx.conf</span><br><span class="line">sed -i &apos;s/# server 11.11.11.11:8000 weight=1/server 11.11.11.11:8000 weight=1/&apos; /etc/nginx/nginx.conf</span><br><span class="line">nginx -s reload</span><br><span class="line">è‡³æ­¤ï¼Œæˆ‘ä»¬å°±ä»é›¶åˆ°ä¸€æ­å»ºäº†ä¸€ä¸ªç°åº¦å‘å¸ƒç¯å¢ƒã€‚åœ¨ä»£ç æ›´æ–°åï¼Œé€šè¿‡æ‰‹åŠ¨æ‰§è¡ŒJenkins ä»»åŠ¡çš„æ–¹å¼å®ç°ç°åº¦éƒ¨ç½²å’Œæ‰‹å·¥æµ‹è¯•ï¼Œä¿è¯æ–°åŠŸèƒ½å¹³æ»‘ä¸Šçº¿ã€‚</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jsonload.com/2020/07/20/npm-å¿«é€Ÿå¼€å‘æŠ€å·§/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="killsos.ql@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killsos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/20/npm-å¿«é€Ÿå¼€å‘æŠ€å·§/" itemprop="url">npm å¿«é€Ÿå¼€å‘æŠ€å·§</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-20T10:41:12+08:00">
                2020-07-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1ã€å­¦ä¹ åŸºæœ¬å¿«æ·æ–¹å¼"><a href="#1ã€å­¦ä¹ åŸºæœ¬å¿«æ·æ–¹å¼" class="headerlink" title="1ã€å­¦ä¹ åŸºæœ¬å¿«æ·æ–¹å¼"></a>1ã€å­¦ä¹ åŸºæœ¬å¿«æ·æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å®‰è£… â€Šâ€”â€Š å¸¸è§„ï¼šnpm installï¼Œç®€å†™ï¼šnpm i</span><br><span class="line">æµ‹è¯• â€Šâ€”â€Š å¸¸è§„ï¼šnpm testï¼Œç®€å†™ï¼šnpm t</span><br><span class="line">å¸®åŠ© â€Šâ€”â€Š å¸¸è§„ï¼šnpm --helpï¼Œç®€å†™ï¼šnpm -h</span><br><span class="line">å…¨å±€æ ‡å¿— â€”â€Š å¸¸è§„ï¼š --globalï¼Œç®€å†™ï¼š-g</span><br><span class="line">ä¿å­˜ä¸ºå¼€å‘ä¾èµ– - å¸¸è§„ï¼š - save-devï¼Œç®€å†™ï¼š-D</span><br><span class="line">npm init é»˜è®¤å€¼ - å¸¸è§„ï¼šnpm init --yes æˆ– npm init --forceï¼Œç®€å†™ï¼šnpm init -y æˆ– npm init -f</span><br><span class="line">è¦å®‰è£…ä¸€ä¸ªåŒ…è€Œä¸ä¿å­˜å®ƒï¼Œå¯ä»¥ä½¿ç”¨ â€”â€”no-saveæ ‡å¿—ã€‚</span><br><span class="line">å®‰è£…åŒ…ä¿¡æ¯å°†åŠ å…¥åˆ°optionalDependenciesï¼ˆå¯é€‰é˜¶æ®µçš„ä¾èµ–ï¼‰- å¸¸è§„ï¼š--save-optionalï¼Œ ç®€å†™ï¼š-O</span><br><span class="line">ç²¾ç¡®å®‰è£…æŒ‡å®šæ¨¡å—ç‰ˆæœ¬ - å¸¸è§„ï¼š--save-optionalï¼Œ ç®€å†™ï¼š-O</span><br></pre></td></tr></table></figure>
<h3 id="æ ¹çš„å¿«æ·æ–¹å¼"><a href="#æ ¹çš„å¿«æ·æ–¹å¼" class="headerlink" title="æ ¹çš„å¿«æ·æ–¹å¼"></a>æ ¹çš„å¿«æ·æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">. ç¬¦å·é€šå¸¸ç”¨äºè¡¨ç¤ºåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•</span><br><span class="line"></span><br><span class="line">npmæœ¯è¯­ä¸­çš„åº”ç”¨ç¨‹åºå…¥å£ç‚¹ï¼Œå³package.jsonä¸­æŒ‡å®šä¸ºâ€œmainâ€çš„å€¼</span><br><span class="line">&#123;</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªå¿«æ·æ–¹å¼ä¹Ÿå¯ä»¥ç”¨äºåƒnpx create-react-app . è¿™æ ·çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œå¯ä»¥è¿è¡Œnpx create-react-app .</span><br><span class="line"></span><br><span class="line">è€Œä¸æ˜¯ä½¿ç”¨ npx create-react-app my-app åˆ›å»ºä¸€ä¸ªæ–°çš„my-appç›®å½•ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="2ã€è®¾ç½®é»˜è®¤npm-initå±æ€§"><a href="#2ã€è®¾ç½®é»˜è®¤npm-initå±æ€§" class="headerlink" title="2ã€è®¾ç½®é»˜è®¤npm initå±æ€§"></a>2ã€è®¾ç½®é»˜è®¤npm initå±æ€§</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å­—æ®µè®¾ç½®é»˜è®¤å€¼</span><br><span class="line">npm config set init.author.name &quot;Joe Bloggs&quot;</span><br><span class="line">npm config set init.author.email &quot;JoebLoggs@gmail.com&quot;</span><br><span class="line">npm config set init.author.url &quot;Joebloggs.com&quot;</span><br><span class="line">npm config set init.license &quot;MIT&quot;</span><br><span class="line"></span><br><span class="line">è¦æ£€æŸ¥æ˜¯å¦æ­£ç¡®æ·»åŠ äº†è¿™äº›å±æ€§ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ npm config editæŸ¥çœ‹é…ç½®æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">å½“ç„¶ä¹Ÿjå¯ä»¥é€šè¿‡ç›´æ¥åœ¨æ‰“å¼€çš„é…ç½®æ–‡ä»¶ç¼–è¾‘ä¿¡æ¯</span><br><span class="line">å¦‚æœè¦ç¼–è¾‘å…¨å±€npmè®¾ç½®ï¼Œä½¿ç”¨npm config edit -g</span><br><span class="line"></span><br><span class="line">è¦é‡æ–°åˆå§‹åŒ–é»˜è®¤è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ã€‚ç¬¬ä¸€è¡Œç”¨ç©ºå­—ç¬¦ä¸²æ›¿æ¢é…ç½®æ–‡ä»¶ï¼Œç¬¬äºŒè¡Œç”¨é»˜è®¤è®¾ç½®é‡æ–°å¡«å……é…ç½®æ–‡ä»¶</span><br><span class="line">echo &quot;&quot; &gt; $(npm config get userconfig)</span><br><span class="line">npm config edit</span><br><span class="line"></span><br><span class="line">ä¸Šé¢çš„è„šæœ¬å°†é‡ç½®ç”¨æˆ·é»˜è®¤å€¼ï¼Œä¸‹é¢çš„è„šæœ¬å°†é‡ç½®å…¨å±€é»˜è®¤å€¼</span><br><span class="line">echo &quot;&quot; &gt; $(npm config get globalconfig)</span><br><span class="line">npm config --global edit</span><br></pre></td></tr></table></figure>
<h3 id="3ã€è®©è„šæœ¬è·¨å¹³å°å…¼å®¹"><a href="#3ã€è®©è„šæœ¬è·¨å¹³å°å…¼å®¹" class="headerlink" title="3ã€è®©è„šæœ¬è·¨å¹³å°å…¼å®¹"></a>3ã€è®©è„šæœ¬è·¨å¹³å°å…¼å®¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æœ€å¥½çš„æ˜¯cross-envã€‚ä½¿ç”¨npm i -D cross-envå°†å…¶ä½œä¸ºå¼€å‘ä¾èµ–é¡¹å®‰è£…</span><br><span class="line">ç„¶ååœ¨ä»»ä½•ç¯å¢ƒå˜é‡ä¹‹å‰åŒ…æ‹¬å…³é”®å­—cross-env</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config build/wepack.config.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cross-envæ˜¯ å®ç°è·¨å¹³å°å…¼å®¹æ€§çš„æœ€æ— ç¼çš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line">rimraf å¯ä»¥å®‰è£…åœ¨å…¨çƒè¿è¡Œè·¨å¹³å°è„šæœ¬</span><br><span class="line">ShellJS æ˜¯Unix shellå‘½ä»¤åœ¨Node.js APIä¸Šçš„å¯ç§»æ¤å®ç°</span><br></pre></td></tr></table></figure>
<h3 id="4ã€å¹¶è¡Œè¿è¡Œè„šæœ¬"><a href="#4ã€å¹¶è¡Œè¿è¡Œè„šæœ¬" class="headerlink" title="4ã€å¹¶è¡Œè¿è¡Œè„šæœ¬"></a>4ã€å¹¶è¡Œè¿è¡Œè„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥ä½¿ç”¨&amp;&amp;æ¥ä¾æ¬¡è¿è¡Œä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹</span><br><span class="line">ä½†æ˜¯å¹¶è¡Œè¿è¡Œè„šæœ¬å‘¢?ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»å„ç§npmåŒ…ä¸­è¿›è¡Œé€‰æ‹©ã€‚</span><br><span class="line"></span><br><span class="line">concurrent å’Œ npm-run-all æ˜¯æœ€æµè¡Œçš„è§£å†³æ–¹æ¡ˆ</span><br><span class="line"></span><br><span class="line">é¦–å…ˆé€šè¿‡ npm i -D concurrently å®‰è£…å¼€å‘ä¾èµ–</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;start&quot;: &quot;concurrently \&quot;command1 arg\&quot; \&quot;command2 arg\&quot;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€åœ¨ä¸åŒçš„ç›®å½•ä¸­è¿è¡Œè„šæœ¬"><a href="#5ã€åœ¨ä¸åŒçš„ç›®å½•ä¸­è¿è¡Œè„šæœ¬" class="headerlink" title="5ã€åœ¨ä¸åŒçš„ç›®å½•ä¸­è¿è¡Œè„šæœ¬"></a>5ã€åœ¨ä¸åŒçš„ç›®å½•ä¸­è¿è¡Œè„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">æœ‰æ—¶ï¼Œåœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­æ‹¥æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªpackage.jsonæ–‡ä»¶çš„åº”ç”¨ç¨‹åºã€‚</span><br><span class="line">ä»æ ¹ç›®å½•è®¿é—®è¿™äº›è„šæœ¬ä¼šå¾ˆæ–¹ä¾¿ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¦è¿è¡Œè„šæœ¬æ—¶å¯¼èˆªåˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æ‰§è¡Œæ­¤æ“ä½œ</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ç§æ˜¯æ‰‹åŠ¨ cd å¹¶è¿è¡Œå¯¹åº”çš„å‘½ä»¤</span><br><span class="line">cd folder &amp;&amp; npm start &amp;&amp; cd ..</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒç§æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œå³ä½¿ç”¨--prefixæ ‡å¿—æŒ‡å®šè·¯å¾„:</span><br><span class="line">npm start --prefix path/to/your/folder</span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯ä¸€ä¸ªå·¥ä½œåº”ç”¨ç¨‹åºä¸­æ­¤è§£å†³æ–¹æ¡ˆçš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å‰ç«¯(åœ¨å®¢æˆ·æœºç›®å½•ä¸­)å’Œåç«¯(åœ¨æœåŠ¡å™¨ç›®å½•ä¸­)è¿è¡Œ npm start</span><br><span class="line"></span><br><span class="line">&quot;start&quot;: &quot;concurrently \&quot;(npm start --prefix client)\&quot; \&quot;(npm start --prefix server)\&quot;&quot;,</span><br><span class="line"></span><br><span class="line">é€šå¸¸ï¼Œåœ¨å¼€å‘å…¨å †æ ˆåº”ç”¨ç¨‹åºæœŸé—´ï¼Œå’±ä»¬å¯èƒ½å¸Œæœ›åŒæ—¶å¯åŠ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚wait-on èŠ‚ç‚¹æ¨¡å—æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥ç¡®ä¿è¿›ç¨‹åªåœ¨æŸäº›è¿›ç¨‹å°±ç»ªæ—¶å‘ç”Ÿ:åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼Œè¿™æ˜¯æˆ‘åœ¨ä½¿ç”¨reactå‰ç«¯çš„Electroné¡¹ç›®ä¸­ä½¿ç”¨çš„devè„šæœ¬ã€‚åŒæ—¶ä½¿ç”¨ï¼Œè„šæœ¬å¹¶è¡ŒåŠ è½½è¡¨ç¤ºå±‚å’ŒElectronçª—å£ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨wait-onï¼Œåªæœ‰åœ¨ http://localhost:3000 å¯åŠ¨å¥½ï¼Œæ‰ä¼šæ‰“å¼€Electronçª—å£ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;dev&quot;: &quot;concurrently \&quot;cross-env BROWSER=none npm run start\&quot; \&quot;wait-on http://localhost:3000 &amp;&amp; electron .\&quot;&quot;,</span><br><span class="line"></span><br><span class="line">æ­¤å¤–ï¼Œreacté»˜è®¤æƒ…å†µä¸‹ä¼šæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œä½†å¯¹äº Electron å¼€å‘æ¥è¯´ï¼Œè¿™æ˜¯ä¸å¿…è¦çš„ã€‚å’±ä»¬å¯ä»¥é€šè¿‡ä¼ é€’ç¯å¢ƒå˜é‡BROWSER=noneæ¥ç¦ç”¨æ­¤è¡Œä¸º</span><br></pre></td></tr></table></figure>
<h3 id="7ã€åˆ—å‡ºå¹¶é€‰æ‹©å¯ç”¨è„šæœ¬"><a href="#7ã€åˆ—å‡ºå¹¶é€‰æ‹©å¯ç”¨è„šæœ¬" class="headerlink" title="7ã€åˆ—å‡ºå¹¶é€‰æ‹©å¯ç”¨è„šæœ¬"></a>7ã€åˆ—å‡ºå¹¶é€‰æ‹©å¯ç”¨è„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åˆ—å‡ºpackage.jsonæ–‡ä»¶ä¸­å¯ç”¨çš„è„šæœ¬å¾ˆç®€å•ï¼šåªéœ€è½¬åˆ°é¡¹ç›®çš„æ ¹ç›®å½•å¹¶åœ¨ç»ˆç«¯ä¸­è¾“å…¥npm runã€‚</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯æœ‰ä¸€ç§æ›´æ–¹ä¾¿çš„æ–¹æ³•å¯ä»¥è·å¾—è„šæœ¬åˆ—è¡¨ï¼Œå¯ä»¥ç«‹å³è¿è¡Œè¯¥åˆ—è¡¨:ä¸ºæ­¤ï¼Œå…¨å±€å®‰è£… NTL (npmä»»åŠ¡åˆ—è¡¨)æ¨¡å—:</span><br><span class="line"></span><br><span class="line">  npm i -g ntl</span><br><span class="line"></span><br><span class="line">ç„¶ååœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¿è¡Œntlå‘½ä»¤ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªå¯ç”¨è„šæœ¬åˆ—è¡¨ï¼Œå¹¶å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªè¿è¡Œ</span><br></pre></td></tr></table></figure>
<h3 id="8ã€è¿è¡Œå‰åè„šæœ¬"><a href="#8ã€è¿è¡Œå‰åè„šæœ¬" class="headerlink" title="8ã€è¿è¡Œå‰åè„šæœ¬"></a>8ã€è¿è¡Œå‰åè„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä½ å¯èƒ½ç†Ÿæ‚‰prebuildå’Œpostbuildè¿™æ ·çš„è„šæœ¬ï¼Œå®ƒä»¬å…è®¸ä½ å®šä¹‰åœ¨æ„å»ºè„šæœ¬ä¹‹å‰æˆ–ä¹‹åè¿è¡Œçš„ä»£ç </span><br><span class="line"></span><br><span class="line">ä½†äº‹å®ä¸Šï¼Œpreå’Œpostå¯ä»¥åœ¨ä»»ä½•è„šæœ¬ä¹‹å‰æ·»åŠ ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰è„šæœ¬</span><br><span class="line"></span><br><span class="line">è¿™ä¸ä»…ä½¿ä½ çš„ä»£ç æ›´å¹²å‡€ï¼Œè€Œä¸”è¿˜å…è®¸ä½ å•ç‹¬è¿è¡Œpreå’Œpostè„šæœ¬</span><br></pre></td></tr></table></figure>
<h3 id="9ã€æ§åˆ¶åº”ç”¨ç¨‹åºç‰ˆæœ¬"><a href="#9ã€æ§åˆ¶åº”ç”¨ç¨‹åºç‰ˆæœ¬" class="headerlink" title="9ã€æ§åˆ¶åº”ç”¨ç¨‹åºç‰ˆæœ¬"></a>9ã€æ§åˆ¶åº”ç”¨ç¨‹åºç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm æä¾›äº†ä¸€äº›æœ‰ç”¨çš„å¿«æ·æ–¹å¼æ¥å®Œæˆè¿™ä¸€ç‚¹</span><br><span class="line">è¦å¢åŠ ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">è¯·åœ¨è¿è¡Œ npm versionåŠ ä¸Šmajorï¼Œminoræˆ–patch`</span><br><span class="line"></span><br><span class="line">// 1.0.0</span><br><span class="line">npm version patch</span><br><span class="line">// 1.0.1</span><br><span class="line">npm version minor</span><br><span class="line">// 1.1.0</span><br><span class="line">npm version major</span><br><span class="line">// 2.0.0</span><br><span class="line"></span><br><span class="line">æ ¹æ®æ›´æ–°åº”ç”¨ç¨‹åºçš„é¢‘ç‡ï¼Œå¯ä»¥é€šè¿‡åœ¨æ¯æ¬¡éƒ¨ç½²æ—¶å¢åŠ ç‰ˆæœ¬å·æ¥èŠ‚çœæ—¶é—´ï¼Œä½¿ç”¨ä»¥ä¸‹è„šæœ¬:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;predeploy&quot;: &quot;npm version patch&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10ã€ä»å‘½ä»¤è¡Œç¼–è¾‘-package-json"><a href="#10ã€ä»å‘½ä»¤è¡Œç¼–è¾‘-package-json" class="headerlink" title="10ã€ä»å‘½ä»¤è¡Œç¼–è¾‘ package.json"></a>10ã€ä»å‘½ä»¤è¡Œç¼–è¾‘ package.json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package.jsonæ˜¯ä¸€ä¸ªå¸¸è§„çš„jsonæ–‡ä»¶ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å·¥å…·åº“jsonä»å‘½ä»¤è¡Œè¿›è¡Œç¼–è¾‘ã€‚è¿™åœ¨ä¿®æ”¹package.jsonæä¾›å¦å¤–ä¸€ç§æ–°çš„æ–¹å¼ï¼Œå…è®¸wä½ qåˆ›å»ºè¶…å‡ºé»˜è®¤å€¼çš„å¿«æ·æ–¹å¼ã€‚å…¨å±€å®‰è£…ï¼š</span><br><span class="line">npm install -g json</span><br><span class="line"></span><br><span class="line">ç„¶åï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥ä½¿ç”¨-Iè¿›è¡Œå°±åœ°ç¼–è¾‘ã€‚ä¾‹å¦‚ï¼Œè¦æ·»åŠ å€¼ä¸ºâ€œbarâ€çš„æ–°è„šæœ¬â€œfooâ€ï¼Œè¿™æ ·å†™ï¼š</span><br><span class="line"></span><br><span class="line">json -I -f package.json -e &apos;this.scripts.foo=&quot;bar&quot;&apos;</span><br></pre></td></tr></table></figure>
<h3 id="11ã€-è‡ªåŠ¨è®¾ç½®å’Œæ‰“å¼€ä½ çš„githubåº“"><a href="#11ã€-è‡ªåŠ¨è®¾ç½®å’Œæ‰“å¼€ä½ çš„githubåº“" class="headerlink" title="11ã€ è‡ªåŠ¨è®¾ç½®å’Œæ‰“å¼€ä½ çš„githubåº“"></a>11ã€ è‡ªåŠ¨è®¾ç½®å’Œæ‰“å¼€ä½ çš„githubåº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœpackage.jsonæ–‡ä»¶ä¸­æœ‰â€œrepositoryâ€ï¼Œåˆ™å¯ä»¥é€šè¿‡è¾“å…¥ npm repoåœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€å®ƒ</span><br><span class="line"></span><br><span class="line">å¦‚æœä½ çš„é¡¹ç›®å·²ç»è¿æ¥åˆ°è¿œç¨‹å­˜å‚¨åº“ï¼Œå¹¶ä¸”å·²ç»åœ¨å‘½ä»¤è¡Œä¸Šå®‰è£…äº†gitï¼Œé‚£æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ‰¾åˆ°ä½ çš„è¿æ¥å­˜å‚¨åº“</span><br><span class="line"></span><br><span class="line">git config --get remote.origin.url</span><br><span class="line"></span><br><span class="line">æ›´å¥½çš„æ˜¯ï¼Œå¦‚æœä½ æŒ‰ç…§ä¸Šé¢çš„æç¤ºå¹¶å®‰è£…äº†jsonæ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬è‡ªåŠ¨å°†æ­£ç¡®çš„å­˜å‚¨åº“æ·»åŠ åˆ° package.json</span><br><span class="line"></span><br><span class="line">json -I -f package.json -e &quot;this.repository=\&quot;$(git config --get remote.o</span><br></pre></td></tr></table></figure>
<h3 id="12ã€è‡ªå®šä¹‰npm-initè„šæœ¬"><a href="#12ã€è‡ªå®šä¹‰npm-initè„šæœ¬" class="headerlink" title="12ã€è‡ªå®šä¹‰npm initè„šæœ¬"></a>12ã€è‡ªå®šä¹‰npm initè„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">è®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„npm initè„šæœ¬ï¼Œå®ƒæ¥å—GitHubå­˜å‚¨åº“URLå¹¶è‡ªåŠ¨æ¨é€æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæäº¤</span><br><span class="line">åœ¨æœ¬æŠ€å·§ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰npm initè„šæœ¬ã€‚åœ¨ä¸‹ä¸€ä¸ª(ä¹Ÿæ˜¯æœ€åä¸€ä¸ª)æŠ€å·§ä¸­ï¼Œæˆ‘ä»¬å°†åˆå¹¶git</span><br><span class="line"></span><br><span class="line">å¯ä»¥é€šè¿‡é‡å®šå‘åˆ°ä¸»ç›®å½•ä¸­çš„.npm-init.jsæ–‡ä»¶æ¥ç¼–è¾‘npm initè„šæœ¬</span><br><span class="line">ï¼ˆåœ¨Windowsä¸Šï¼Œé€šå¸¸æ˜¯ c/Users/&lt;ç”¨æˆ·å&gt;ï¼Œåœ¨ Mac ä¸Šï¼Œå®ƒæ˜¯/Users/&lt;ç”¨æˆ·å&gt;ï¼‰</span><br><span class="line"></span><br><span class="line">è®©æˆ‘ä»¬é¦–å…ˆåœ¨æˆ‘ä»¬çš„ä¸»ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª.nmm-init.jsæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">ä¸ºäº†ç¡®ä¿npm initè¢«æŒ‡å‘æ­£ç¡®çš„æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œ:</span><br><span class="line"></span><br><span class="line">npm config set init-module ~\.npm-init.js</span><br><span class="line"></span><br><span class="line">åœ¨é›†æˆgitä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„.npm-init.jsæ–‡ä»¶ï¼Œå®ƒæ¨¡æ‹Ÿäº†é»˜è®¤npm initçš„é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  name: prompt(&apos;package name&apos;, basename || package.name),</span><br><span class="line">  version: prompt(&apos;version&apos;, &apos;0.0.0&apos;),</span><br><span class="line">  decription: prompt(&apos;description&apos;, &apos;&apos;),</span><br><span class="line">  main: prompt(&apos;entry point&apos;, &apos;index.js&apos;),</span><br><span class="line">  repository: prompt(&apos;git repository&apos;, &apos;&apos;),</span><br><span class="line">  keywords: prompt(function (s) &#123; return s.split(/\s+/) &#125;),</span><br><span class="line">  author: prompt(&apos;author&apos;, &apos;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&apos;),</span><br><span class="line">  license: prompt(&apos;license&apos;, &apos;ISC&apos;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªé—®é¢˜éƒ½éµå¾ªnameInPackageæ¨¡å¼:prompt(&apos;nameInPrompt&apos;,&apos;defaultValue&apos;)ã€‚è¦åœ¨ç¼ºçœæƒ…å†µä¸‹è®¾ç½®å€¼è€Œä¸å¸¦é—®é¢˜ï¼Œåªéœ€åˆ é™¤promptæ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="13ã€ä½¿ç”¨è‡ªå®šä¹‰npm-initè„šæœ¬å°†ä½ çš„ç¬¬ä¸€ä¸ª-Commit-æäº¤åˆ°-GitHub"><a href="#13ã€ä½¿ç”¨è‡ªå®šä¹‰npm-initè„šæœ¬å°†ä½ çš„ç¬¬ä¸€ä¸ª-Commit-æäº¤åˆ°-GitHub" class="headerlink" title="13ã€ä½¿ç”¨è‡ªå®šä¹‰npm initè„šæœ¬å°†ä½ çš„ç¬¬ä¸€ä¸ª Commit æäº¤åˆ° GitHub"></a>13ã€ä½¿ç”¨è‡ªå®šä¹‰npm initè„šæœ¬å°†ä½ çš„ç¬¬ä¸€ä¸ª Commit æäº¤åˆ° GitHub</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">ä¸ºäº†å°†gitå‘½ä»¤åˆå¹¶åˆ°.npm-init.jsæ–‡ä»¶ä¸­ï¼Œéœ€è¦ä¸€ç§æ–¹æ³•æ¥æ§åˆ¶å‘½ä»¤è¡Œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨child_process æ¨¡å—</span><br><span class="line"></span><br><span class="line">åœ¨æ–‡ä»¶çš„é¡¶éƒ¨å¼•å…¥å®ƒï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦execSyncå‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ææ„èµ‹å€¼è¯­æ³•è‡ªå·±è·å–å®ƒï¼š</span><br><span class="line"></span><br><span class="line">const &#123; execSync &#125; = require(&apos;child_process&apos;);</span><br><span class="line"></span><br><span class="line">æˆ‘è¿˜åˆ›å»ºäº†ä¸€ä¸ªhelperå‡½æ•°ï¼Œå®ƒå°†å‡½æ•°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°ï¼š</span><br><span class="line"></span><br><span class="line">function run(func) &#123;</span><br><span class="line">  console.log(execSync(func).toString())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æœ€åï¼Œæˆ‘ä»¬å°†æç¤ºè¾“å…¥GitHubå­˜å‚¨åº“URLï¼Œå¦‚æœæä¾›ï¼Œæˆ‘ä»¬å°†ç”ŸREADME.mdæ–‡ä»¶ï¼Œå¹¶å¯åŠ¨æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡æäº¤</span><br><span class="line"></span><br><span class="line">repository: prompt(&apos;github repository url&apos;, &apos;&apos;, function (url) &#123;</span><br><span class="line">  if (url) &#123;</span><br><span class="line">    run(&apos;touch README.md&apos;);</span><br><span class="line">    run(&apos;git init&apos;);</span><br><span class="line">    run(&apos;git add README.md&apos;);</span><br><span class="line">    run(&apos;git commit -m &quot;first commit&quot;&apos;);</span><br><span class="line">    run(`git remote add origin $&#123;url&#125;`);</span><br><span class="line">    run(&apos;git push -u origin master&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">  return url;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼Œ.npm-init.jsæ–‡ä»¶å¤§æ¦‚å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">const &#123; execSync &#125; = require(&apos;child_process&apos;);</span><br><span class="line"></span><br><span class="line">function run(func) &#123;</span><br><span class="line">  console.log(execSync(func).toString())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  name: prompt(&apos;package name&apos;, basename || package.name),</span><br><span class="line">  version: prompt(&apos;version&apos;, &apos;0.0.0&apos;),</span><br><span class="line">  decription: prompt(&apos;description&apos;, &apos;&apos;),</span><br><span class="line">  main: prompt(&apos;entry point&apos;, &apos;index.js&apos;),</span><br><span class="line">  keywords: prompt(function (s) &#123; return s.split(/\s+/) &#125;),</span><br><span class="line">  author: prompt(&apos;author&apos;, &apos;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&apos;),</span><br><span class="line">  license: prompt(&apos;license&apos;, &apos;ISC&apos;),</span><br><span class="line">  repository: prompt(&apos;github repository url&apos;, &apos;&apos;, function (url) &#123;</span><br><span class="line">    if (url) &#123;</span><br><span class="line">      run(&apos;touch README.md&apos;);</span><br><span class="line">      run(&apos;git init&apos;);</span><br><span class="line">      run(&apos;git add README.md&apos;);</span><br><span class="line">      run(&apos;git commit -m &quot;first commit&quot;&apos;);</span><br><span class="line">      run(`git remote add origin $&#123;url&#125;`);</span><br><span class="line">      run(&apos;git push -u origin master&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    return url;</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">package.jsonæ–‡ä»¶ï¼š</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Custom npm init&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</span><br><span class="line">  &quot;decription&quot;: &quot;A test project, to demonstrate a custom npm init script.&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;keywords&quot;: [],</span><br><span class="line">  &quot;author&quot;: &quot;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;repository&quot;: &#123;</span><br><span class="line">    &quot;type&quot;: &quot;git&quot;,</span><br><span class="line">    &quot;url&quot;: &quot;git+https://github.com/123/custom.git&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;bugs&quot;: &#123;</span><br><span class="line">    &quot;url&quot;: &quot;https://github.com/123/issues&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;homepage&quot;: &quot;https://github.com/123/custom#readme&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">killsos.ql@gmail.com</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">137</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">killsos.ql@gmail.com</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
